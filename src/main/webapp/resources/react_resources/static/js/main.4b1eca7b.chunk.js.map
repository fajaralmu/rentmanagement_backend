{"version":3,"sources":["redux/appReducer.ts","redux/types.js","models/BaseEntity.ts","models/HealthCenter.ts","models/ApplicationProfile.ts","redux/userReducer.js","models/common/AttachmentInfo.ts","services/Promises.ts","services/UserService.ts","services/MasterDataService.ts","services/TransactionService.ts","services/InventoryService.ts","services/ReportService.ts","redux/servicesReducer.ts","services/Services.ts","redux/reducers.ts","middlewares/UserMiddleware.ts","middlewares/RealtimeChatMiddleware.js","redux/configureStore.js","middlewares/Common.ts","constant/Url.js","redux/actionCreators.ts","constant/stores.js","component/loader/Loader.js","component/alert/Alert.js","utils/EventUtil.ts","component/BaseComponent.tsx","constant/Menus.ts","component/navigation/Header.tsx","component/loader/Spinner.tsx","component/pages/login/Login.tsx","component/BasePage.tsx","utils/StringUtil.ts","models/FieldType.ts","component/pages/dashboard/main/DashboardMain.tsx","component/navigation/AnchorButton.tsx","component/container/Modal.tsx","models/common/Filter.ts","models/settings/EntityProperty.ts","utils/EntityValues.tsx","component/navigation/NavigationButtons.tsx","utils/ComponentUtil.ts","component/pages/masterdata/form/fields/BaseField.tsx","component/pages/masterdata/form/fields/FormInputImage.tsx","component/pages/masterdata/form/fields/FormInputImageMultiple.tsx","component/pages/masterdata/form/fields/FormInputDropDown.tsx","component/navigation/AnchorWithIcon.tsx","component/pages/masterdata/form/fields/FormInputTextEditor.tsx","component/pages/masterdata/form/fields/FormInputCheckBox.tsx","utils/DateUtil.ts","component/pages/masterdata/form/fields/FormInputCoomon.tsx","component/pages/masterdata/form/fields/FormInputDropDownDynamic.tsx","component/form/FormGroup.tsx","component/form/InputTime.tsx","component/form/InputDateTime.tsx","component/pages/masterdata/form/fields/FormInputDateTime.tsx","component/pages/masterdata/form/FormInputField.tsx","component/pages/masterdata/form/MasterDataForm.tsx","component/pages/masterdata/EditDeleteAction.tsx","component/pages/masterdata/DataTableHeader.tsx","component/alert/SimpleError.tsx","component/pages/masterdata/ExternalEditForm.tsx","component/navigation/ToggleButton.tsx","component/pages/masterdata/MasterDataList.tsx","component/pages/masterdata/MasterDataManagement.tsx","component/pages/masterdata/MasterDataMain.tsx","component/pages/home/HomeMain.tsx","component/pages/settings/SettingsMain.tsx","models/User.ts","component/container/Card.tsx","component/pages/settings/settingHelper.tsx","component/pages/settings/BaseUpdateProfilePage.tsx","component/pages/settings/UserProfile.tsx","component/pages/settings/EditApplicationProfile.tsx","component/pages/home/AboutUs.tsx","component/pages/transaction/TransactionMain.tsx","models/Product.ts","models/ProductFlow.ts","models/Transaction.ts","utils/CollectionUtil.tsx","component/pages/transaction/BaseTransactionPage.tsx","component/pages/transaction/ProductFormV2.tsx","component/pages/transaction/supply/SupplierFormV2.tsx","component/pages/transaction/supply/TransactionIn.tsx","component/pages/transaction/distribution/transactionOutForms.tsx","component/alert/SimpleWarning.tsx","component/pages/transaction/distribution/CustomerFormV2.tsx","component/pages/transaction/distribution/TransactionOut.tsx","component/pages/transaction/supply/TransactionInConfirmation.tsx","component/pages/transaction/detail/PrintReceipt.tsx","component/pages/transaction/detail/TransactionDetail.tsx","component/pages/transaction/related/TransactionRelatedRecord.tsx","component/pages/transaction/distribution/TransactionOutConfirmation.tsx","component/pages/inventory/InventoryMain.tsx","component/pages/inventory/stock/ProductStockDetail.tsx","component/pages/inventory/stock/ProductStocksTable.tsx","models/Configuration.ts","component/pages/inventory/stock/ProductStocks.tsx","models/common/HeaderProps.ts","models/settings/EntityElement.ts","component/pages/inventory/StockFilter.tsx","component/pages/inventory/Report.tsx","component/pages/settings/EditInventoryConfiguration.tsx","models/stock/InventoryData.ts","component/pages/dashboard/DashboardInfo.tsx","component/pages/inventory/InventoryStatus.tsx","component/pages/dashboard/statistic/PeriodFilter.tsx","component/pages/dashboard/statistic/BarChart.tsx","component/pages/dashboard/statistic/ProductStatDetail.tsx","component/pages/dashboard/statistic/ProductStat.tsx","component/layout/ApplicationContent.tsx","models/common/Menu.ts","component/navigation/SideBar.tsx","component/layout/MainLayout.tsx","App.tsx","Root.tsx","serviceWorker.js","index.js"],"names":["initState","mainApp","undefined","inventoryData","inventoryConfig","reducer","state","action","type","payload","BaseEntity","id","createdDate","modifiedDate","nulledFields","HealthCenter","code","name","address","monthlyProductCount","ApplicationProfile","appCode","shortDescription","about","welcomingMessage","contact","website","iconUrl","pageIcon","backgroundUrl","footerIconClass","color","fontColor","loginKey","loginStatus","loginFailed","loggedUser","loginAttempt","requestId","applicationProfile","masterHealthCenter","assetsPath","result","console","debug","user","referer","refresh","setLoginKeyCookie","data","AttachmentInfo","Blob","dataUrl","axios","require","commonAjaxPostCalls","endpoint","request","Promise","resolve","reject","post","headers","commonAuthorizedHeader","then","axiosResponse","updateAccessToken","response","rawAxiosResponse","catch","e","error","commonAjaxPostCallsWithBlob","responseType","fileName","split","rawSplit","extension","length","blob","url","window","URL","createObjectURL","attachmentInfo","UserService","updateProfile","contextPath","concat","requestApplicationId","callbackSuccess","callbackError","alert","requestApplicationIdNoAuth","commonHeader","commonAjaxPublicPostCalls","this","instance","MasterDataService","managementProperties","entityPropertyMap","Map","healthCenters","getProductByCode","getByKey","getProductsByName","getRecordsByKeyLike","loadHealthCenters","entity","filter","orderBy","orderType","updateApplicationProfile","profile","updateConfiguration","config","inventoryConfiguration","setHealthCenters","getHealthCenters","set","get","req","limit","page","key","value","exacts","fieldsFilter","model","editMode","TransactionService","submitTransactionOUT","object","transaction","submitTransactionIN","getTransactionByCode","getTransactionRelatedRecord","deleteTransactionByCode","InventoryService","getAvailableProducts","productCode","location","healthcenter","getProductsInHealthCenter","adjustStocks","getInventoriesData","getProductUsage","getProductListWithUsage","filterStocks","ReportService","loadStockOpnameReport","loadMontlyReport","printTransactionReceipt","printReceiveRequestSheet","services","userService","getInstance","masterDataService","transactionService","inventoryService","reportService","rootReducer","combineReducers","appState","shopReducer","userState","userReducer","servicesState","servicesReducers","initialState","performLoginMiddleware","store","next","meta","app","responseJson","loginSuccess","log","common","newAction","Object","assign","dispatch","finally","endLoading","getLoggedUserMiddleware","param","performLogoutMiddleware","logoutSuccess","setLoggedUserMiddleware","getMessagesMiddleware","fetch","method","body","JSON","stringify","json","err","storeChatMessageLocallyMiddleware","getStore","configureStore","createStore","applyMiddleware","userMiddleware","realtimeChatMiddleware","getRequestId","getLoginKey","LOGIN_KEY","getState","getCookie","accessToken","setCookie","cookieValue","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","ca","decodeURIComponent","i","c","charAt","substring","indexOf","devMode","getElementById","rootValue","baseImageUrl","getAssetsPath","usedHost","apiAccount","performLogout","startLoading","setInventoryData","configuration","mapCommonUserStateToProps","LoaderContent","props","realtime","progress","parseInt","className","style","margin","position","zIndex","marginBottom","marginRight","role","aria-hidden","padding","marginTop","height","width","transitionDuration","disabled","Loader","timer","intervalId","update","clearInterval","setState","endMessage","withTimer","setInterval","Component","Backdrop","backgroundColor","Footer","ref","yesButtonRef","onClick","onYes","yesOnly","noButtonRef","onNo","Header","fontClassName","title","onClose","Alert","React","createRef","isError","current","focus","headerClassName","display","tabIndex","aria-labelledby","children","doItLater","callback","intervalMs","timeout","setTimeout","clearTimeout","BaseComponent","authenticated","parentApp","updated","getInventoryData","getInventoryConfig","getMasterHealthCenter","setPageTitle","validateLoginStatus","isUserLoggedIn","backToLogin","getApplicationProfile","handleInputChange","event","target","checked","doAjax","withProgress","successCallback","errorCallback","params","scrollTop","opt","top","behavior","scrollTo","commonAjax","commonAjaxWithProgress","getLoggedUser","password","showConfirmation","showAlert","showConfirmationDanger","showAlertError","showCommonErrorAlert","message","showError","getServices","history","push","menuSet","menus","menuClass","active","showSidebar","subMenus","IState","showNavLinks","buttonToggleNavRef","toggleNavLinks","onLogout","ok","setMenu","menu","click","element","getMenus","label","href","data-toggle","data-target","aria-controls","aria-expanded","aria-label","map","isActive","activeMenuCode","String","to","setMenuNull","NavBarTop","paddingLeft","fontSize","UserIcon","src","profileImage","displayName","withRouter","connect","Spinner","innerDivs","Array","visibility","show","loading","username","Login","updateCredentialProperty","getAttribute","preventDefault","performLogin","fill","stroke","strokeWidth","cx","cy","r","onSubmit","login","onChange","PasswordField","placeholder","required","UsernameField","autoFocus","BasePage","authentiacted","index","uniqueId","string","getUTCMilliseconds","toString","greeting","hour","getHours","beautifyNominal","val","replace","FieldType","twoDigits","DashboardMain","AnchorButton","btnClassName","attributes","iconClassName","Modal","hideModal","showModal","toggleable","footerContent","showFooter","Filter","contains","beginsWith","day","year","month","module","dayTo","monthTo","yearTo","maxValue","ignoreEmptyValue","filterExpDate","flag","FLAG_DEFAULT","useExistingFilterPage","FLAG_ALL","validateFieldsFilter","setOrderPropertyFromDataSet","f","dataset","setFieldsFilterValue","setFieldsFilterValueFromInput","input","EntityProperty","groupNames","entityName","alias","fieldNames","idField","detailFieldName","formInputColumn","editable","deletable","creatable","elements","fieldNameList","withProgressWhenUpdated","addElement","setOrder","properties","el","keepProperties","loop","p","record","prop","identity","getEntityElement","getHeaderLabels","header","labelName","isDate","filterable","orderable","hasTextEditorField","fieldType","FIELD_TYPE_TEXTEDITOR","EntityValues","elemnents","elementid","FIELD_TYPE_DATE","toLocaleDateString","FIELD_TYPE_DATETIME","toLocaleTimeString","FIELD_TYPE_IMAGE","imgLink","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","dangerouslySetInnerHTML","__html","FIELD_TYPE_CHECKBOX","FIELD_TYPE_FIXED_LIST","FIELD_TYPE_DYNAMIC_LIST","optionItemName","NavigationButtons","buttonIndexes","generateButtonValues","totalData","activePage","lastIndex","nextPage","previusPage","currentPage","displayed_buttons","buttonCount","Math","ceil","min","max","toBase64v2","fileInput","reader","FileReader","readAsDataURL","files","onload","onerror","BaseField","prepopulateForm","entityElement","getRequiredAttr","FormInputImage","singlePreviewData","showInputFile","changeSingleImageData","removeImage","doRemoveImage","recordToEdit","defaultValue","fullUrl","Fragment","accept","imageData","ImagePreview","FormInputImageMultiple","previewData","inputElements","setImageData","addInputElement","removeInputElement","removedIndex","doRemoveInputElement","splice","delete","trim","imageNames","imageName","isNull","isBase64","isBase64Image","startsWith","FormInputDropDown","inputList","inputListLoaded","entities","Error","loadInputList","entityReferenceClass","loadAllEntities","isNotReady","validateInputType","fieldName","recordValue","defaultInputValue","optionValueName","options","option","optionItemValue","AnchorWithIcon","tyle","fieldValue","FormInputTextEditor","contentRef","formatDoc","sCmd","sValue","oDoc","validateMode","executed","execCommand","contentEditable","setValue","innerHTML","setDocMode","bToSource","oContent","createTextNode","oPre","createElement","appendChild","all","innerText","createRange","selectNodeContents","firstChild","printDoc","setEditMode","mode","paleteCommand","anchor","commmand","clean","contentOnChange","onMouseDown","data-command","data-value","sLnk","prompt","onInput","FontSizeOption","t","selected","BackgroundColorOption","FontColorOption","FormattingList","FontList","FormInputCheckbox","MONTHS","leapMonths","regularMonths","getMonthDays","getInputReadableDate","date","getFullYear","getMonth","getDate","join","FormInputCommon","dateObj","valueAsObj","requiredAttr","FIELD_TYPE_PLAIN_LIST","plainListValues","FIELD_TYPE_TEXTAREA","step","searchValue","FormInputDropDownDynamic","inputRef","searchKey","loadItems","search","keyCode","div","onKeyDown","FormGroup","orientation","State","minute","getMinutes","second","getSeconds","hours","minutesOrSeconds","arr","InputTime","minutes","seconds","setDefaultValue","updateValue","setNow","border","sec","marginLeft","InputDateTime","timeRef","updateTime","h","m","s","setHours","setMinutes","setSeconds","setMilliseconds","updateDate","inputDate","setDate","setMonth","setFullYear","FormInputDateTime","FormInputField","multiple","formLabel","MasterDataForm","form","submit","formData","FormData","promises","hasImageField","forEach","valueAttr","objectPayload","generateRequestPayload","ajaxSubmit","rawObject","realtimeProgress","getEntityProperty","save","recordSaved","showInfo","entityProperty","editModeStr","SubmitReset","InputFields","groupedElements","counter","hasTextEditor","ei","EditDeleteAction","doDelete","recordId","getRecordId","recordDeleted","getRecordById","getById","recordLoaded","showEditForm","reload","property","DataTableHeader","headerProps","headerProp","headerName","k","minWidth","filterClass","filterOnChange","autoComplete","orderButtonOnClick","FilterDate","SortButton","data-ordertype","data-orderby","SimpleError","ExternalEditForm","link","ToggleButton","yesLabel","noLabel","MasterDataList","itemsLoaded","recordData","checkDefaultData","getRecordNumber","filterFormSubmit","setExactSearch","filterReset","showForm","showCreateForm","updateFilterPage","updateFilterLimit","printRecord","exactsSearch","resultList","onReset","overflow","number","values","parseValues","Loading","paddingTop","SubmitResetButton","MasterDataManagement","loadingEntityProperty","entityPropertyLoaded","setEntityProperty","setTitle","entityProp","generateReport","reportCreated","attachment","download","loadEntityProperty","raltime","existingEntityProperty","MasterDataMain","managementPropertiesLoaded","generalList","setSidebarMenus","sidebarMenus","loadManagamenetPages","loadManagementProperties","getCode","match","HomeMain","imageUrl","backgroundImage","SettingsMain","User","authorities","processingDate","Card","EditField","edit","toggleInput","updateProperty","PropertyInput","PropertyLabel","EditImage","BaseUpdateProfilePage","saveRecord","fieldChanged","doSaveRecord","postRecordSaved","editFields","UserProfile","updateProfileProperty","updateProfleImage","setProfileImage","actualLoggedUser","propertyName","enabled","getEditedRecord","editedUser","setLoggedUser","EditFields","EditApplicationProfile","updateImageField","setAppProfileField","appProfile","actualAppProfile","getApplicationEditedData","editedApplication","setApplicationProfile","bgUrl","AboutUs","TransactionMain","Product","description","unit","utilityTool","count","getDefaultImageUrl","ProductFlow","product","expiredDate","usedCount","stock","suitable","price","generic","referenceProductFlow","stockLocation","referencingItems","availableProductFlow","pf","Transaction","transactionDate","supplier","customer","healthCenterDestination","healthCenterLocation","productFlows","destination","productFlowCount","addProductToFlow","productFlow","addProductFlow","hasProductFlowReferenceid","setProductFlowValue","removeProductFlow","tableHeader","BaseTransactionPage","setTransaction","validateTransactionFromProps","removeAll","didMountCallback","updateTransactionGeneralField","updateProductFlow","updateTransactionDate","buttonSubmitTransaction","ProductFormV2","recordNotFound","productName","updateField","loadRecords","reset","searchRecord","recordsLoaded","recordList","setProduct","recordsNotFound","cursor","notFound","ProductDetail","SupplierFormV2","supplierName","setSupplier","SupplierDetail","selectedProduct","TransactionIn","addToCart","pathname","remove","colSpan","ProductFlowItemInput","data-index","SelectedProductDetail","HealthCenterForm","setHealthCenter","hc","DestinationInfo","healthCenterDestionation","SimpleWarning","CustomerFormV2","customerName","setCustomer","CustomerDetail","age","availableProducts","loadingProducts","TransactionOut","updateDestination","healthCentersLoaded","force","availableProduct","loadAvailableProducts","availableProductsLoaded","availableProductsNotLoaded","warn","fromReference","updateSelectedHealthCenter","setHealthCenterDestination","selecteds","healthCenter","alreadyAdded","TransactionInConfirmation","back","onSuccess","confirm","ProductFlowRow","PrintReceipt","receiptCreated","printReceipt","transactionCode","dataNotFound","TransactionDetail","recordNotLoaded","loadData","recordNotDeleted","deleteRecord","TransactionData","isTransOut","toLocaleString","TransactionRelatedRecord","item","refItemsLv1","transactionDateTime","rfItemlv1","refItemsLv2","rfItemlv2","r2","TransactionOutConfirmation","InventoryMain","ProductStockDetail","ProductImage","ProductStocksTable","stocks","productStocks","startingNumber","producFlows","Configuration","expiredWarningDays","leadTime","cycleTime","totalItems","selectedHealthCenter","ProductStocks","updateFilterExpDate","getHtmlInputElement","selectedDate","diffDay","a","b","utc1","UTC","utc2","floor","getDiffDays","loadProducts","productLoaded","loadProductsAt","productLoadingError","doLoadProduct","getLocations","allLocObject","locations","stateLocations","updateLocation","loadHealthCenter","getDisplayedRecordOptions","range","setIgnoreEmpty","setFilterExpDate","updateLimit","selectedLocation","toggle","ExpDateFilter","expDateFilterWithin","days","addDays","expDayLabel","abs","SubmitBtn","LocationSelect","HeaderProps","fromEntityProperty","EntityElement","ignoreBaseField","entityReferenceName","detailFields","defaultValues","additionalMap","FIELD_TYPE_TEXT","isList","entityPropertyNotLoaded","items","StockFilter","adjustProperty","getHeaderProps","bgClass","expDate","now","period","Report","updatePeriod","loadStockOpname","selectedMonthName","ReportButton","EditInventoryConfiguration","actualConfig","loadConfiguration","configLoaded","setProperty","InventoryData","inventories","totalItemsSum","totalExpiredSum","totalWillExpiredSum","periodicReviewResult","getLabel","getAmount","toDataSets","list","res","DashboardInfo","inventoriesDataLoaded","loadInventoriesData","totalWillExpired","totalExpired","totalSafe","InventoryStatus","totalSaveSum","inventory","safe","expiredItems","willExpiredItems","PeriodFilter","getDayToArray","getDayFromArray","render","withDay","fullPeriod","hoveredIndex","DashboardBarChart","middleYAxisValue","bottomYAxisValue","offsetX","offsetY","baseYIndex","baseHeight","lineWidth","maxAmount","cashflows","updateSizes","dataSet","round","hover","unHover","minHeight","overflowX","paddingBottom","onMouseOut","version","baseProfile","xmlns","percentage","labelY","labelX","transform","hovered","onMouseOver","x","y","textAnchor","inventoriesData","selectedItem","ProductStatDetail","updateFilter","setFilter","usageDataLoaded","selectInventory","UsageDetail","UsageChart","PeriodicReviewResultContent","review","safetyStock","targetStockLevel","orderSize","ProductStat","loadRecordsAtPage","updateFieldsFilter","products","startNumber","ProductList","ApplicationContent","exact","path","Dashboard","Setting","Inventory","Menu","pathVariables","defaultMenuIconClassName","getIconClassName","SideBar","isSidebarActive","parentMenu","pathName","addEventListener","handleScroll","removeEventListener","srcElement","brand","menuClassName","Brand","textAlign","textDecoration","MainLayout","currentPathName","setCurrentMenu","pathRaw","firstPath","extractMenuPath","getMenuByMenuPath","getSubMenus","loadingPercentage","mainAppUpdated","appIdStatus","errorRequestAppId","App","loadings","alertTitle","alertBody","alertIsYesOnly","alertIsError","alertOnYesCallback","alertOnCancelCallback","clientRef","alertCallback","onOk","requestAppId","setRequestId","retryRequestAppId","errorRequestingAppId","smoothEndLoading","setMainApp","incrementLoadings","decrementLoadings","msg","percentageFloat","yesCallback","noCallback","dismissAlert","querySelector","setAttribute","head","updateFavicon","topics","onMessage","handleMessage","client","text","ret","loggedIn","actions","Root","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4b1eca7b.chunk.js","sourcesContent":["import * as types from './types'\r\n\r\nexport const initState = { \r\n    mainApp: undefined,\r\n    inventoryData: undefined,\r\n    inventoryConfig: undefined,\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case types.SET_MAIN_APP:\r\n              \r\n            return { ...state, mainApp: action.payload }; \r\n        case types.SET_INVENTORY_DATA:\r\n\r\n        return {...state, inventoryData: action.payload.inventoryData, inventoryConfig: action.payload.inventoryConfig}\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","/**\r\n * \r\n */\r\n  \r\nexport const DO_LOGIN = \"do_login\";\r\nexport const DO_LOGOUT = \"do_logout\";   \r\nexport const GET_PRODUCT_SALES_DETAIL = \"get_product_Sales_detail\"; \r\nexport const SET_REQUEST_ID = \"SET_REQUEST_ID\"; \r\nexport const STORE_MESSAGE = \"store_message\";\r\nexport const GET_MESSAGE = \"GET_MESSAGE\";\r\nexport const SET_MAIN_APP = \"SET_MAIN_APP\"; \r\nexport const GET_ENTITY_PROPERTY = \"get_entity_config\";\r\nexport const GET_MANAGEMENT_MENUS = \"GET_MANAGEMENT_MENUS\";   \r\nexport const REFRESH_LOGIN = \"refresh_login\";\r\nexport const GET_LOGGED_USER = \"get_logged_user\";\r\nexport const SET_LOGGED_USER = \"set_logged_user\";\r\nexport const SET_APPLICATION_PROFILE = \"SET_APPLICATION_PROFILE\";\r\nexport const SET_INVENTORY_DATA = \"SET_INVENTORY_DATA\";","\nexport default class BaseEntity{\n\tid?:number;\n\tcreatedDate?:Date;\n\tmodifiedDate?:Date;\n\tnulledFields?:string[] | undefined;\n\t \n\n}\n","import BaseEntity from './BaseEntity';\n\nexport default class HealthCenter extends BaseEntity{\n\tcode?:string;\n\tname?:string;\n\taddress?:string;\n\tmonthlyProductCount?:number;\n\n}\n","import BaseEntity from './BaseEntity';\n\nexport default class ApplicationProfile extends BaseEntity{\n\tname?:string;\n\tappCode?:string;\n\tshortDescription?:string;\n\tabout?:string;\n\twelcomingMessage?:string;\n\taddress?:string;\n\tcontact?:string;\n\twebsite?:string;\n\ticonUrl?:string;\n\tpageIcon?:string;\n\tbackgroundUrl?:string;\n\tfooterIconClass?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n}\n","import * as types from './types'\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport { setLoginKeyCookie } from './../middlewares/Common';\r\n\r\nexport const initState = {\r\n    loginKey: null,\r\n    loginStatus: false,\r\n    loginFailed: false,\r\n    loggedUser: null,\r\n    loginAttempt: false,\r\n    requestId: null,\r\n    applicationProfile: new ApplicationProfile(),\r\n    masterHealthCenter: new HealthCenter(),\r\n    assetsPath: \"/\",\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n   \r\n    let result = {};\r\n   \r\n    switch (action.type) {\r\n        case types.SET_REQUEST_ID: \r\n            console.debug(\"USER REDUCER:REQUEST_ID\", action.payload.requestId);\r\n            result = {\r\n                ...state, requestId: action.payload.requestId,\r\n                masterHealthCenter: action.payload.masterHealthCenter??{},\r\n                applicationProfile: action.payload.applicationProfile ?? {},\r\n                assetsPath: action.payload.applicationProfile.assetsPath\r\n            };\r\n            \r\n            if (action.payload.loginStatus == true) {\r\n                result.loggedUser = action.payload.user;\r\n                result.loginStatus = true;\r\n            } else {\r\n                result.loginStatus = false;\r\n                result.loggedUser = null;\r\n            }\r\n\r\n            console.debug(\"result\");\r\n            console.debug(\"action.payload.requestId: \",action.payload.requestId); \r\n            console.debug(\"REQUEST_ID result.loginStatus:\", result.loginStatus);\r\n            if (action.payload.referer) {\r\n                action.payload.referer.refresh();\r\n            }\r\n\r\n            return result;\r\n        case types.DO_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginAttempt: true,\r\n                loginStatus: action.payload.loginStatus,\r\n                loginKey: action.payload.loginKey,\r\n                loginFailed: action.payload.loginStatus == false,\r\n                loggedUser: action.payload.loggedUser\r\n            };\r\n           \r\n\r\n            return result;\r\n        case types.DO_LOGOUT:\r\n            result = {\r\n                ...state,\r\n                loginStatus: false,\r\n                loggedUser: null\r\n            }; \r\n            setLoginKeyCookie(null);\r\n            return result;\r\n        case types.REFRESH_LOGIN:\r\n            result = {\r\n                ...state,\r\n                loginStatus: action.payload.loginStatus,\r\n                loggedUser: action.payload.loggedUser, \r\n            };\r\n            return result;\r\n        case types.GET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.data\r\n            };\r\n            return result;\r\n        case types.SET_LOGGED_USER:\r\n            result = {\r\n                ...state, loggedUser: action.payload.user\r\n            };\r\n            return result;\r\n        case types.SET_APPLICATION_PROFILE:\r\n            result = {\r\n                ...state, applicationProfile: action.payload.applicationProfile\r\n            };\r\n            return result;\r\n        default:\r\n            return { ...state };\r\n\r\n    }\r\n}\r\n\r\nexport default reducer;","\r\nexport default class AttachmentInfo {\r\n    name:string = \"\";\r\n    data:Blob = new Blob();\r\n    dataUrl:string = \"\";\r\n}","\r\nimport { commonAuthorizedHeader, commonHeader } from '../middlewares/Common';\r\nimport WebResponse from '../models/common/WebResponse';\r\nimport { updateAccessToken } from './../middlewares/Common';\r\nimport AttachmentInfo from '../models/common/AttachmentInfo';\r\n\r\nconst axios = require('axios');\r\n\r\nexport const rejectedPromise = (message: any) => {\r\n    return new Promise((res, rej) => {\r\n        rej(message);\r\n    });\r\n}\r\n\r\nexport const emptyPromise = (defaultResponse: any) => new Promise(function (res, rej) {\r\n    res(defaultResponse);\r\n});\r\n\r\nexport const commonAjaxPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}\r\n\r\n\r\nexport const commonAjaxPublicPostCalls = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<WebResponse>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            headers: commonHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                \r\n                const response: WebResponse = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                if (response.code == \"00\") {\r\n                    resolve(response);\r\n                }\r\n                else { reject(response); }\r\n            })\r\n            .catch((e: any) => { \r\n                \r\n                console.error(e); \r\n                reject(e); \r\n            });\r\n    })\r\n}\r\n\r\nexport const commonAjaxPostCallsWithBlob = (endpoint: string, payload?: any) => {\r\n    const request = payload == null ? {} : payload;\r\n    return new Promise<AttachmentInfo>(function (resolve, reject) {\r\n        axios.post(endpoint, request, {\r\n            responseType: 'blob' ,\r\n            headers: commonAuthorizedHeader()\r\n        })\r\n            .then(axiosResponse => {\r\n                updateAccessToken(axiosResponse);\r\n                \r\n                const response: any = axiosResponse.data;\r\n                response.rawAxiosResponse = axiosResponse;\r\n                let contentDisposition = axiosResponse.headers[\"content-disposition\"];\r\n                let fileName = contentDisposition.split(\"filename=\")[1];\r\n                let rawSplit = fileName.split(\".\");\r\n                let extension = rawSplit[rawSplit.length - 1];\r\n                let blob = new Blob([response], { type: extension });\r\n                let url = window.URL.createObjectURL(blob);\r\n                // let a = document.createElement(\"a\");\r\n\r\n                // document.body.appendChild(a);\r\n\r\n                // a.href = url;\r\n                // a.style.display = 'none';\r\n                // a.download = fileName;\r\n                // a.click();\r\n\r\n                // window.URL.revokeObjectURL(url);\r\n                const attachmentInfo:AttachmentInfo = new AttachmentInfo();\r\n                attachmentInfo.name = fileName;\r\n                attachmentInfo.data = blob;\r\n                attachmentInfo.dataUrl = url;\r\n                resolve(attachmentInfo);\r\n                \r\n            })\r\n            .catch((e: any) => { console.error(e); reject(e); });\r\n    })\r\n}","\r\nimport User from './../models/User';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPublicPostCalls } from './Promises';\r\nimport { updateAccessToken } from '../middlewares/Common';\r\nimport WebResponse from '../models/common/WebResponse';\r\nexport default class UserService {\r\n    private static instance?: UserService;\r\n\r\n    static getInstance(): UserService {\r\n        if (this.instance == null) {\r\n            this.instance = new UserService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    updateProfile = (user: User) => {\r\n\r\n        const request: WebRequest = {\r\n            user: user\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/account/updateprofile\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    requestApplicationId = (callbackSuccess: (response: WebResponse) => any, callbackError: () => any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            const response = data.rawAxiosResponse;\r\n            updateAccessToken(response);\r\n            console.debug(\"response header:\", response.headers['access-token']);\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            console.error(\"ERROR requestApplicationId: \", e);\r\n            callbackError();\r\n        })\r\n\r\n    }\r\n    requestApplicationIdNoAuth = (callbackSuccess: (response: WebResponse) => any, callbackError: () => any) => {\r\n        const url = contextPath() + \"api/public/requestid\";\r\n        commonAjaxPublicPostCalls(url, {}).then(data => {\r\n            if (data.code != \"00\") {\r\n                alert(\"Error requesting app ID\");\r\n                return;\r\n            }\r\n            callbackSuccess(data);\r\n        }).catch(e => {\r\n            callbackError();\r\n            console.error(\"ERROR requestApplicationIdNoAuth: \", e);\r\n            //   alert(\"Error Occured, please reload OR try again\");\r\n        })\r\n\r\n    }\r\n\r\n}","\r\nimport Filter from '../models/common/Filter';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from './../constant/Url';\r\nimport { commonAjaxPostCalls, commonAjaxPostCallsWithBlob } from './Promises';\r\nimport BaseEntity from './../models/BaseEntity';\r\nimport ManagementProperty from '../models/ManagementProperty';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Configuration from './../models/Configuration';\r\n\r\nexport default class MasterDataService {\r\n  \r\n    managementProperties: ManagementProperty[] = [];\r\n    private entityPropertyMap: Map<string, EntityProperty> = new Map();\r\n    private healthCenters: HealthCenter[] = [];\r\n    private static instance?: MasterDataService;\r\n\r\n    static getInstance(): MasterDataService {\r\n        if (this.instance == null) {\r\n            this.instance = new MasterDataService();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    getProductByCode = (code: string) => {\r\n        return this.getByKey('product', 'code', code);\r\n    }\r\n    getProductsByName = (name:string) => {\r\n        return this.getRecordsByKeyLike(\"product\", \"name\", name);\r\n    }\r\n    setEntityProperty(code: string, data?: EntityProperty) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        this.entityPropertyMap.set(code, data);\r\n    }\r\n    getEntityProperty(code?: string): EntityProperty | undefined {\r\n        if (code == undefined) {\r\n            return undefined;\r\n        }\r\n        return this.entityPropertyMap.get(code);\r\n    }\r\n\r\n    loadManagementProperties(req?: any) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/managementpages\");\r\n        return commonAjaxPostCalls(endpoint, {});\r\n\r\n    }\r\n    loadEntityProperty(code: string) {\r\n        console.debug(\"Load entity prop: \", code);\r\n        const request: WebRequest = {\r\n            entity: code\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/configv2\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadHealthCenters = () => {\r\n        const request: WebRequest = {\r\n            entity: 'healthcenter', filter: { orderBy: 'name', orderType: 'asc' }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    loadItems(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    loadAllEntities(code: string) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n\r\n    }\r\n    getByKey(entity: string, key: string, value: any) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { [key]: value }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getRecordsByKeyLike(entity: string, key: string, value: any) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                // exacts: true,\r\n                limit: 10,\r\n                page: 0,\r\n                fieldsFilter: { [key]: value }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getById(entity: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: entity,\r\n            filter: {\r\n                exacts: true,\r\n                limit: 1,\r\n                page: 0,\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getBy(code: string, fieldsFilter: {}, limit = 1) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                exacts: true,\r\n                limit: limit,\r\n                page: 0,\r\n                fieldsFilter: fieldsFilter\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/get\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    delete(code: string, id: number) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                fieldsFilter: { 'id': id }\r\n            }\r\n        }\r\n        const endpoint: string = contextPath().concat(\"api/app/entity/delete\");\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    save(code: string, model: BaseEntity, editMode: boolean) {\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            [code]: model\r\n        }\r\n        let endpoint: string;\r\n        if (editMode) {\r\n            endpoint = contextPath().concat(\"api/app/entity/update\");\r\n        } else {\r\n            endpoint = contextPath().concat(\"api/app/entity/add\");\r\n        }\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    updateApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n        const request: WebRequest = {\r\n            profile: applicationProfile\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateprofile\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n    updateConfiguration = (config:Configuration) => {\r\n        const request: WebRequest = {\r\n           inventoryConfiguration: config\r\n        }\r\n        const endpoint = contextPath().concat(\"api/app/setting/updateconfig\");\r\n        return commonAjaxPostCalls(endpoint, request)\r\n    }\r\n\r\n    setHealthCenters = (healthCenters:HealthCenter[]) => {\r\n        this.healthCenters = healthCenters;\r\n    }\r\n    getHealthCenters = () :HealthCenter[] => {\r\n        return this.healthCenters;\r\n    }\r\n\r\n    generateReport(request: WebRequest) {\r\n        const endpoint: string = contextPath().concat(\"api/app/report/records\");\r\n        return commonAjaxPostCallsWithBlob(endpoint, request);\r\n\r\n    }\r\n}","\r\nimport User from '../models/User';\r\nimport WebRequest from '../models/common/WebRequest';\r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises';\r\nimport Transaction from './../models/Transaction';\r\nexport default class TransactionService {\r\n    \r\n    \r\n    private static instance?: TransactionService;\r\n\r\n    static getInstance(): TransactionService {\r\n        if (this.instance == null) {\r\n            this.instance = new TransactionService();\r\n        }\r\n        return this.instance;\r\n    }\r\n    submitTransactionOUT = (object: Transaction) => {\r\n\r\n        console.debug(\"object: \", object);\r\n         \r\n        const request: WebRequest = {\r\n            transaction: object\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/transaction/transactionout\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    submitTransactionIN = (object: Transaction) => {\r\n\r\n        const request: WebRequest = {\r\n            transaction: object\r\n        }\r\n\r\n        const endpoint = contextPath().concat(\"api/app/transaction/transactionin\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n\r\n    getTransactionByCode = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/gettransaction/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    getTransactionRelatedRecord = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/relatedrecord/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n    deleteTransactionByCode = (code: string) => {\r\n        const endpoint = contextPath().concat(\"api/app/transaction/deleterecord/\"+code)\r\n        return commonAjaxPostCalls(endpoint, {});\r\n    }\r\n\r\n}"," \r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCalls } from './Promises'; \r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Filter from '../models/common/Filter';\r\nimport WebRequest from '../models/common/WebRequest';\r\nexport default class InventoryService {\r\n    getAvailableProducts = (productCode: string, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/availableproducts/\"+productCode)\r\n        return commonAjaxPostCalls(endpoint, {\r\n            healthcenter: location\r\n        });\r\n    }\r\n\r\n    getProductsInHealthCenter = (filter:Filter, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getproducts\")\r\n        return commonAjaxPostCalls(endpoint, {\r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n    adjustStocks = () => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/recalculatestock\")\r\n        return commonAjaxPostCalls(endpoint, {  });\r\n    }\r\n    getInventoriesData = () => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getinventoriesdata\")\r\n        return commonAjaxPostCalls(endpoint, {  });\r\n    }\r\n    getProductUsage = (request: WebRequest) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getproductusage\")\r\n        return commonAjaxPostCalls(endpoint, request);\r\n    }\r\n    getProductListWithUsage = (filter: Filter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/getproductswithusage\")\r\n        return commonAjaxPostCalls(endpoint, {filter:filter});\r\n    }\r\n    filterStocks = (filter: Filter) => {\r\n        const endpoint = contextPath().concat(\"api/app/inventory/filter\")\r\n        return commonAjaxPostCalls(endpoint, {filter:filter});\r\n    }\r\n    private static instance?: InventoryService;\r\n\r\n    static getInstance(): InventoryService {\r\n        if (this.instance == null) {\r\n            this.instance = new InventoryService();\r\n        }\r\n        return this.instance;\r\n    }\r\n     \r\n\r\n}"," \r\nimport { contextPath } from '../constant/Url';\r\nimport { commonAjaxPostCallsWithBlob } from './Promises'; \r\nimport HealthCenter from './../models/HealthCenter';\r\nimport Filter from '../models/common/Filter';\r\nexport default class ReportService {\r\n    loadStockOpnameReport = (filter:Filter, location:HealthCenter) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/stockopname\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, {\r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n    loadMontlyReport = (filter:Filter ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/monthly\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, { \r\n            filter: filter\r\n        });\r\n    }\r\n    printTransactionReceipt = (code:string ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/transactionreceipt/\"+code)\r\n        return commonAjaxPostCallsWithBlob(endpoint, {  });\r\n    }\r\n    printReceiveRequestSheet = (filter:Filter  , location:HealthCenter ) => {\r\n        const endpoint = contextPath().concat(\"api/app/report/receiverequestsheet\")\r\n        return commonAjaxPostCallsWithBlob(endpoint, { \r\n            healthcenter: location,\r\n            filter: filter\r\n        });\r\n    }\r\n\r\n   \r\n    private static instance?: ReportService;\r\n\r\n    static getInstance(): ReportService {\r\n        if (this.instance == null) {\r\n            this.instance = new ReportService();\r\n        }\r\n        return this.instance;\r\n    }\r\n     \r\n\r\n}"," \r\nimport Services from './../services/Services'; \r\n\r\nexport const initState: { services: Services } = {\r\n    services: new Services()\r\n\r\n};\r\n\r\nexport const reducer = (state = initState, action) => {\r\n\r\n    return state;\r\n}\r\n\r\nexport default reducer;","\r\nimport UserService from './UserService';\r\nimport MasterDataService from './MasterDataService';\r\nimport TransactionService from './TransactionService';\r\nimport InventoryService from './InventoryService';\r\nimport ReportService from './ReportService';\r\nexport default class Services {\r\n    userService: UserService = UserService.getInstance();\r\n    masterDataService: MasterDataService = MasterDataService.getInstance();\r\n    transactionService: TransactionService = TransactionService.getInstance();\r\n    inventoryService: InventoryService = InventoryService.getInstance();\r\n    reportService: ReportService = ReportService.getInstance();\r\n}","import * as shopReducer from \"./appReducer\"\r\nimport * as userReducer from \"./userReducer\" \r\nimport  * as servicesReducers from './servicesReducer';\r\nimport { combineReducers } from \"redux\";\r\n\r\nexport const rootReducer = combineReducers(\r\n    {\r\n        appState: shopReducer.reducer,\r\n        userState: userReducer.reducer, \r\n        servicesState: servicesReducers.reducer\r\n    }\r\n);\r\n\r\nexport const initialState:any = {\r\n    appState: shopReducer.initState,\r\n    userState: userReducer.initState, \r\n    servicesState: servicesReducers.initState\r\n}\r\n\r\nexport default rootReducer;","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\nconst axios = require('axios');\r\nexport const performLoginMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGIN) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n    axios.post(action.meta.url, {}, {\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\r\n    }).then(response => {\r\n        const responseJson = response.data;\r\n        let loginKey: string = \"\";\r\n        let loginSuccess: boolean = false;\r\n\r\n        if (responseJson.code != null && responseJson.code == \"00\") {\r\n            loginKey = response.headers['access-token'];\r\n            console.log(\"api_token: \", loginKey);\r\n            loginSuccess = true;\r\n        }\r\n        common.updateAccessToken(response);\r\n        let newAction = Object.assign({}, action, {\r\n            payload: {\r\n                loginStatus: loginSuccess,\r\n                loginKey: loginKey,\r\n                loggedUser: responseJson.user\r\n            }\r\n        });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log)\r\n        .finally(() => { app.endLoading(); });\r\n\r\n}\r\n \r\nexport const getLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_LOGGED_USER) { return next(action); }\r\n\r\n    let headers = common.commonAuthorizedHeader();\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: headers\r\n    }).then(response => {\r\n        const data = response.data;\r\n\r\n        if (!data) {\r\n            alert(\"Error performing request\");\r\n            return;\r\n        }\r\n\r\n        let newAction = Object.assign({}, action, { payload: { data } });\r\n        delete newAction.meta;\r\n        store.dispatch(newAction);\r\n    })\r\n        .catch(console.log).finally(param => {\r\n            action.meta.app.endLoading();\r\n            action.meta.app.refresh();\r\n        });\r\n}\r\n\r\n\r\nexport const performLogoutMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.DO_LOGOUT) {\r\n        return next(action);\r\n    }\r\n    const app = action.meta.app;\r\n\r\n    axios.post(action.meta.url, (action.payload), {\r\n        headers: common.commonAuthorizedHeader()\r\n    })\r\n        .then(response => {\r\n            const responseJson = response.data;\r\n            let logoutSuccess = false;\r\n            if (responseJson.code == \"00\") {\r\n                logoutSuccess = true;\r\n            } else {\r\n                alert(\"Logout Failed\");\r\n            }\r\n\r\n            let newAction = Object.assign({}, action, {\r\n                payload: {\r\n                    loginStatus: !logoutSuccess\r\n                }\r\n            });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(console.log).finally(param => app.endLoading());\r\n}\r\n\r\nexport const setLoggedUserMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.SET_LOGGED_USER) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n}","import * as common from './Common'\r\nimport * as types from '../redux/types'\r\n\r\nconst POST_METHOD = \"post\"; \r\n\r\nexport const getMessagesMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.GET_MESSAGE) { return next(action); }\r\n    fetch(action.meta.url, {\r\n        method: POST_METHOD, body: JSON.stringify(action.payload),\r\n        headers: common.commonAuthorizedHeader()\r\n    }).then(response => response.json())\r\n        .then(data => {\r\n            console.debug(\"sendChatMessageMiddleware Response:\", data);\r\n            let newAction = Object.assign({}, action, { payload: data });\r\n            delete newAction.meta;\r\n            store.dispatch(newAction);\r\n        })\r\n        .catch(err => console.log(err)).finally(param => action.meta.app.endLoading());\r\n}\r\n \r\nexport const storeChatMessageLocallyMiddleware = store => next => action => {\r\n    if (!action.meta || action.meta.type !== types.STORE_MESSAGE) { return next(action); }\r\n    let newAction = Object.assign({}, action, { payload: action.payload });\r\n    delete newAction.meta;\r\n    store.dispatch(newAction);\r\n} \r\n\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { initialState, rootReducer } from './reducers' \r\nimport * as userMiddleware from '../middlewares/UserMiddleware' \r\nimport * as realtimeChatMiddleware from '../middlewares/RealtimeChatMiddleware' \r\n\r\nlet store = null;\r\nexport const getStore = () => {\r\n    return store;\r\n}\r\nexport const configureStore = () => {\r\n    store = createStore(\r\n        rootReducer, initialState,\r\n        applyMiddleware(   \r\n\r\n            //user related\r\n            userMiddleware.performLoginMiddleware,\r\n            userMiddleware.performLogoutMiddleware,  \r\n            userMiddleware.getLoggedUserMiddleware, \r\n            userMiddleware.setLoggedUserMiddleware,\r\n \r\n\r\n            /*realtime chat*/\r\n            realtimeChatMiddleware.storeChatMessageLocallyMiddleware,\r\n            realtimeChatMiddleware.getMessagesMiddleware,\r\n\r\n        )\r\n    );\r\n\r\n    return store;\r\n}\r\n   \r\n\r\nexport default configureStore;","import {  getStore } from '../redux/configureStore';\r\nexport const commonAuthorizedHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(),//'localStorage.getItem(\"requestId\")',\r\n        'Authorization': 'Bearer '+getLoginKey()\r\n    }\r\n};\r\nexport const commonHeader = () => {\r\n    return {\r\n        'Content-Type': 'application/json',\r\n        'requestId': getRequestId(), \r\n    }\r\n};\r\n\r\nconst LOGIN_KEY:string = \"medical-inventory-login-key\";\r\n \r\nexport const getAssetsPath = () :string => {\r\n    const store = getStore(); \r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.assetsPath;\r\n}\r\n\r\nexport const getRequestId = () :string => {\r\n    const store = getStore();\r\n    if (null == store) return \"\";\r\n    const state = store.getState();\r\n    return state.userState.requestId;\r\n}\r\nexport const getLoginKey = () => {\r\n    return getCookie(LOGIN_KEY);\r\n}\r\n\r\nexport const updateAccessToken = (axiosResponse) => {\r\n    if (axiosResponse && axiosResponse.headers && axiosResponse.headers['access-token']) {\r\n        const accessToken = axiosResponse.headers['access-token'];\r\n        // console.debug(\"update access token: \", accessToken);\r\n        setCookie(LOGIN_KEY, accessToken);\r\n    }\r\n}\r\nexport const setLoginKeyCookie = (cookieValue:any) => {\r\n    setCookie(LOGIN_KEY, cookieValue);\r\n}\r\nexport const setCookie = function (cname, cvalue, exdays=1) {\r\n    var d = new Date();\r\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\r\n    var expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n}\r\nexport const getCookie = function (cname) {\r\n    var name = cname + \"=\";\r\n    var decodedCookie = decodeURIComponent(document.cookie);\r\n    var ca = decodedCookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0) == ' ') {\r\n            c = c.substring(1);\r\n        }\r\n        if (c.indexOf(name) == 0) {\r\n            return c.substring(name.length, c.length);\r\n        }\r\n    }\r\n    return \"\";\r\n}","import { getAssetsPath } from \"../middlewares/Common\";\r\n\r\nconst devMode = \r\n    document.getElementById(\"rootPath\").value == \"${contextPath}\" || \r\n    document.getElementById(\"rootPath\").value == \"\";\r\nconst rootValue = devMode ?\r\n     \"/universal-good-shop/\" : document.getElementById(\"rootPath\").value;\r\n\r\nexport const contextPath = function(){\r\n    const contextPath = devMode? \"http://localhost:8080\".concat(rootValue):rootValue;\r\n    //console.debug(\"contextPath: \",contextPath,document.getElementById(\"rootPath\").value);\r\n    return contextPath;\r\n}\r\n\r\n// export const baseImageUrl() = contextPath()+\"assets/images/\"; \r\n// export const baseImageUrl() = \"https://developmentmode.000webhostapp.com/uploaded_storage/\"; \r\n// export const baseImageUrl() = \"http://localhost/storage/images/\"; \r\nexport const baseImageUrl = () => { return getAssetsPath()+ \"images/\"}; \r\n// export const baseImageUrl() = contextPath()+\"WebAsset/Shop1/Images/\"; \r\n\r\nexport const POST = \"post\";\r\n","import * as types from './types'\r\nimport * as url from '../constant/Url'\r\nimport { contextPath } from '../constant/Url'; \r\nimport User from './../models/User';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport InventoryData from '../models/stock/InventoryData';\r\nimport WebResponse from '../models/common/WebResponse';\r\n\r\nconst usedHost = url.contextPath();\r\nconst apiBaseUrl = usedHost + \"api/public/\"\r\nconst apiEntityBaseUrl = usedHost + \"api/app/entity/\"\r\nconst apiAccount = usedHost + \"api/app/account/\"\r\nconst apiAdmin = usedHost + \"api/app/admin/\"    \r\n\r\nexport const getEntityProperty = (entityName, app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_ENTITY_PROPERTY,\r\n        payload: {\r\n            entity: entityName\r\n        },\r\n        meta: {\r\n            type: types.GET_ENTITY_PROPERTY,\r\n            url: apiEntityBaseUrl.concat(\"config\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n}\r\n\r\n\r\nexport const getManagementMenus = (app) => {\r\n    app.startLoading();\r\n    let requested = {\r\n        type: types.GET_MANAGEMENT_MENUS,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MANAGEMENT_MENUS,\r\n            url: apiEntityBaseUrl.concat(\"managementpages\"),\r\n            app: app,\r\n        }\r\n    };\r\n    return requested;\r\n} \r\n\r\nexport const getMessageList = (app) => {\r\n    app.startLoading();\r\n    return {\r\n        type: types.GET_MESSAGE,\r\n        payload: {},\r\n        meta: {\r\n            type: types.GET_MESSAGE, app: app,\r\n            url: apiAdmin.concat(\"getmessages\")\r\n        }\r\n    };\r\n}\r\n\r\nexport const storeMessageLocally = (messages) => {\r\n\r\n    return {\r\n        type: types.STORE_MESSAGE,\r\n        payload: {\r\n            entities: messages\r\n        },\r\n        meta: {\r\n            type: types.STORE_MESSAGE,\r\n        }\r\n    };\r\n}\r\n    \r\n\r\nexport const performLogout = (app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGOUT,\r\n        payload: {},\r\n        meta: { app: app, type: types.DO_LOGOUT, url: apiAccount.concat(\"logout\") }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const performLogin = (username, password, app) => {\r\n    app.startLoading();\r\n    let loginRequest = {\r\n        type: types.DO_LOGIN,\r\n        payload: {},\r\n        meta: {\r\n            type: types.DO_LOGIN, url: contextPath().concat(\"login?username=\" + username + \"&password=\" +\r\n                password + \"&transport_type=rest\"), app: app\r\n        }\r\n    };\r\n    return loginRequest;\r\n}\r\n\r\nexport const getLoggedUser = (app) => {\r\n    app.startLoading();\r\n    let request = {\r\n        type: types.GET_LOGGED_USER,\r\n        payload: {},\r\n        meta: { type: types.GET_LOGGED_USER, url: apiAccount.concat(\"user\"), app: app }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setLoggedUser = (user: User) => {\r\n\r\n    let request = {\r\n        type: types.SET_LOGGED_USER,\r\n        payload: { user: user },\r\n        meta: { type: types.SET_LOGGED_USER }\r\n    };\r\n    return request;\r\n}\r\n\r\nexport const setApplicationProfile = (applicationProfile: ApplicationProfile) => {\r\n\r\n    let request = {\r\n        type: types.SET_APPLICATION_PROFILE,\r\n        payload: { applicationProfile: applicationProfile },\r\n        meta: { type: types.SET_APPLICATION_PROFILE }\r\n    };\r\n    return request;\r\n}\r\n \r\nexport const  setMainApp = (mainApp:any) => ({\r\n    type: types.SET_MAIN_APP,\r\n    payload: mainApp,\r\n    meta: { type: types.SET_MAIN_APP }\r\n})\r\n \r\nexport const  setInventoryData = (payload: WebResponse) => ({\r\n    type: types.SET_INVENTORY_DATA,\r\n    payload: {inventoryData:payload.inventoryData, inventoryConfig: payload.configuration},\r\n    meta: { type: types.SET_INVENTORY_DATA }\r\n})\r\n\r\nexport const setRequestId = (data:WebResponse, app) => {\r\n   \r\n    const ret= {\r\n        type: types.SET_REQUEST_ID,\r\n        payload: { loginStatus: data.loggedIn, referer:app, ...data },\r\n        meta: {\r\n            type: types.SET_REQUEST_ID, \r\n        }\r\n    };\r\n    console.debug(\"setRequestId: \", ret);\r\n    return ret;\r\n}\r\n\r\n","\r\nexport const mapCommonUserStateToProps = (state) => {\r\n    return {\r\n        applicationProfile: state.userState.applicationProfile,\r\n        masterHealthCenter: state.userState.masterHealthCenter,\r\n        loggedUser: state.userState.loggedUser,\r\n        loginStatus: state.userState.loginStatus,\r\n        requestId: state.userState.requestId, \r\n        services: state.servicesState.services,\r\n\r\n        //app\r\n        mainApp: state.appState.mainApp,\r\n        inventoryData: state.appState.inventoryData,\r\n        inventoryConfig: state.appState.inventoryConfig,\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport './Loader.css'\r\n\r\nclass Loader extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            timer: 130,\r\n            intervalId: 0\r\n        }\r\n        this.update = () => {\r\n            if (this.state.timer < 0) {\r\n                clearInterval(this.state.intervalId);\r\n            }\r\n            console.log(\"tick\")\r\n            this.setState({ timer: this.state.timer - 1 })\r\n            if (this.state.timer < 0 && this.props.endMessage) {\r\n                this.props.endMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.withTimer == true) {\r\n            let intervalId = setInterval(this.update, 1, null);\r\n            this.setState({ intervalId: intervalId });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = \"message message-\" + this.props.type;\r\n\r\n        if (this.props.realtime == true) {\r\n            return <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n        }\r\n\r\n        return (\r\n            <div className={className} >\r\n                <LoaderContent progress={this.props.progress} realtime={this.props.realtime} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nfunction LoaderContent(props) {\r\n\r\n    if (props.realtime) {\r\n        const progress = parseInt(props.progress);\r\n        return (\r\n            <div className=\"row container-fluid bg-light\" style={{margin:0, position: 'fixed', zIndex: 100 }}>\r\n                <div className=\"col-1\">\r\n                <span style={{marginBottom:'3px', marginRight: '3px'}} className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                <span>{progress}%</span>\r\n                </div>\r\n                <div className=\"col-11 progress\" style={{padding:0, marginTop: '7px', height:'10px'}}  >\r\n                    <div className=\"bg-primary\" style={{\r\n                        width: props.progress + \"%\",\r\n                        transitionDuration: '50ms',\r\n                        margin: 0,\r\n                    }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <button className=\"btn btn-dark \" type=\"button\" disabled>\r\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n            <span className=\" \">Loading...</span>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default Loader;","import React, { Component } from 'react'\r\n\r\nclass Alert extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.yesButtonRef = React.createRef();\r\n        this.noButtonRef = React.createRef();\r\n\r\n        this.onYes = (e) => {\r\n             \r\n            if (this.props.onYes) {\r\n                this.props.onYes(e);\r\n            }\r\n        }\r\n        this.onNo = (e) => {\r\n            \r\n            if (this.props.onNo) {\r\n                this.props.onNo(e);\r\n            }\r\n        }\r\n        this.onClose = (e) => {\r\n            if (this.props.onClose) {\r\n                this.props.onClose(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount () {\r\n        const isError = this.props.isError == true;\r\n        if (!isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        } else if (isError && this.noButtonRef.current) {\r\n            this.noButtonRef.current.focus();\r\n        } else if (isError && this.yesButtonRef.current) {\r\n            this.yesButtonRef.current.focus();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const title = this.props.title ? this.props.title : \"Info\";\r\n        const yesOnly = this.props.yesOnly == true;\r\n        const isError = this.props.isError == true;\r\n        const headerClassName = isError ? 'bg-danger':'bg-info';\r\n        const headerFontClassName = 'text-light';\r\n        return (\r\n            <>\r\n                <Backdrop />\r\n                <div className=\"modal fade show\" style={{ display: 'block' }} id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <Header fontClassName={headerFontClassName} className={headerClassName} title={title} onClose={this.onClose} />\r\n                            <div className=\"modal-body\"> {this.props.children}</div>\r\n                            <Footer noButtonRef={this.noButtonRef} yesButtonRef={this.yesButtonRef} yesOnly={yesOnly} onYes={this.onYes} onNo={this.onNo} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction Backdrop(props) {\r\n    return (\r\n        <div className=\"modal-backdrop\" style={{backgroundColor: 'rgba(100,100,100,0.7)'}} ></div>\r\n    );\r\n}\r\n\r\nfunction Footer(props) {\r\n    return (\r\n        <div className={\"modal-footer \"+props.className}>\r\n            <button ref={props.yesButtonRef} type=\"button\"\r\n                onClick={props.onYes} className=\"btn btn-outline-primary\">Yes</button>\r\n            {props.yesOnly ? null : <button ref={props.noButtonRef} type=\"button\"\r\n                onClick={props.onNo} className=\"btn btn-outline-secondary\">No</button>}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction Header(props) {\r\n    return (<div className={\"modal-header \"+props.className}>\r\n        <h5 className={\"modal-title \"+props.fontClassName }id=\"exampleModalCenterTitle\">{props.title}</h5>\r\n        <button onClick={props.onClose} type=\"button\" className=\"close\">\r\n            <span aria-hidden=\"true\" className={props.fontClassName}><i className=\"fas fa-times\"/></span>\r\n        </button>\r\n    </div>)\r\n}\r\n\r\nexport default Alert;","export const doItLater = (callback:()=>any, intervalMs:number) => {\r\n    const timeout = setTimeout(()=>{\r\n       callback();\r\n        clearTimeout(timeout);\r\n      }, intervalMs)\r\n}","import { Component } from 'react';\r\nimport WebResponse from '../models/common/WebResponse';\r\nimport ApplicationProfile from './../models/ApplicationProfile';\r\nimport User from './../models/User';\r\nimport Services from './../services/Services';\r\nimport HealthCenter from './../models/HealthCenter';\r\nimport InventoryData from '../models/stock/InventoryData';\r\nimport Configuration from './../models/Configuration';\r\nimport { doItLater } from './../utils/EventUtil';\r\n\r\nexport default class BaseComponent extends Component<any, any> {\r\n    parentApp: any;\r\n    authenticated: boolean = true;\r\n    state: any = { updated: new Date() };\r\n    constructor(props: any, authenticated = false) {\r\n        super(props);\r\n\r\n        this.authenticated = authenticated\r\n        this.state = {\r\n            ...this.state\r\n        }\r\n        this.parentApp = this.props.mainApp;\r\n\r\n    }\r\n    getInventoryData = (): InventoryData | undefined => {\r\n        return this.props.inventoryData;\r\n    }\r\n    getInventoryConfig = (): Configuration | undefined => {\r\n        return this.props.inventoryConfig;\r\n    }\r\n    getMasterHealthCenter = (): HealthCenter => {\r\n        return this.props.masterHealthCenter ?? new HealthCenter();\r\n    }\r\n    setPageTitle = (title: string) => {\r\n        document.title = title;\r\n    }\r\n    validateLoginStatus = (callback?: () => void) => {\r\n        if (this.authenticated == false) {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n            return;\r\n        }\r\n        if (this.isUserLoggedIn() == false) {\r\n            this.backToLogin();\r\n        } else {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        }\r\n    }\r\n\r\n    getApplicationProfile = (): ApplicationProfile => {\r\n        return this.props.applicationProfile == null ? new ApplicationProfile() : this.props.applicationProfile;\r\n    }\r\n\r\n    handleInputChange = (event: any) =>{\r\n        const target = event.target;\r\n        const value = target.type == 'checkbox' ? target.checked : target.value;\r\n        this.setState({ [target.name]: value });\r\n        console.debug(\"input changed: \", target.name, value);\r\n    }\r\n    /**\r\n     * \r\n     * @param {boolean} withProgress \r\n     */\r\n    startLoading(withProgress: boolean) {\r\n        this.parentApp.startLoading(withProgress);\r\n    }\r\n\r\n    endLoading() {\r\n        this.parentApp.endLoading();\r\n    }\r\n    /**\r\n     * api response must be instance of WebResponse\r\n     * @param method \r\n     * @param withProgress \r\n     * @param successCallback \r\n     * @param errorCallback \r\n     * @param params \r\n     */\r\n    doAjax = (method: Function, withProgress: boolean, successCallback: Function, errorCallback?: Function, ...params: any) => {\r\n        this.startLoading(withProgress);\r\n\r\n        method(...params).then(function (response: WebResponse) {\r\n            if (successCallback) {\r\n                successCallback(response);\r\n            }\r\n        }).catch(function (e) {\r\n            if (errorCallback) {\r\n                errorCallback(e);\r\n            } else {\r\n                if (typeof (e) == 'string') {\r\n                    alert(\"Operation Failed: \" + e);\r\n                }\r\n                alert(\"resource not found\");\r\n            }\r\n        }).finally((e: any) => {\r\n            this.endLoading();\r\n        })\r\n    }\r\n\r\n    scrollTop = () => {\r\n        // console.info(\"SCROLL TOP\");\r\n        const opt:ScrollToOptions = { top:0,  behavior: 'smooth' };\r\n        doItLater(()=>{\r\n        window.scrollTo(opt);\r\n        }, 100);\r\n    }\r\n    commonAjax = (method: Function, successCallback: Function, errorCallback: Function, ...params: any) => {\r\n        this.doAjax(method, false, successCallback, errorCallback, ...params);\r\n    }\r\n    commonAjaxWithProgress = (method: Function, successCallback: Function, errorCallback: Function, ...params: any) => {\r\n        this.doAjax(method, true, successCallback, errorCallback, ...params);\r\n    }\r\n    getLoggedUser = (): User | undefined => {\r\n        const user: User | undefined = this.props.loggedUser;\r\n        if (!user) return undefined;\r\n        user.password = \"^_^\";\r\n        return user;\r\n    }\r\n\r\n    isUserLoggedIn = (): boolean => {\r\n        return true == this.props.loginStatus && null != this.props.loggedUser;\r\n    }\r\n    showConfirmation = (body: any): Promise<boolean> => {\r\n        const app = this;\r\n        return new Promise((resolve, reject) => {\r\n            const onYes = (e) => {\r\n                resolve(true);\r\n            }\r\n            const onNo = (e) => {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlert(\"Konfirmasi\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showConfirmationDanger = (body: any): Promise<any> => {\r\n        const app = this;\r\n        return new Promise((resolve, reject) => {\r\n            const onYes = (e) =>{\r\n                resolve(true);\r\n            }\r\n            const onNo = (e) => {\r\n                resolve(false);\r\n            }\r\n            app.parentApp.showAlertError(\"Konfirmasi\", body, false, onYes, onNo);\r\n        });\r\n\r\n    }\r\n    showInfo(body: any) {\r\n        this.parentApp.showAlert(\"Info\", body, true, function () { });\r\n    }\r\n    showError(body: any) {\r\n        this.parentApp.showAlertError(\"Error\", body, true, function () { });\r\n    }\r\n\r\n    backToLogin() {\r\n        if (!this.authenticated || this.props.history == null) {\r\n            return;\r\n        }\r\n        this.props.history.push(\"/login\");\r\n    }\r\n    refresh() {\r\n        this.setState({ updated: new Date() });\r\n    }\r\n\r\n    showCommonErrorAlert = (e: any) => {\r\n        console.error(e);\r\n\r\n        let message;\r\n        if (e.response && e.response.data) {\r\n            console.error(\"e.response: \", e.response);\r\n            message = e.response.data.message;\r\n        } else {\r\n            message = e;\r\n        }\r\n        this.showError(\"Operation Failed: \" + message);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.authenticated == true && this.isUserLoggedIn() == false) {\r\n            console.debug(typeof this, \"BACK TO LOGIN\");\r\n            this.validateLoginStatus();\r\n        }\r\n    }\r\n\r\n    getServices = (): Services => {\r\n        return this.props.services;\r\n    }\r\n    \r\n}","\r\nimport Menu from '../models/common/Menu';\r\n\r\nlet menuSet:Menu[] = [];\r\n\r\nexport const getMenus = () => {\r\n    if (menuSet.length > 0) {\r\n        return menuSet;\r\n    }\r\n    menuSet  = [];\r\n    for (let i = 0; i < menus.length; i++) {\r\n        const element: Menu = menus[i];\r\n        menuSet.push(element);\r\n    }\r\n    return menuSet;\r\n}\r\nexport const extractMenuPath = (pathName: string) => {\r\n    const pathRaw = pathName.split('/');\r\n    console.debug(\"pathName: \", pathName);\r\n    let firstPath = pathRaw[0];\r\n    if (firstPath.trim() == \"\") {\r\n        firstPath = pathRaw[1];\r\n    }\r\n    return firstPath;\r\n}\r\nexport const getMenuByMenuPath = (pathName: string): Menu | null => {\r\n    try {\r\n        for (let i = 0; i < menus.length; i++) {\r\n            const menu: Menu = menus[i];\r\n            if (menu.url == \"/\" + pathName) {\r\n                return menu;\r\n            }\r\n        }\r\n        return null;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\nconst menus: Menu[] = [\r\n    {\r\n        code: 'home',\r\n        name: \"Beranda\",\r\n        url: \"/home\",\r\n        menuClass: \"fa fa-home\",\r\n        active: false,\r\n        authenticated: false,\r\n        showSidebar: false\r\n    },\r\n    \r\n    {\r\n        code: 'dashboard',\r\n        name: \"Dasbor\",\r\n        url: \"/dashboard\",\r\n        menuClass: \"fas fa-tachometer-alt\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'dashboard_info',\r\n                name: 'Info Persediaan',\r\n                url: 'info',\r\n                menuClass: 'fas fa-info-circle'\r\n            },\r\n            {\r\n                code: 'productstat',\r\n                name: 'Statistik Produk',\r\n                url: 'productstat',\r\n                menuClass: 'fas fa-chart-line'\r\n            },\r\n            {\r\n                code: 'productstatdetail',\r\n                name: 'Statistik Produk Detail',\r\n                url: 'productstatdetail',\r\n                menuClass: 'fas fa-chart-line'\r\n            }\r\n        ]\r\n    }, \r\n    {\r\n        code: 'inventory',\r\n        name: \"Persediaan\",\r\n        url: \"/inventory\",\r\n        menuClass: \"fas fa-warehouse\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'inventory_stocks',\r\n                name: 'Stok',\r\n                url: 'stock',\r\n                menuClass: 'fas fa-archive'\r\n\r\n            },\r\n            {\r\n                code: 'inventory_status',\r\n                name: 'Status',\r\n                url: 'status',\r\n                menuClass: 'fa fa-exclamation-circle'\r\n            },\r\n            {\r\n                code: 'stockfilter',\r\n                name: 'Filter Stok',\r\n                url: 'stockfilter',\r\n                menuClass: 'fas fa-layer-group'\r\n            }\r\n            ,\r\n            {\r\n                code: 'report',\r\n                name: 'Laporan',\r\n                url: 'report',\r\n                menuClass: 'fas fa-file-alt'\r\n            }\r\n        ]\r\n    }, \r\n    {\r\n        code: 'transaction',\r\n        name: \"Transaksi\",\r\n        url: \"/transaction\",\r\n        menuClass: \"fas fa-book\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'transaction_in',\r\n                name: 'Pasokan',\r\n                url: 'productin',\r\n                menuClass: 'fas fa-arrow-down'\r\n\r\n            },\r\n            {\r\n                code: 'transaction_out',\r\n                name: 'Distribusi',\r\n                url: 'productout',\r\n                menuClass: 'fas fa-arrow-up'\r\n            },\r\n            {\r\n                code: 'transaction_detail',\r\n                name: 'Detail',\r\n                url: 'detail',\r\n                menuClass: 'fas fa-file-alt'\r\n            },\r\n            {\r\n                code: 'transaction_related_record',\r\n                name: 'Related Record',\r\n                url: 'relatedrecord',\r\n                menuClass: 'fas fa-code-branch'\r\n            }\r\n        ]\r\n    },  \r\n    {\r\n        code: 'management',\r\n        name: \"Master Data\",\r\n        url: \"/management\",\r\n        menuClass: \"fa fa-database\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true\r\n    },\r\n    {\r\n        code: 'settings',\r\n        name: \"Setting\",\r\n        url: \"/settings\",\r\n        menuClass: \"fas fa-cogs\",\r\n        active: false,\r\n        authenticated: true,\r\n        showSidebar: true,\r\n        subMenus: [\r\n            {\r\n                code: 'user_profile',\r\n                name: 'Profil Pengguna',\r\n                menuClass: 'fas fa-user-cog',\r\n                url: 'user-profile',\r\n            },\r\n            {\r\n                code: 'app_profile',\r\n                name: 'Setting Aplikasi',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'app-profile',\r\n            },\r\n            {\r\n                code: 'inventory_config',\r\n                name: 'Konfigurasi Persediaan',\r\n                menuClass: 'fas fa-cog',\r\n                url: 'inventory-config',\r\n            },\r\n            \r\n        ]\r\n    },\r\n];\r\n","\r\nimport React, { useRef, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport { getMenus } from '../../constant/Menus';\r\nimport './Header.css';\r\nimport User from './../../models/User';\r\nimport { baseImageUrl } from './../../constant/Url'; \r\nimport Menu from '../../models/common/Menu';\r\nclass IState {\r\n    showNavLinks: boolean = false;\r\n}\r\nclass Header extends BaseComponent {\r\n    state: IState = new IState();\r\n    buttonToggleNavRef: React.RefObject<HTMLButtonElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    toggleNavLinks = () => {\r\n        this.setState({ showNavLinks: !this.state.showNavLinks });\r\n    }\r\n    onLogout = (e: any) => {\r\n        const app = this;\r\n        app.showConfirmation(\"Logout?\").then(\r\n            function (ok) {\r\n                if (ok) {\r\n                    app.props.performLogout(app.parentApp);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (this.state.showNavLinks && this.buttonToggleNavRef.current) {\r\n            this.buttonToggleNavRef.current.click();\r\n        }\r\n        this.props.setMenu(menu);\r\n\r\n    }\r\n    render() {\r\n        const showNavLinks: boolean = this.state.showNavLinks;\r\n        const menus = getMenus();\r\n        const user = this.getLoggedUser();\r\n        return (\r\n            <div className=\"bg-dark container-fluid\" style={{ position: 'fixed', zIndex: 55, padding: 0, margin: 0 }}>\r\n                <NavBarTop label={this.getApplicationProfile().name} />\r\n                <nav id=\"navbar\" className=\"navbar navbar-expand-lg navbar-dark bg-dark\" style={{ width: '100%' }}>\r\n                    {/* <div className=\"container-fluid\"></div> */}\r\n                    <a id=\"navbar-brand\" className=\"navbar-brand\" href=\"#\">{this.getApplicationProfile().name}</a>\r\n                    <button ref={this.buttonToggleNavRef} onClick={this.toggleNavLinks} className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\r\n                        data-target=\"#navbarToggler\" aria-controls=\"navbarToggler\"\r\n                        aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n                        <i className={showNavLinks ? \"fas fa-times\" : \"fas fa-bars\"} />\r\n                    </button>\r\n                    <div className={\"collapse navbar-collapse\"} id=\"navbarToggler\">\r\n                        <ul id=\"navbar-top\" className=\"navbar-nav mr-auto mt-2 mt-lg-0\">\r\n                            {menus.map(menu => {\r\n                                if (menu == null || (menu.authenticated && !user)) return null;\r\n                                // if (menu.userAuthorized && menu.userAuthorized(user) == false) return null;\r\n                                const isActive = this.props.activeMenuCode == menu.code;\r\n                                return (\r\n                                    <li key={\"header-menu-\" + new String(menu.code)} className={\"nav-item \" + (isActive ? \"active nav-active\" : \"nav-inactive\")}>\r\n                                        <Link onClick={() => this.setMenu(menu)} className={\"nav-link  \"}\r\n                                            to={menu.url}><span>{menu.name}</span>\r\n                                        </Link></li>\r\n                                )\r\n                            })}\r\n                        </ul >\r\n                        <form className=\"form-inline my-2 my-lg-0\">\r\n                            <UserIcon setMenuNull={this.props.setMenuNull}\r\n                                onLogout={this.onLogout} user={user} />\r\n                        </form >\r\n                    </div >\r\n                </nav >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst NavBarTop = (props) => {\r\n    return (\r\n        <div id=\"navbar-brand-top\" style={{ paddingLeft: '0.5rem' }} className=\"container-fluid\">\r\n            <a style={{ fontSize: '15px' }} className=\"text-white navbar-brand\" href=\"#\">\r\n                <strong>{props.label}</strong>\r\n            </a>\r\n        </div>\r\n    );\r\n}\r\nconst UserIcon = (props: { user: User | undefined, setMenuNull(): any, onLogout(e): any }) => {\r\n    if (props.user) {\r\n        return (\r\n            <Fragment>\r\n                <Link onClick={props.setMenuNull} style={{ marginRight: \"5px\" }} className=\"btn btn-light btn-sm my-2 my-sm-0\"\r\n                    to='/settings/user-profile'>\r\n                    <img width=\"20\" src={baseImageUrl() + props.user.profileImage} className=\"rounded rounded-circle\" />\r\n                        &nbsp;{props.user.displayName}\r\n                </Link>\r\n                <a style={{ marginRight: '5px' }} className=\"btn btn-danger btn-sm  my-2 my-sm-0\"\r\n                    onClick={props.onLogout}><i className=\"fas fa-sign-out-alt\"></i>&nbsp;Logout\r\n\t\t\t\t</a>\r\n            </Fragment>);\r\n    }\r\n    return (\r\n\r\n        <Link style={{ marginRight: '5px' }} onClick={props.setMenuNull} className=\"btn btn-sm btn-info my-2 my-sm-0\"\r\n            to='/login'> <i className=\"fas fa-sign-in-alt\"></i>&nbsp;Login\r\n        </Link>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Header))","\r\nimport React, { Component } from 'react';\r\nimport './Spinner.css';\r\nexport default class Spinner extends Component<any, any>{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const innerDivs:JSX.Element[] = new Array<JSX.Element>();\r\n        for (let i = 0; i <= 11; i++) {\r\n            innerDivs.push(<div key={\"spinner-item-\"+i}></div>);\r\n        }\r\n        return (\r\n            <div style={{width:'85px', height:'85px', display:'block'}} className=\"container-fluid text-center\" >\r\n                 <div style={{visibility:this.props.show == false?'hidden':'visible'}} className=\"lds-spinner\">\r\n                  {innerDivs}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { RefObject, Component, FormEvent, Fragment, ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport './Login.css';\r\nimport { performLogin } from '../../../redux/actionCreators';\r\nimport Spinner from './../../loader/Spinner';\r\nclass IState {\r\n    loading: boolean = false; username: string = \"\"; password: string = \"\";\r\n}\r\nclass Login extends BaseComponent {\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    login(e: FormEvent) {\r\n        e.preventDefault();\r\n        this.props.performLogin(this.state.username, this.state.password, this);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"Login\";\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n\r\n        // console.debug(\"Login update\");\r\n        // console.debug(\"logged in : \", this.props.loginStatus);\r\n        // console.debug(\"logged user : \", this.getLoggedUser());\r\n        if (this.isUserLoggedIn()) {\r\n            this.props.history.push(\"/dashboard\");\r\n        }\r\n    }\r\n    updateCredentialProperty = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value });\r\n    }\r\n    render() {\r\n        return (\r\n            <div id=\"Login\" className=\"text-center\">\r\n\r\n\r\n                <svg style={{ marginTop: '20px' }} width=\"200\" height=\"201\"  >\r\n                    <g fill=\"transparent\" stroke=\"black\" strokeWidth={3}>\r\n                        <path className=\"animated-svg house\"\r\n                            d=\"M 100 0 L 0 100 L 15 100 L 15 200 L 185 200  L 185 100 L 200 100  Z\"\r\n                        />\r\n                        <circle className=\"animated-svg circle\"  \r\n                            cx={100} cy={122} r={68} />\r\n                        <path className=\"animated-svg plus\"  \r\n                            d=\"M 41 111 L 88 111 L 88 64 L 113 64 \r\n                            L 113 111 L 158 111 L 158 135 L 113 135 \r\n                            L 113 181 L 88 181 L 88 135 L 41 135 Z\" \r\n                        />\r\n                    </g>\r\n                </svg>\r\n                <form name='login' onSubmit={(e) => { this.login(e) }}\r\n                    method='POST' className=\"form-signin\">\r\n                    <UsernameField value={this.state.username} onChange={this.updateCredentialProperty} />\r\n                    <PasswordField value={this.state.password} onChange={this.updateCredentialProperty} />\r\n                    {this.state.loading ? <Spinner /> : <button className=\"btn btn-lg btn-dark btn-block\" type=\"submit\">Masuk</button>}\r\n                    <input name=\"transport_type\" type=\"hidden\" value=\"rest\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst PasswordField = ({ value, onChange }) => {\r\n    return <Fragment>\r\n        <label className=\"sr-only\">Kata Sandi</label>\r\n        <input name=\"password\" value={value} onChange={onChange} type=\"password\" id=\"inputPassword\" className=\"form-control border border-dark\"\r\n            placeholder=\"Password\" required />\r\n    </Fragment>\r\n}\r\nconst UsernameField = ({ value, onChange }) => {\r\n    return (<Fragment>\r\n        <label className=\"sr-only\">Nama Pengguna</label>\r\n        <input name=\"username\" value={value} onChange={onChange} type=\"text\" id=\"username\" className=\"form-control border border-dark\"\r\n            placeholder=\"Username\" required autoFocus />\r\n    </Fragment>)\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogin: (username: string, password: string, app: any) => dispatch(performLogin(username, password, app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(Login))","import React from 'react'\nimport BaseComponent from './BaseComponent';\nexport default class BasePage extends BaseComponent {\n\n    protected title?:string;\n    constructor(props, title?:string, authentiacted?:boolean) {\n        super(props, authentiacted);\n        this.title = title;\n        if (this.title) {\n            document.title = this.title;\n        }\n    }\n    componentDidMount() {\n        this.validateLoginStatus(()=>{\n            this.scrollTop();\n        });\n    }\n    // render () {\n    //     return (\n    //         <></>\n    //     )\n    // }\n}","let index = 1;\r\nexport const uniqueId = function () {\r\n\tlet string = new String(new Date().getUTCMilliseconds()).toString();\r\n\tindex++;\r\n\treturn index + \"-\" + string;\r\n}\r\n\r\nexport const greeting = (): string => {\r\n\r\n\tlet hour = new Date().getHours();\r\n\tlet time: string = \"Datang\";\r\n\tif (hour >= 3 && hour < 11) {\r\n\t\ttime = \"Pagi\";\r\n\t} else if (hour >= 11 && hour < 15) {\r\n\t\ttime = \"Siang\";\r\n\t} else if (hour >= 15 && hour < 18) {\r\n\t\ttime = \"Sore\";\r\n\t} else {\r\n\t\ttime = \"Malam\";\r\n\t}\r\n\r\n\treturn \"Selamat \"+time;\r\n\r\n}\r\n\r\nexport function beautifyNominal(val: any) {\r\n\treturn new String(val). toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\");\r\n\t \r\n}\r\n  \r\nconst months = [\r\n\t\"January\", \"Ferbuary\", \"March\", \"April\", \"May\", \"June\",\r\n\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n]\r\n\r\nexport const monthYearString = function (m, y) {\r\n\tif (m == null || y == null) {\r\n\t\treturn \"-\";\r\n\t}\r\n\treturn months[m - 1] + \" \" + y;\r\n}\r\n\r\nexport const base64StringFileSize = (base64String: string): number => {\r\n\tif (base64String.includes(\",\")) {\r\n\t\tbase64String = base64String.split(\",\")[1];\r\n\t}\r\n\tvar stringLength = base64String.length;\r\n\r\n\tvar sizeInBytes = 4 * Math.ceil((stringLength / 3)) * 0.5624896334383812;\r\n\tvar sizeInKb = sizeInBytes / 1000;\r\n\treturn sizeInBytes;\r\n}\r\nexport const twoDigits = (value:number) :string => {\r\n    if (value >= 10) {\r\n        return   value.toString();\r\n    }\r\n    return \"0\"+value;\r\n}","\nexport enum FieldType {\n\n\tFIELD_TYPE_TEXT = \"FIELD_TYPE_TEXT\",\n\tFIELD_TYPE_IMAGE =\n\t'FIELD_TYPE_IMAGE',\n\tFIELD_TYPE_CURRENCY =\n\t'FIELD_TYPE_CURRENCY',\n\tFIELD_TYPE_NUMBER =\n\t'FIELD_TYPE_NUMBER',\n\tFIELD_TYPE_HIDDEN =\n\t'FIELD_TYPE_HIDDEN',\n\tFIELD_TYPE_COLOR =\n\t'FIELD_TYPE_COLOR',\n\tFIELD_TYPE_CHECKBOX =\n\t'FIELD_TYPE_CHECKBOX',\n\tFIELD_TYPE_FIXED_LIST =\n\t'FIELD_TYPE_FIXED_LIST',\n\tFIELD_TYPE_DYNAMIC_LIST =\n\t'FIELD_TYPE_DYNAMIC_LIST',\n\tFIELD_TYPE_TEXTAREA =\n\t'FIELD_TYPE_TEXTAREA',\n\tFIELD_TYPE_PLAIN_LIST =\n\t'FIELD_TYPE_PLAIN_LIST',\n\tFIELD_TYPE_DATE =\n\t'FIELD_TYPE_DATE',\n\tFIELD_TYPE_DATETIME =\n\t'FIELD_TYPE_DATETIME',\n\tFIELD_TYPE_TEXTEDITOR = \n\t'FIELD_TYPE_TEXTEDITOR'\n}\n\n","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BasePage from '../../../BasePage';\r\nimport { greeting } from '../../../../utils/StringUtil';\r\n\r\n\r\nclass DashboardMain extends BasePage {\r\n    constructor(props: any) {\r\n        super(props, \"Dasbor\", true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div  className=\"section-body container-fluid\">\r\n                <h2>Dasbor</h2>\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(DashboardMain))","\r\nimport React, { Component } from 'react';\r\ninterface IProps {\r\n    show?:boolean;\r\n    className?:string;\r\n    style?:any;\r\n    onClick?:any;\r\n    iconClassName?:string;\r\n    attributes?:any;\r\n}\r\nexport default class AnchorButton extends Component<IProps, any>\r\n{\r\n    constructor(props:any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className??\"btn btn-outline-secondary\";\r\n        return (\r\n            <a style={this.props.style} {...this.props.attributes} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName?\r\n                <span style={this.props.children?{marginRight:'5px'}:{}}><i className={this.props.iconClassName}/></span>\r\n                :\r\n                null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component } from 'react';\r\nimport AnchorButton from '../navigation/AnchorButton';\r\nclass IState {\r\n    show:boolean = true\r\n}\r\nexport default class Modal extends Component<any, IState> {\r\n    state:IState = new IState();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    hideModal = () => {\r\n        this.setState({show:false});\r\n    }\r\n    showModal = () => {\r\n        this.setState({show:true});\r\n    }\r\n    render() {\r\n       if (this.props.show == false) { return null; }\r\n        const title = this.props.title?? \"Title\"; \r\n        if (this.props.toggleable == true && this.state.show == false) {\r\n            return (\r\n                <AnchorButton style={{marginBottom:'10px'}} onClick={this.showModal} iconClassName=\"fas fa-angle-down\" >Show {title}</AnchorButton>\r\n            )\r\n        }\r\n        const props = (({ style, show, footerContent, toggleable, ...props }) => props)(this.props) // remove b and c\r\n        return (\r\n            <div {...props} className=\"modal-content \" style={{...props.style, marginBottom:'10px'}}>\r\n                <div className=\"modal-header\">\r\n                    <h5 className=\"modal-title\">{title}</h5>\r\n                    {this.props.toggleable?\r\n                    <button type=\"button\" className=\"btn btn-sm\" onClick={this.hideModal} aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">\r\n                            <i className='fas fa-times'/>\r\n                        </span>\r\n                    </button>\r\n                    :\r\n                    null}\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent || this.props.showFooter == true?\r\n                <div className=\"modal-footer\">\r\n                    {this.props.footerContent}\r\n                </div>\r\n                :null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}"," \nexport default class Filter{\n    \n\tstatic FLAG_ALL:string = \"ALL\";\n\tstatic FLAG_DEFAULT:string = \"DEFAULT\";\n\tlimit? :number = 5; \n\tpage? :number = 0;\n\torderType?:string;\n\torderBy?:string;\n\tcontains?:boolean;\n\tbeginsWith?:boolean;\n\texacts?:boolean;\n\tday?:number;\n\tyear?:number;\n\tmonth?:number;\n\tmodule?:string;\n\tfieldsFilter?:any = {};\n\tdayTo?:number;\n\tmonthTo?:number;\n\tyearTo?:number;\n\tmaxValue?:number;\n\tignoreEmptyValue?:boolean = false;\n\tfilterExpDate?:boolean = false;\n\tflag?:string = Filter.FLAG_DEFAULT;\n\t//\n\tuseExistingFilterPage?:boolean = false; \n\n\tpublic static validateFieldsFilter = (filter:Filter):void => {\n        const fieldsFilter = filter.fieldsFilter;\n        for (const key in fieldsFilter) {\n            const element = fieldsFilter[key];\n            if (element == undefined || element == null || new String(element).length == 0) {\n                if (filter.fieldsFilter != undefined) {\n                    delete filter.fieldsFilter[key];\n                }\n            }\n        } \n    }\n\tpublic static setOrderPropertyFromDataSet = (f:Filter, dataset: DOMStringMap) =>{\n\t\tf.orderBy = dataset['orderby'];\n        f.orderType = dataset['ordertype'];\n\t}\n\tpublic static setFieldsFilterValue = (f:Filter, name: string, value: any) => {\n        if (f.fieldsFilter == undefined) {\n            f.fieldsFilter = {};\n        }\n        f.fieldsFilter[name] = value;\n    }\n\tpublic static setFieldsFilterValueFromInput = (f:Filter, input: any) => {\n\t\tconst name = input.name;\n\t\tconst value = input.value;\n\t\tFilter.setFieldsFilterValue(f, name, value);\n    }\n\n}\n","\r\nimport EntityElement from \"./EntityElement\";\r\nimport { FieldType } from \"../FieldType\";\r\nimport HeaderProps from '../common/HeaderProps'; \r\n\r\nexport default class EntityProperty{\r\n    \r\n\tgroupNames?:string;\r\n\tentityName?:string;\r\n\talias?:string;\r\n\tfieldNames?:string;\r\n\tidField?:string;\r\n\tdetailFieldName?:string; \r\n\tformInputColumn?:number;\r\n\teditable:boolean = true;\r\n\tdeletable:boolean = true;\r\n\tcreatable:boolean = true; \r\n\telements:EntityElement[] = new Array();\r\n\tfieldNameList?:string[]; \r\n\twithProgressWhenUpdated:boolean = false;\r\n\tpublic addElement = (element:EntityElement) => {\r\n\t\tthis.elements.push(element);\r\n\t}\r\n\tpublic setOrder = (...properties:String[]) =>{\r\n\t\tconst elements:EntityElement[] = [];\r\n\t\tfor (let i = 0; i < this.elements.length; i++) {\r\n\t\t\tconst index = properties.indexOf(this.elements[i].id);\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\telements[index] = this.elements[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\t//remove nulls\r\n\t\tthis.elements = elements.filter(function (el) {\r\n\t\t\treturn el != null;\r\n\t\t });\r\n\t}\r\n\tpublic keepProperties = (...properties: String[])=>{\r\n\t\tconst elements:EntityElement[] = [];\r\n\t\tloop:for (let i = 0; i < this.elements.length; i++) {\r\n\t\t\t for (let p = 0; p < properties.length; p++) {\r\n\t\t\t\tconst id = properties[p];\r\n\t\t\t\tif (this.elements[i].id == id) {\r\n\t\t\t\t\telements.push(this.elements[i]);\r\n\t\t\t\t\tcontinue loop;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.elements = elements;\r\n\t\tconsole.debug(\"new elements: {}\", this.elements);\r\n    }\r\n\r\n//////////////////\r\n\r\n\tstatic getEntityElement = (prop: EntityProperty, id:string) :EntityElement|undefined => {\r\n\t\tfor (let i = 0; i < prop.elements.length; i++) {\r\n\t\t\tconst element = prop.elements[i];\r\n\t\t\tif (element.id == id) {\r\n\t\t\t\treturn element;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tstatic getHeaderLabels = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\tconst result:HeaderProps[] = new Array();\r\n\t\tif (prop.elements == undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst elements:EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\r\n\t\t\tconst element = elements[i];\r\n\t\t\tconst header:HeaderProps=  {\r\n\t\t\t\tlabel:element.labelName??element.id,\r\n\t\t\t\tvalue:element.id,\r\n\t\t\t\tisDate:element.type == 'date',\r\n\t\t\t\tfilterable: element.filterable,\r\n\t\t\t\torderable: element.orderable\r\n\t\t\t};\r\n\t\t\tresult.push(header);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tstatic getRecordId(record:any, prop:EntityProperty) {\r\n\t\tconst elements = prop.elements;\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tconst element = elements[i];\r\n\t\t\tif (element.identity) {\r\n\t\t\t\treturn record[element.id];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic hasTextEditorField = (elements:EntityElement[]) => {\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tif(elements[i].fieldType == FieldType.FIELD_TYPE_TEXTEDITOR) return true;\r\n\t\t\t\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n","import React from 'react';\r\nimport EntityProperty from '../models/settings/EntityProperty';\r\nimport EntityElement from '../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../constant/Url';\r\nimport { FieldType } from '../models/FieldType';\r\nimport { beautifyNominal } from './StringUtil';\r\nexport default class EntityValues {\r\n\tstatic parseValues(object: any, prop: EntityProperty): Array<any> {\r\n\t\tconst result = new Array();\r\n\t\tconst elemnents: EntityElement[] = prop.elements;\r\n\t\tfor (let i = 0; i < elemnents.length; i++) {\r\n\t\t\tconst element = elemnents[i];\r\n\t\t\tconst elementid = element.id;\r\n\t\t\tlet value: any = object[elementid];\r\n\t\t\tif (value == null) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch (element.fieldType) { \r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATE:\r\n\t\t\t\t\tvalue = new Date(value).toLocaleDateString(\"ID\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DATETIME:\r\n\t\t\t\t\tvalue = new Date(value).toLocaleDateString(\"ID\") +\" \"+ new Date(value).toLocaleTimeString();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_IMAGE:\r\n\t\t\t\t\tconst imgLink = new String(value).split(\"~\")[0];\r\n\t\t\t\t\tvalue = <img src={baseImageUrl() + imgLink} width=\"50\" height=\"50\" />\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_COLOR:\r\n\t\t\t\t\tvalue = <strong style={{ color: value }} >{value}</strong>\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_NUMBER:\r\n\t\t\t\t\tvalue = beautifyNominal(value);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_TEXTEDITOR:\r\n\t\t\t\t\tvalue = <div dangerouslySetInnerHTML={{\r\n\t\t\t\t\t\t__html: new String(value).length > 100 ?\r\n\t\t\t\t\t\t\t(new String(value).substring(0, 100) + \"...\")\r\n\t\t\t\t\t\t\t: value\r\n\t\t\t\t\t}}></div>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_CHECKBOX:\r\n\t\t\t\t\tvalue = value == true?<i>true</i> :<i>false</i>;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase FieldType.FIELD_TYPE_FIXED_LIST:\r\n\t\t\t\tcase FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (element.optionItemName  && element.optionItemName != \"\") {\r\n\t\t\t\t\t\tconst valueAsObj = object[elementid];\r\n\t\t\t\t\t\tvalue = valueAsObj[element.optionItemName ?? \"id\"];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalue = object[elementid];\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(value);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}","\r\nimport React, { Component } from 'react';\r\nimport { uniqueId } from './../../utils/StringUtil';\r\ninterface IProps {\r\n    limit: number,\r\n    totalData: number,\r\n    activePage: number,\r\n    onClick: any\r\n}\r\nexport default class NavigationButtons extends Component<IProps, any> {\r\n    constructor(props: IProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        const buttonIndexes = generateButtonValues(this.props.limit, this.props.totalData, this.props.activePage);\r\n        if (buttonIndexes.length == 0) { return null }\r\n        const lastIndex = buttonIndexes[buttonIndexes.length - 1];\r\n        const nextPage = this.props.activePage + 1 >= lastIndex  ? 0 : this.props.activePage + 1;\r\n        const previusPage = this.props.activePage - 1 < 0? lastIndex-1 : this.props.activePage - 1;\r\n        return (<div>\r\n            <nav aria-label=\"Page navigation example\">\r\n                <ul className=\"pagination\">\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(previusPage)}>Previous</a></li>\r\n                    {buttonIndexes.map((page, i) => {\r\n                        return <li key={\"NAV-\"+uniqueId()} className={\"page-item \"+(page-1 == this.props.activePage?\"active\":\"\")}><a className=\"page-link \" onClick={(e) => this.props.onClick(page - 1)} >{page}</a></li>\r\n                    })}\r\n                    <li className=\"page-item\"><a className=\"page-link\" onClick={(e) => this.props.onClick(nextPage)}>Next</a></li>\r\n                </ul>\r\n            </nav>\r\n        </div>)\r\n    }\r\n}\r\n\r\nconst generateButtonValues = (limit: number, totalData: number, currentPage: number) => {\r\n\r\n    /* DISPLAYED BUTTONS */\r\n    const displayed_buttons: number[] = [];\r\n    const buttonCount = Math.ceil(totalData / limit);\r\n\r\n    // console.debug(\"current page:\", currentPage);\r\n    const min = (currentPage) - 1;\r\n    const max = (currentPage) + 3;\r\n    // const min = (currentPage) - 2;\r\n    // const max = (currentPage) + 2;\r\n\r\n    // console.debug(\"min\", min, \"current page:\", currentPage, \"max\", max);\r\n    if (buttonCount > 1) {\r\n        displayed_buttons.push(1);\r\n    }\r\n    for (let i = min; i <= max; i++) {\r\n        if (i > 1 && i <= buttonCount) {\r\n            (displayed_buttons.push(i));\r\n        }\r\n    }\r\n    if (max < buttonCount) {\r\n        displayed_buttons.push(buttonCount);\r\n    }\r\n    return displayed_buttons;\r\n}\r\n","import { base64StringFileSize } from './StringUtil';\r\nimport { ChangeEvent } from 'react';\r\nexport const byId = (id) => { return document.getElementById(id) }\r\n \r\nexport function toBase64(file, referer, callback) {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file.files[0]);\r\n    reader.onload = () => callback(reader.result, referer);\r\n    reader.onerror = error => {\r\n        alert(\"Error Loading File\");\r\n    }\r\n}\r\n \r\nexport const getHtmlInputElement = (e:ChangeEvent) : HTMLInputElement => {\r\n    const target = e.target as HTMLInputElement;\r\n    return target;\r\n}\r\n\r\nexport function toBase64v2(fileInput) {\r\n    return new Promise<string>(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(fileInput.files[0]);\r\n            console.debug(\"fileInput.files[0]: \", fileInput.files[0]);\r\n            reader.onload = function () { resolve(new String(reader.result).toString()); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const resizeImage = (data:string, ratio:number, extension:string) => {\r\n    const actualFilesize = base64StringFileSize(data);\r\n    console.debug(\"Actual filesize: \", actualFilesize);\r\n    return new Promise<string>(function(resolve, reject){\r\n        const img = new Image();\r\n        img.src = data;\r\n        img.onload = function () {\r\n            const width = img.width   * ratio;\r\n            const height = img.height   * ratio;\r\n            // create an off-screen canvas\r\n            var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n            const ctx = canvas.getContext('2d');\r\n            if (!ctx) return;\r\n            // set its dimension to target size\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var mime_type = \"image/\"+extension;\r\n            // draw source image into the off-screen canvas:\r\n            ctx.drawImage(img, 0, 0, width, height);\r\n            console.debug(\"Resize ratio: \", ratio, \"mime_type: \",mime_type);\r\n            // encode image to data-uri with base64 version of compressed image\r\n            const dataURL = (canvas.toDataURL());\r\n            console.debug(\"Resized filesize: \", base64StringFileSize(dataURL));\r\n            resolve(dataURL);\r\n        }\r\n    });\r\n}\r\n\r\nexport function toBase64FromFile(file) {\r\n    return new Promise(function (resolve, reject) {\r\n        try {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = function () { resolve(reader.result); }\r\n            reader.onerror = function (error) {\r\n                reject(error);\r\n            }\r\n        } catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n\r\n}\r\n\r\n\r\nexport const checkExistance = function (...ids) {\r\n    for (let i = 0; i < ids.length; i++) {\r\n        if (byId(ids[i]) == null) {\r\n            console.log(\"component with id:\", ids[i], \"does not exist\");\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * \r\n * @param {Number} totalButton \r\n * @param {Number} currentPage \r\n */\r\nexport const createNavButtons = (totalButton, currentPage) => {\r\n    totalButton = Math.ceil(totalButton);\r\n    if (!currentPage) { currentPage = 0 }\r\n    let buttonData = new Array();\r\n    let min = currentPage - 3 < 0 ? 0 : currentPage - 3;\r\n    let max = currentPage + 3 > totalButton ? totalButton : currentPage + 3;\r\n\r\n    if (min != 0) {\r\n        buttonData.push({\r\n            text: 1,\r\n            value: 0\r\n        });\r\n    }\r\n\r\n    for (let index = min; index < max; index++) {\r\n        buttonData.push({\r\n            text: index + 1,\r\n            value: index\r\n        });\r\n    }\r\n\r\n    if (max != totalButton) {\r\n        buttonData.push({\r\n            text: totalButton,\r\n            value: totalButton - 1\r\n        });\r\n    }\r\n\r\n\r\n    return buttonData;\r\n}\r\n\r\n\r\nexport const getDropdownOptionsMonth = () => {\r\n    let options:any[] = [];\r\n    for (let i = 1; i <= 12; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}\r\nexport const getDropdownOptionsYear = (from, to) => {\r\n    let options:any[] = [];\r\n    for (let i = from; i <= to; i++) {\r\n        options.push({ value: i, text: i });\r\n    }\r\n    return options;\r\n}","import React from 'react'\r\nimport BaseComponent from './../../../../BaseComponent';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\n\r\nexport default class BaseField extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        this.prepopulateForm();\r\n    }\r\n    prepopulateForm = () => {\r\n\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    getRequiredAttr = () => {\r\n        const requiredAttr = { required: this.getEntityElement().required == true }\r\n        return (\r\n            // null\r\n            requiredAttr\r\n        )\r\n    }\r\n}","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    singlePreviewData?: string,\r\n    showInputFile: boolean\r\n}\r\n  class FormInputImage extends BaseField {\r\n    state: IState = {\r\n        singlePreviewData: undefined,\r\n        showInputFile: false\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    changeSingleImageData = (e) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            app.setState({ singlePreviewData: data });\r\n        })\r\n    }\r\n    removeImage = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Remove image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveImage();\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveImage = () => {\r\n        if (this.ref.current) {\r\n            this.ref.current.value = null;\r\n        }\r\n        this.setState({ singlePreviewData: undefined, showInputFile: false });\r\n    }\r\n    \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit){ \r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue){ \r\n            return;\r\n        }\r\n        const fullUrl = baseImageUrl() + defaultValue;\r\n        this.setState({ singlePreviewData: fullUrl, showInputFile:true });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.showInputFile ?\r\n                    <input ref={this.ref}\r\n                        onChange={this.changeSingleImageData} type=\"file\" accept=\"image/*\" name={element.id} className='form-control' />\r\n\r\n                    :\r\n                    <Fragment>\r\n                        <p></p>\r\n                        <AnchorButton onClick={(e)=> this.setState({showInputFile:true})} iconClassName=\"fas fa-plus\" className=\"btn btn-info btn-sm\">Add Image</AnchorButton>\r\n                        <input type=\"hidden\" name={element.id} value=\"NULLED\" />\r\n                    </Fragment>\r\n                }\r\n                <ImagePreview imageData={this.state.singlePreviewData} />\r\n                <AnchorButton show={this.state.singlePreviewData != undefined} onClick={this.removeImage} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">remove</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImage))","\r\nimport React, { Fragment, Component } from 'react';\r\nimport { toBase64v2 } from '../../../../../utils/ComponentUtil';\r\nimport AnchorButton from '../../../../navigation/AnchorButton';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport { baseImageUrl } from '../../../../../constant/Url'; \r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    previewData: Map<number, string>,\r\n    inputElements: number[]\r\n}\r\nclass FormInputImageMultiple extends BaseField {\r\n    state: IState = {\r\n        previewData: new Map(),\r\n        inputElements: [1]\r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    setImageData = (e, index) => {\r\n        const app = this;\r\n        toBase64v2(e.target).then(function (data) {\r\n            const previewData = app.state.previewData;\r\n            previewData.set(index, data);\r\n            app.setState({ previewData: previewData });\r\n        })\r\n    }\r\n\r\n    addInputElement = (e) => {\r\n        const element = this.state.inputElements;\r\n        if (element.length == 0) {\r\n            element.push(1);\r\n        } else {\r\n            element.push(element[element.length - 1] + 1);\r\n        }\r\n        this.setState({ inputElements: element });\r\n    }\r\n    removeInputElement = (removedIndex: number) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete image?\")\r\n            .then(function (ok) {\r\n                if (ok) {\r\n                    app.doRemoveInputElement(removedIndex);\r\n                }\r\n            })\r\n    }\r\n\r\n    doRemoveInputElement = (removedIndex: number) => {\r\n        const previewData = this.state.previewData;\r\n        const element = this.state.inputElements;\r\n        for (let i = 0; i < element.length; i++) {\r\n            const index = element[i];\r\n            if (index == removedIndex) {\r\n                element.splice(i, 1);\r\n                previewData.delete(removedIndex);\r\n            }\r\n        }\r\n        this.setState({ inputElements: element, previewData: previewData });\r\n    }\r\n      \r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        let defaultValue = this.props.recordToEdit[this.getEntityElement().id];\r\n        if (!defaultValue || new String(defaultValue).trim() == \"\") {\r\n            return;\r\n        }\r\n        const previewData: Map<number, string> = this.state.previewData;\r\n        const imageNames: string[] = new String(defaultValue).split(\"~\");\r\n        const inputElements: number[] = new Array<number>();\r\n        for (let i = 0; i < imageNames.length; i++) {\r\n            const imageName: string = imageNames[i];\r\n            previewData.set(i, imageName);\r\n            inputElements.push(i);\r\n        }\r\n        this.setState({ previewData: previewData, inputElements: inputElements });\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {this.state.inputElements.map(index => {\r\n                    const previewData: string | undefined = this.state.previewData.get(index);\r\n                    const isNull = previewData == undefined || new String(previewData).trim() == \"\";\r\n                    const isBase64 = !isNull && isBase64Image(previewData);\r\n                    return (\r\n                        <Fragment key={\"IMG\"+index+element.id}>\r\n                            {isNull ?\r\n                                <input onChange={(e) => this.setImageData(e, index)} type=\"file\" accept=\"image/*\"\r\n                                    name={element.id} className='form-control' /> : null}\r\n                            {isBase64 ?\r\n                                <div>\r\n                                    <input value={previewData} type=\"hidden\" name={element.id} />\r\n                                    <ImagePreview imageData={previewData} />\r\n                                </div>\r\n                                :\r\n                                !isNull ?\r\n                                    <div>\r\n                                        <input value={previewData} type=\"hidden\" name={element.id} className='form-control' />\r\n                                        <ImagePreview imageData={baseImageUrl() + previewData} />\r\n                                        <p className=\"badge badge-warning\">{previewData}</p>\r\n                                    </div> :\r\n                                    null\r\n                            }\r\n                            <AnchorButton show={this.state.previewData != undefined}\r\n                                onClick={(e: any) => this.removeInputElement(index)} iconClassName=\"fas fa-times\" className=\"btn btn-danger btn-sm\">\r\n                                remove {index}\r\n                            </AnchorButton>\r\n                        </Fragment>)\r\n                })}\r\n                <p></p>\r\n                <AnchorButton iconClassName=\"fas fa-plus\" onClick={this.addInputElement}>Add</AnchorButton>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst isBase64Image = (string?: string) => {\r\n    return string && string.startsWith(\"data:image\");\r\n}\r\nconst ImagePreview = (props) => {\r\n    if (props.show == false || !props.imageData) return null;\r\n    return <img className=\"image\" style={{ margin: '3px' }} src={props.imageData} width=\"50\" height=\"50\" />\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputImageMultiple))\r\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/common/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent'; \r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\ninterface IState {\r\n    inputList: any[],\r\n    singlePreviewData?: string, \r\n}\r\nclass FormInputDropDown extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        inputList: [],\r\n        singlePreviewData: undefined, \r\n    }\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props );\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    \r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities });\r\n        this.prepopulateForm();\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n        // if (element.jsonList &&  element.jsonList != \"\") {\r\n        //     const list = JSON.parse(element.jsonList);\r\n        //     this.inputListLoaded({entities:list})\r\n        //     return;\r\n        // }\r\n\r\n        const code = element.entityReferenceClass;\r\n        this.commonAjax(\r\n            this.masterDataService.loadAllEntities,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            code\r\n        )\r\n    }\r\n\r\n    isNotReady = () => {\r\n        return this.state.inputList.length == 0;\r\n    }\r\n    validateInputType = () => {\r\n        console.debug(\"validateInputType\");\r\n        if (this.isNotReady()) {\r\n            this.loadInputList();\r\n        }\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateInputType();\r\n    }\r\n    componentDidMount() {\r\n        this.validateInputType();\r\n        this.prepopulateForm();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n\r\n        let defaultInputValue = undefined;\r\n\r\n        if (this.state.inputList.length == 0) {\r\n            return;\r\n        }\r\n        const optionValueName = this.getEntityElement().optionValueName;\r\n        if (!optionValueName) return;\r\n        defaultInputValue = recordValue[optionValueName];\r\n\r\n        if (defaultInputValue) {\r\n            this.ref.current.value = defaultInputValue;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        \r\n        const element = this.getEntityElement();\r\n        if (this.isNotReady()) {\r\n            return <div className=\"form-group\">Loading...</div>\r\n        }\r\n\r\n        const options = this.state.inputList;\r\n        return (<select ref={this.ref} className=\"form-control\" name={element.id} >\r\n            {options.map(option => {\r\n                const optionItemValue = element.optionValueName;\r\n                const optionItemName = element.optionItemName;\r\n                if (!optionItemName || !optionItemValue) { return null; }\r\n                return (\r\n                    <option key={\"fid-\"+uniqueId()+\"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                )\r\n            })}\r\n        </select>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDown))","\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nexport default class AnchorWithIcon extends Component<any, any>\r\n{\r\n    constructor(props: any) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const btnClassName = this.props.className ?? \"btn btn-outline-secondary\";\r\n        if (this.props.to) {\r\n            return <Link {...this.props.attributes} to={this.props.to} style={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight:  this.props.children?'5px':0 }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </Link>\r\n        }\r\n        return (\r\n            <a {...this.props.attributes} tyle={this.props.style} onClick={this.props.onClick} className={btnClassName} >\r\n                {this.props.iconClassName ?\r\n                    <span style={{ marginRight: '5px' }}><i className={this.props.iconClassName} /></span>\r\n                    :\r\n                    null}\r\n                {this.props.children}\r\n            </a>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment, MouseEventHandler } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport './TextEditor.css'\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport AnchorWithIcon from '../../../../navigation/AnchorWithIcon';\r\nimport BaseField from './BaseField';\r\nclass IState {\r\n    editMode: boolean = false;\r\n    fieldValue: string = \"\";\r\n    updated: boolean = false;\r\n}\r\nclass FormInputTextEditor extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    contentRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    } \r\n    formatDoc = (sCmd, sValue?) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc){\r\n            console.debug(\"oDOc is missing\");\r\n            return;\r\n        }\r\n        console.debug(\"commmand: \", sCmd);\r\n        if (this.validateMode()) { \r\n            const executed =  document.execCommand(sCmd, false, sValue); \r\n            console.debug(\"EXECUTED: \", executed, \" editable: \", oDoc.contentEditable);\r\n            oDoc.focus(); \r\n        }\r\n    }\r\n\r\n    validateMode = () => {\r\n        if (!this.state.editMode) { return true; }\r\n        alert(\"Uncheck \\\"Show HTML\\\".\");\r\n        if (this.contentRef.current) {\r\n            this.contentRef.current.focus();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setValue = (e) => {\r\n        if (this.contentRef.current) {\r\n            this.setState({fieldValue: this.contentRef.current.innerHTML, updated: true})\r\n        }\r\n       \r\n    }\r\n\r\n    setDocMode = (bToSource) => {\r\n        const oDoc = this.contentRef.current;\r\n        if (!oDoc) return;\r\n        var oContent;\r\n        if (bToSource) {\r\n            oContent = document.createTextNode(oDoc.innerHTML);\r\n            oDoc.innerHTML = \"\";\r\n            var oPre = document.createElement(\"pre\");\r\n            oDoc.contentEditable = \"false\";\r\n            oPre.id = \"sourceText\";\r\n            oPre.contentEditable = \"true\";\r\n            oPre.appendChild(oContent);\r\n            oDoc.appendChild(oPre);\r\n        } else {\r\n            if (document.all) {\r\n                oDoc.innerHTML = oDoc.innerText;\r\n            } else {\r\n                oContent = document.createRange();\r\n                oContent.selectNodeContents(oDoc.firstChild);\r\n                oDoc.innerHTML = oContent.toString();\r\n            }\r\n            oDoc.contentEditable = \"true\";\r\n        }\r\n        oDoc.focus();\r\n    }\r\n\r\n    printDoc = () => {\r\n        if (!this.validateMode()) { return; }\r\n        // var oPrntWin = window.open(\"\", \"_blank\", \"width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes\");\r\n        // oPrntWin.document.open();\r\n        // oPrntWin.document.write(\"<!doctype html><html><head><title>Print<\\/title><\\/head><body onload=\\\"print();\\\">\" + oDoc.innerHTML + \"<\\/body><\\/html>\");\r\n        // oPrntWin.document.close();\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.contentRef.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.contentRef.current.innerHTML = recordValue;\r\n        this.setState({fieldValue: recordValue, updated: true});\r\n    }\r\n         \r\n    componentDidUpdate(){\r\n        console.debug(\"component updated\");\r\n    }\r\n\r\n    setEditMode = (mode:boolean) => {\r\n        this.setDocMode(mode);\r\n        this.setState({ editMode: mode});\r\n    }\r\n    paleteCommand = (e:any ) => {\r\n        const anchor:HTMLAnchorElement = e.target as HTMLAnchorElement;\r\n        const commmand = anchor.dataset['command'];\r\n        const value = anchor.dataset['value'];\r\n        if (commmand == 'clean') {\r\n            this.clean();\r\n        } else {\r\n            this.formatDoc(commmand, value);\r\n        }\r\n    }\r\n    clean = () => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Clean content?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                if (app.contentRef.current) {\r\n                    app.contentRef.current.innerHTML = \"\";\r\n                }\r\n            }\r\n        })\r\n    }\r\n    contentOnChange = (e) => {\r\n       this.setState({updated: false});\r\n    } \r\n    render() {\r\n\r\n        const element = this.getEntityElement();\r\n        return (\r\n            <div>\r\n                <input type=\"hidden\" value={this.state.fieldValue} name={element.id} />\r\n                <div id=\"toolBar1\" className=\"input-group\">\r\n                    <FormattingList onChange={this.formatDoc} />\r\n                    <FontList onChange={this.formatDoc} />\r\n                    <FontSizeOption onChange={this.formatDoc} />\r\n                    <FontColorOption onChange={this.formatDoc} />\r\n                    <BackgroundColorOption onChange={this.formatDoc} />\r\n                </div>\r\n                <div id=\"toolBar2\">\r\n                    <i  onMouseDown={(e)=>e.preventDefault()} onClick={this.paleteCommand} data-command=\"clean\" className=\"palete fas fa-broom\"></i>\r\n                    {/* onClick=\"if(validateMode()&&confirm('Are you sure?')){oDoc.innerHTML=sDefTxt};\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQbAD04KTRLYzFRjlldZl9vj1dusY14WYODhpWIbbSVFY6O7IOXw5qbms+wUbCztca0ccS4kdDQjdTLtMrL1O3YitHa7OPcsd/f4PfvrvDv8Pv5xv///////////////////yH5BAEKAB8ALAAAAAAWABYAAAV84CeOZGmeaKqubMteyzK547QoBcFWTm/jgsHq4rhMLoxFIehQQSAWR+Z4IAyaJ0kEgtFoLIzLwRE4oCQWrxoTOTAIhMCZ0tVgMBQKZHAYyFEWEV14eQ8IflhnEHmFDQkAiSkQCI2PDC4QBg+OAJc0ewadNCOgo6anqKkoIQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-print \"></i>\r\n                    {/* onClick=\"printDoc();\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oEBxcZFmGboiwAAAAIdEVYdENvbW1lbnQA9syWvwAAAuFJREFUOMvtlUtsjFEUx//n3nn0YdpBh1abRpt4LFqtqkc3jRKkNEIsiIRIBBEhJJpKlIVo4m1RRMKKjQiRMJRUqUdKPT71qpIpiRKPaqdF55tv5vvusZjQTjOlseUkd3Xu/3dPzusC/22wtu2wRn+jG5So/OCDh8ycMJDflehMlkJkVK7KUYN+ufzA/RttH76zaVocDptRxzQtNi3mRWuPc+6cKtlXZ/sddP2uu9uXlmYXZ6Qm8v4Tz8lhF1H+zDQXt7S8oLMXtbF4e8QaFHjj3kbP2MzkktHpiTjp9VH6iHiA+whtAsX5brpwueMGdONdf/2A4M7ukDs1JW662+XkqTkeUoqjKtOjm2h53YFL15pSJ04Zc94wdtibr26fXlC2mzRvBccEbz2kiRFD414tKMlEZbVGT33+qCoHgha81SWYsew0r1uzfNylmtpx80pngQQ91LwVk2JGvGnfvZG6YcYRAT16GFtW5kKKfo1EQLtfh5Q2etT0BIWF+aitq4fDbk+ImYo1OxvGF03waFJQvBCkvDffRyEtxQiFFYgAZTHS0zwAGD7fG5TNnYNTp8/FzvGwJOfmgG7GOx0SAKKgQgDMgKBI0NJGMEImpGDk5+WACEwEd0ywblhGUZ4Hw5OdUekRBLT7DTgdEgxACsIznx8zpmWh7k4rkpJcuHDxCul6MDsmmBXDlWCH2+XozSgBnzsNCEE4euYV4pwCpsWYPW0UHDYBKSWu1NYjENDReqtKjwn2+zvtTc1vMSTB/mvev/WEYSlASsLimcOhOBJxw+N3aP/SjefNL5GePZmpu4kG7OPr1+tOfPyUu3BecWYKcwQcDFmwFKAUo90fhKDInBCAmvqnyMgqUEagQwCoHBDc1rjv9pIlD8IbVkz6qYViIBQGTJPx4k0XpIgEZoRN1Da0cij4VfR0ta3WvBXH/rjdCufv6R2zPgPH/e4pxSBCpeatqPrjNiso203/5s/zA171Mv8+w1LOAAAAAElFTkSuQmCC\"> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"undo\" className=\"palete fas fa-undo\"></i>\r\n                    {/* onClick=\"formatDoc('undo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKADljwliE33mOrpGjuYKl8aezxqPD+7/I19DV3NHa7P///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARR8MlJq7046807TkaYeJJBnES4EeUJvIGapWYAC0CsocQ7SDlWJkAkCA6ToMYWIARGQF3mRQVIEjkkSVLIbSfEwhdRIH4fh/DZMICe3/C4nBQBADs=\" /> */}\r\n                    <i  onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"redo\"  className=\"palete fas fa-redo\"></i>\r\n                    {/* onClick=\"formatDoc('redo');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAB1ChDljwl9vj1iE34Kl8aPD+7/I1////yH5BAEKAAcALAAAAAAWABYAAANKeLrc/jDKSesyphi7SiEgsVXZEATDICqBVJjpqWZt9NaEDNbQK1wCQsxlYnxMAImhyDoFAElJasRRvAZVRqqQXUy7Cgx4TC6bswkAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"removeFormat\" className=\"palete fas fa-times\"></i>\r\n                    {/* onClick=\"formatDoc('removeFormat')\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9oECQMCKPI8CIIAAAAIdEVYdENvbW1lbnQA9syWvwAAAuhJREFUOMtjYBgFxAB501ZWBvVaL2nHnlmk6mXCJbF69zU+Hz/9fB5O1lx+bg45qhl8/fYr5it3XrP/YWTUvvvk3VeqGXz70TvbJy8+Wv39+2/Hz19/mGwjZzuTYjALuoBv9jImaXHeyD3H7kU8fPj2ICML8z92dlbtMzdeiG3fco7J08foH1kurkm3E9iw54YvKwuTuom+LPt/BgbWf3//sf37/1/c02cCG1lB8f//f95DZx74MTMzshhoSm6szrQ/a6Ir/Z2RkfEjBxuLYFpDiDi6Af///2ckaHBp7+7wmavP5n76+P2ClrLIYl8H9W36auJCbCxM4szMTJac7Kza////R3H1w2cfWAgafPbqs5g7D95++/P1B4+ECK8tAwMDw/1H7159+/7r7ZcvPz4fOHbzEwMDwx8GBgaGnNatfHZx8zqrJ+4VJBh5CQEGOySEua/v3n7hXmqI8WUGBgYGL3vVG7fuPK3i5GD9/fja7ZsMDAzMG/Ze52mZeSj4yu1XEq/ff7W5dvfVAS1lsXc4Db7z8C3r8p7Qjf///2dnZGxlqJuyr3rPqQd/Hhyu7oSpYWScylDQsd3kzvnH738wMDzj5GBN1VIWW4c3KDon7VOvm7S3paB9u5qsU5/x5KUnlY+eexQbkLNsErK61+++VnAJcfkyMTIwffj0QwZbJDKjcETs1Y8evyd48toz8y/ffzv//vPP4veffxpX77z6l5JewHPu8MqTDAwMDLzyrjb/mZm0JcT5Lj+89+Ybm6zz95oMh7s4XbygN3Sluq4Mj5K8iKMgP4f0////fv77//8nLy+7MCcXmyYDAwODS9jM9tcvPypd35pne3ljdjvj26+H2dhYpuENikgfvQeXNmSl3tqepxXsqhXPyc666s+fv1fMdKR3TK72zpix8nTc7bdfhfkEeVbC9KhbK/9iYWHiErbu6MWbY/7//8/4//9/pgOnH6jGVazvFDRtq2VgiBIZrUTIBgCk+ivHvuEKwAAAAABJRU5ErkJggg==\"> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"bold\" className=\"palete fas fa-bold\"></i>\r\n                    {/* onClick=\"formatDoc('bold');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAInhI+pa+H9mJy0LhdgtrxzDG5WGFVk6aXqyk6Y9kXvKKNuLbb6zgMFADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"italic\" className=\"palete fas fa-italic\"></i>\r\n                    {/* onClick=\"formatDoc('italic');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKEDAAAAAF9vj5WIbf///yH5BAEAAAMALAAAAAAWABYAAAIjnI+py+0Po5x0gXvruEKHrF2BB1YiCWgbMFIYpsbyTNd2UwAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"underline\" className=\"palete fas fa-underline\"></i>\r\n                    {/* onClick=\"formatDoc('underline');\" src=\"data:image/gif;base64,R0lGODlhFgAWAKECAAAAAF9vj////////yH5BAEAAAIALAAAAAAWABYAAAIrlI+py+0Po5zUgAsEzvEeL4Ea15EiJJ5PSqJmuwKBEKgxVuXWtun+DwxCCgA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyleft\" className=\"palete fas fa-align-left\"></i>\r\n                    {/* onClick=\"formatDoc('justifyleft');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JMGELkGYxo+qzl4nKyXAAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifycenter\" className=\"palete fas fa-align-center\"></i>\r\n                    {/* onClick=\"formatDoc('justifycenter');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIfhI+py+0Po5y02ouz3jL4D4JOGI7kaZ5Bqn4sycVbAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"justifyright\" className=\"palete fas fa-align-right\"></i>\r\n                    {/* onClick=\"formatDoc('justifyright');\" src=\"data:image/gif;base64,R0lGODlhFgAWAID/AMDAwAAAACH5BAEAAAAALAAAAAAWABYAQAIghI+py+0Po5y02ouz3jL4D4JQGDLkGYxouqzl43JyVgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertorderedlist\" className=\"palete fas fa-list-ol\"></i>\r\n                    {/* onClick=\"formatDoc('insertorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAADljwliE35GjuaezxtHa7P///////yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKSespwjoRFvggCBUBoTFBeq6QIAysQnRHaEOzyaZ07Lu9lUBnC0UGQU1K52s6n5oEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"insertonorderedlist\" className=\"palete fas fa-list-ul\"></i>\r\n                    {/* onClick=\"formatDoc('insertunorderedlist');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIGAAAAAB1ChF9vj1iE33mOrqezxv///////yH5BAEAAAcALAAAAAAWABYAAAMyeLrc/jDKSesppNhGRlBAKIZRERBbqm6YtnbfMY7lud64UwiuKnigGQliQuWOyKQykgAAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"formatblock\" data-value=\"blockquote\" className=\"palete fas fa-quote-left\"></i>\r\n                    {/* onClick=\"formatDoc('formatblock','blockquote');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQXAC1NqjFRjkBgmT9nqUJnsk9xrFJ7u2R9qmKBt1iGzHmOrm6Sz4OXw3Odz4Cl2ZSnw6KxyqO306K63bG70bTB0rDI3bvI4P///////////////////////////////////yH5BAEKAB8ALAAAAAAWABYAAAVP4CeOZGmeaKqubEs2CekkErvEI1zZuOgYFlakECEZFi0GgTGKEBATFmJAVXweVOoKEQgABB9IQDCmrLpjETrQQlhHjINrTq/b7/i8fp8PAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"outdent\" className=\"palete\">+ Indentation</i>\r\n                    {/* onClick=\"formatDoc('outdent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAMIHAAAAADljwliE35GjuaezxtDV3NHa7P///yH5BAEAAAcALAAAAAAWABYAAAM2eLrc/jDKCQG9F2i7u8agQgyK1z2EIBil+TWqEMxhMczsYVJ3e4ahk+sFnAgtxSQDqWw6n5cEADs=\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"indent\" className=\"palete\">- Indentation</i>\r\n                    {/* onClick=\"formatDoc('indent');\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMIAAAAADljwl9vj1iE35GjuaezxtDV3NHa7P///////////////////////////////yH5BAEAAAgALAAAAAAWABYAAAQ7EMlJq704650B/x8gemMpgugwHJNZXodKsO5oqUOgo5KhBwWESyMQsCRDHu9VOyk5TM9zSpFSr9gsJwIAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  className=\"palete fas fa-link\"\r\n                    onClick={(e)=>{\r\n                        var sLnk=prompt('Write the URL here','http:\\/\\/');\r\n                        if(sLnk&&sLnk!=''&&sLnk!='http://'){\r\n                            this.formatDoc('createlink',sLnk);\r\n                        }\r\n                    }}\r\n                    ></i>\r\n                    {/* onClick=\"var sLnk=prompt('Write the URL here','http:\\/\\/');if(sLnk&&sLnk!=''&&sLnk!='http://'){formatDoc('createlink',sLnk)}\" src=\"data:image/gif;base64,R0lGODlhFgAWAOMKAB1ChDRLY19vj3mOrpGjuaezxrCztb/I19Ha7Pv8/f///////////////////////yH5BAEKAA8ALAAAAAAWABYAAARY8MlJq7046827/2BYIQVhHg9pEgVGIklyDEUBy/RlE4FQF4dCj2AQXAiJQDCWQCAEBwIioEMQBgSAFhDAGghGi9XgHAhMNoSZgJkJei33UESv2+/4vD4TAQA7\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"cut\" className=\"palete fas fa-cut\"></i>\r\n                    {/* onClick=\"formatDoc('cut');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQSAB1ChBFNsRJTySJYwjljwkxwl19vj1dusYODhl6MnHmOrpqbmpGjuaezxrCztcDCxL/I18rL1P///////////////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAVu4CeOZGmeaKqubDs6TNnEbGNApNG0kbGMi5trwcA9GArXh+FAfBAw5UexUDAQESkRsfhJPwaH4YsEGAAJGisRGAQY7UCC9ZAXBB+74LGCRxIEHwAHdWooDgGJcwpxDisQBQRjIgkDCVlfmZqbmiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"copy\" className=\"palete fas fa-copy\" ></i>\r\n                    {/* onClick=\"formatDoc('copy');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQcAB1ChBFNsTRLYyJYwjljwl9vj1iE31iGzF6MnHWX9HOdz5GjuYCl2YKl8ZOt4qezxqK63aK/9KPD+7DI3b/I17LM/MrL1MLY9NHa7OPs++bx/Pv8/f///////////////yH5BAEAAB8ALAAAAAAWABYAAAWG4CeOZGmeaKqubOum1SQ/kPVOW749BeVSus2CgrCxHptLBbOQxCSNCCaF1GUqwQbBd0JGJAyGJJiobE+LnCaDcXAaEoxhQACgNw0FQx9kP+wmaRgYFBQNeAoGihCAJQsCkJAKOhgXEw8BLQYciooHf5o7EA+kC40qBKkAAAGrpy+wsbKzIiEAOw==\" /> */}\r\n                    <i onMouseDown={(e)=>e.preventDefault()}  onClick={this.paleteCommand} data-command=\"paste\" className=\"palete fas fa-paste\"></i>\r\n                    {/* onClick=\"formatDoc('paste');\" src=\"data:image/gif;base64,R0lGODlhFgAWAIQUAD04KTRLY2tXQF9vj414WZWIbXmOrpqbmpGjudClFaezxsa0cb/I1+3YitHa7PrkIPHvbuPs+/fvrvv8/f///////////////////////////////////////////////yH5BAEAAB8ALAAAAAAWABYAAAWN4CeOZGmeaKqubGsusPvBSyFJjVDs6nJLB0khR4AkBCmfsCGBQAoCwjF5gwquVykSFbwZE+AwIBV0GhFog2EwIDchjwRiQo9E2Fx4XD5R+B0DDAEnBXBhBhN2DgwDAQFjJYVhCQYRfgoIDGiQJAWTCQMRiwwMfgicnVcAAAMOaK+bLAOrtLUyt7i5uiUhADs=\" /> */}\r\n                </div>\r\n                <div onInput={this.contentOnChange} className=\"container-fluid\" ref={this.contentRef} id=\"textBox\" contentEditable=\"true\"><p>Fill content</p></div>\r\n                <p/>\r\n                <AnchorWithIcon show={this.state.updated == false} style={{marginRight:'5px'}} iconClassName=\"fas fa-exclamation-circle\" className=\"btn btn-warning btn-sm\" onClick={this.setValue}>Update Content</AnchorWithIcon>\r\n                <AnchorWithIcon show={this.state.updated == true} style={{marginRight:'5px'}} iconClassName=\"fas fa-check\" className=\"btn btn-primary btn-sm\"  >Content Updated</AnchorWithIcon>\r\n\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(false)} show={this.state.editMode == true} >Hide Html</AnchorWithIcon>\r\n                <AnchorWithIcon className=\"btn btn-secondary btn-sm\" attributes={{onMouseDown:(e)=>e.preventDefault()}} onClick={(e)=>this.setEditMode(true)} show={this.state.editMode == false} >Show Html</AnchorWithIcon>\r\n            </div>\r\n             \r\n        )\r\n    }\r\n}\r\nconst FontSizeOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"fontsize\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('fontsize',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value =\"-\" className=\"heading\" selected>- size -</option>\r\n            <option value=\"1\">Very small</option>\r\n            <option value=\"2\">A bit small</option>\r\n            <option value=\"3\">Normal</option>\r\n            <option value=\"4\">Medium-large</option>\r\n            <option value=\"5\">Big</option>\r\n            <option value=\"6\">Very big</option>\r\n            <option value=\"7\">Maximum</option>\r\n        </select>\r\n    )\r\n}\r\nconst BackgroundColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\"\r\n            onChange={\r\n                (e) => {\r\n                    const t = e.target;\r\n                    props.onChange(\"backcolor\", t.value);\r\n                    t.value = \"-\";\r\n                }}>\r\n            {/* onChange=\"formatDoc('backcolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" className=\"heading\" selected>- background -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontColorOption = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"forecolor\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('forecolor',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option className=\"heading\" value=\"-\" selected>- color -</option>\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"blue\">Blue</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"black\">Black</option>\r\n        </select>\r\n    )\r\n}\r\nconst FormattingList = (props: { onChange: Function }) => {\r\n    return (\r\n        <select className=\"form-control\" onChange={\r\n            (e) => {\r\n                const t = e.target;\r\n                props.onChange(\"formatblock\", t.value);\r\n                t.value = \"-\";\r\n            }\r\n        }>\r\n            {/* onChange=\"formatDoc('formatblock',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n            <option value=\"-\" selected>- formatting -</option>\r\n            <option value=\"h1\">Title 1 &lt;h1&gt;</option>\r\n            <option value=\"h2\">Title 2 &lt;h2&gt;</option>\r\n            <option value=\"h3\">Title 3 &lt;h3&gt;</option>\r\n            <option value=\"h4\">Title 4 &lt;h4&gt;</option>\r\n            <option value=\"h5\">Title 5 &lt;h5&gt;</option>\r\n            <option value=\"h6\">Subtitle &lt;h6&gt;</option>\r\n            <option value=\"p\">Paragraph &lt;p&gt;</option>\r\n            <option value=\"pre\">Preformatted &lt;pre&gt;</option>\r\n        </select>\r\n    )\r\n}\r\nconst FontList = (props: { onChange: Function }) => {\r\n    return (<select className=\"form-control\" onChange={\r\n        (e) => {\r\n            const t = e.target;\r\n            props.onChange(\"fontname\", t.value);\r\n            t.value = \"-\";\r\n        }\r\n    }>\r\n        {/* onChange=\"formatDoc('fontname',this[this.selectedIndex].value);this.selectedIndex=0;\"> */}\r\n        <option value=\"-\" className=\"heading\" selected>- font -</option>\r\n        <option value=\"Arial\">Arial</option>\r\n        <option value=\"Arial Black\">Arial Black</option>\r\n        <option value=\"Courier New\">Courier New</option>\r\n        <option value=\"Times New Roman\">Times New Roman</option>\r\n    </select>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputTextEditor))","import React, { Component, Fragment }  from 'react';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport BaseField from './BaseField';\r\n\r\n\r\nexport default class FormInputCheckbox extends BaseField {\r\n    state = {\r\n        checked: false\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    prepopulateForm = () => {\r\n         \r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        \r\n        if (!recordValue) return;\r\n        \r\n        this.setState({ checked: recordValue == true })\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement();\r\n        const checked: boolean = this.state.checked;\r\n        return (\r\n            <Fragment>\r\n                <input type=\"hidden\" name={element.id} value={checked ? 'true' : 'false'} />\r\n                <div className=\"btn-group\">\r\n                    <a className={checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: true })} >Yes</a>\r\n                    <a className={!checked?\"btn btn-dark\":\"btn btn-light\"} onClick={(e) => this.setState({ checked: false })} >No</a>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n","import { join } from \"path\";\r\nimport { twoDigits } from \"./StringUtil\";\r\n\r\nexport const MONTHS = [\r\n    \"Januari\",\r\n    \"Februari\",\r\n    \"Maret\",\r\n    \"April\",\r\n    \"Mei\",\r\n    \"Juni\",\r\n    \"Juli\",\r\n    \"Ahustus\",\r\n    \"September\",\r\n    \"Oktober\",\r\n    \"November\",\r\n    \"Desember\"\r\n]\r\n\r\nconst leapMonths = [ 31, (  29  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nconst regularMonths = [ 31, (  28  ), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\n/**\r\n * \r\n * @param {Number} month starts at 0\r\n */\r\nexport const getCurrentMonthDays = (month:number) : number=> {\r\n    if(new Date().getFullYear() % 4 == 0){\r\n        return leapMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\nexport const getMonthDays = (month:number, year:number) : number=> {\r\n    if(year % 4 == 0){\r\n        return leapMonths[month];\r\n    }\r\n    return regularMonths[month];\r\n}\r\n\r\nexport const getTime = (d:Date) => {\r\n\r\n    return [\r\n        twoDigits(d.getHours()),\r\n        twoDigits(d.getMinutes()),\r\n        twoDigits(d.getSeconds())\r\n    ].join(\":\");\r\n}\r\n\r\nexport const getInputReadableDate = (date:Date) :string => {\r\n    const year = date.getFullYear();\r\n\r\n    const arr = [year, twoDigits(date.getMonth()+1), twoDigits(date.getDate())];\r\n    return arr.join(\"-\");\r\n}\r\nexport function addDays(date:Date, days:number) :Date{\r\n    const result:Date = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n  }\r\n  export const getDiffDays = (a:Date, b:Date) : number => {\r\n    // Discard the time and time-zone information.\r\n\r\n    console.debug(\"DIFF DATE \",a,\" vs \", b);\r\n    const _MS_PER_DAY = 1000 * 60 * 60 * 24;\r\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\r\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate()); \r\n    return Math.floor((utc2 - utc1) / _MS_PER_DAY);\r\n}\r\n\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { FieldType } from '../../../../../models/FieldType';\r\nimport { getInputReadableDate } from '../../../../../utils/DateUtil';\r\nimport BaseField from './BaseField';\r\n\r\nexport default class FormInputCommon extends BaseField {\r\n    ref: React.RefObject<any> = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const element = this.getEntityElement();\r\n        const fieldName = element.id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (undefined == recordValue) {\r\n            console.debug(fieldName, \" is undefined\", this.props.recordToEdit, this.props.recordToEdit[fieldName]);\r\n            return;\r\n        }\r\n\r\n        const fieldType: FieldType = element.fieldType;\r\n        let defaultInputValue: any = undefined;\r\n        switch (fieldType) {\r\n            case FieldType.FIELD_TYPE_DATE:\r\n                const dateObj = new Date(recordValue);\r\n                if (!dateObj) { break }\r\n                defaultInputValue = getInputReadableDate(dateObj);\r\n                break;\r\n            case FieldType.FIELD_TYPE_NUMBER:\r\n                defaultInputValue = new String(recordValue);\r\n                break;\r\n            default:\r\n                defaultInputValue = recordValue;\r\n                break;\r\n        }\r\n        if (defaultInputValue) {\r\n\r\n            if (element.optionItemName && element.optionItemName != \"\") {\r\n                const valueAsObj = defaultInputValue;\r\n                this.ref.current.value = valueAsObj[element.optionItemName ?? \"id\"];\r\n            } else {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const requiredAttr = this.getRequiredAttr();\r\n        if (element.identity == true || element.editable == false) {\r\n            return (<input {...requiredAttr} value=\"Generated\" ref={this.ref} className=\"form-control\" name={element.id} disabled />\r\n            )\r\n        }\r\n        let input = <p>{element.fieldType}</p>;\r\n        switch (element.fieldType) {\r\n            case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n                input = (\r\n                    <select  {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                        {element.plainListValues.map((value, i) => {\r\n                            return (\r\n                                <option key={\"s-\" + element.id + '-o-' + i} value={value}>{value}</option>\r\n                            )\r\n                        })}\r\n                    </select>\r\n                )\r\n                break;\r\n            case FieldType.FIELD_TYPE_TEXTAREA:\r\n                input = <textarea {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            case FieldType.FIELD_TYPE_NUMBER:\r\n                input = <input type={element.type} step={0.001} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n                break;\r\n            default:\r\n                input = <input type={element.type} {...requiredAttr} ref={this.ref} className=\"form-control\" name={element.id} />\r\n\r\n        }\r\n        return input;\r\n\r\n    }\r\n}","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../../constant/stores';\r\nimport MasterDataService from '../../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../../models/common/WebResponse';\r\nimport BaseComponent from '../../../../BaseComponent';\r\nimport { uniqueId } from '../../../../../utils/StringUtil';\r\nimport BaseField from './BaseField';\r\nimport AnchorWithIcon from './../../../../navigation/AnchorWithIcon';\r\nimport WebRequest from '../../../../../models/common/WebRequest';\r\nclass IState {\r\n    inputList: any[] = [];\r\n    searchValue: string = \"\"\r\n}\r\nclass FormInputDropDownDynamic extends BaseField {\r\n    masterDataService: MasterDataService;\r\n    state: IState = new IState();\r\n    ref: React.RefObject<any> = React.createRef();\r\n    inputRef: React.RefObject<HTMLDivElement> = React.createRef();\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n\r\n    inputListLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            throw new Error(this.getEntityElement().labelName+\" Not found\");\r\n        }\r\n        this.setState({ inputList: response.entities }, ()=> {\r\n            if(this.inputRef.current) {\r\n                this.inputRef.current.focus();\r\n            }\r\n        });\r\n    }\r\n    loadInputList = () => {\r\n        const element = this.getEntityElement();\r\n\r\n        const code = element.entityReferenceClass;\r\n        const searchKey = element.optionItemName;\r\n        if (!searchKey)  { return; }\r\n        const request: WebRequest = {\r\n            entity: code,\r\n            filter: {\r\n                limit: 0, page: 0,\r\n                fieldsFilter: {\r\n                    [searchKey]:this.inputRef.current?.innerHTML\r\n                }\r\n            }\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadItems,\r\n            this.inputListLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        )\r\n    }\r\n\r\n    prepopulateForm = () => {\r\n        if (!this.props.recordToEdit || !this.ref.current) {\r\n            return;\r\n\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        if (!recordValue) return;\r\n        this.setState({inputList:[recordValue], searchValue: \"\"} , ()=>{\r\n            let defaultInputValue = undefined;\r\n            const optionValueName = this.getEntityElement().optionValueName;\r\n            if (!optionValueName) return;\r\n            defaultInputValue = recordValue[optionValueName]; \r\n            if (defaultInputValue) {\r\n                this.ref.current.value = defaultInputValue;\r\n            }\r\n        });\r\n    }\r\n\r\n    search = (event) => {\r\n        if(event.keyCode == 13) {\r\n            if (this.inputRef.current) {\r\n                const div = this.inputRef.current;\r\n                div.innerHTML = new String(div.innerText).trim();\r\n            }\r\n            event.preventDefault();\r\n            this.loadInputList();\r\n            return false;\r\n          }\r\n    }\r\n\r\n    render() {\r\n        const element = this.getEntityElement();\r\n        const optionItemValue = element.optionValueName;\r\n        const optionItemName = element.optionItemName;\r\n        const options = this.state.inputList;\r\n        console.debug(\"options: \", options);\r\n        const placeholder:string =   element.entityReferenceClass + \" \"+ optionItemName;\r\n        return (\r\n            <div>\r\n                <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-append\">\r\n                        <span className=\"input-group-text\">{placeholder}</span>\r\n                    </div>\r\n                    <div onKeyDown={this.search} ref={this.inputRef} contentEditable={true} className=\"form-control\" ></div>\r\n                   \r\n                    <div className=\"input-group-append\">\r\n                        <AnchorWithIcon onClick={this.loadInputList} className=\"btn btn-secondary\" children=\"Search\"/>\r\n                        <AnchorWithIcon show={this.props.recordToEdit != undefined} onClick={this.prepopulateForm} iconClassName=\"fas fa-sync-alt\" className=\"btn btn-secondary\"/>\r\n          \r\n                    </div>\r\n                </div>\r\n                <select  {...this.getRequiredAttr()} ref={this.ref} className=\"form-control\" name={element.id} >\r\n                    {options.map(option => {\r\n                        if (!optionItemName || !optionItemValue) { return null; }\r\n                        return (\r\n                            <option key={\"fid-\" + uniqueId() + \"-\"} value={option[optionItemValue]} >{option[optionItemName]}</option>\r\n                        )\r\n                    })}\r\n                </select>\r\n                  </div>)\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputDropDownDynamic))","\r\nimport React, { Component } from 'react';\r\nexport default class FormGroup extends Component<any, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        const orientation = this.props.orientation == 'vertical' ? 'vertical' : 'horizontal';\r\n        return (\r\n            <div style={this.props.style} className={\"form-group \"+ this.props.className+ \" \" + (orientation == 'vertical' ? '' : 'row')}>\r\n                <label className={(orientation == 'vertical' ? '' : 'col-sm-3')}><strong>{this.props.label ? this.props.label : null}</strong></label>\r\n                <div className={(orientation == 'vertical' ? '' : 'col-sm-9')}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React,{ Component, ChangeEvent } from 'react';\nimport { twoDigits } from './../../utils/StringUtil';\ninterface Props{\n    onChange(h:number,m:number,s:number):any,\n    value:string,\n}\nclass State {\n    hour:number = new Date().getHours();\n    minute:number = new Date().getMinutes();\n    second:number = new Date().getSeconds();\n}\nconst hours:number[] = [\n    0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,\n];\nconst minutesOrSeconds = ()  : number[]=> {\n    const arr:number[]=  [];\n    for (let i = 1; i < 60; i++) {\n        arr.push(i);   \n    }\n    return arr; \n}\nexport default class InputTime extends Component<Props, any> {\n    state:State = new State();\n    minutes:number[];\n    seconds:number[] ;\n    constructor (props) {\n        super(props);\n        this.minutes = minutesOrSeconds();\n        this.seconds = minutesOrSeconds();\n    }\n    setDefaultValue = () => {\n        try {\n            const val = this.props.value.split(\":\");\n            this.setState({hour: parseInt(val[0]), minute: parseInt(val[1]), second: parseInt(val[2])});\n        } catch (error) {\n            \n        }\n    }\n    updateValue = (e:ChangeEvent) => {\n        const target = e.target as HTMLSelectElement;\n        if (target) {\n            const name = target.name;\n            this.setState({[name]: target.value}, this.onChange);\n        }\n        \n    }\n    setNow = () => {\n        const date = new Date();\n        this.setState({\n            hour: date.getHours(),\n            minute: date.getMinutes(),\n            second: date.getSeconds()\n        }, this.onChange)\n    }\n    onChange = () => {\n        this.props.onChange(this.state.hour, this.state.minute, this.state.second)\n    }\n    render() {\n         \n        return (<div className=\"form-control bg-light\">\n            <select name=\"hour\" style={{border:'none'}} value={this.state.hour} onChange={this.updateValue} >\n                {hours.map((hour)=>{\n                    return <option key={\"HOUR-\"+hour} value={hour} >{twoDigits(hour)}</option>\n                })}\n            </select>\n            <select name=\"minute\" style={{border:'none'}}  value={this.state.minute} onChange={this.updateValue}>\n                {this.minutes.map((min)=>{\n                    return <option key={\"MIN-\"+min} value={min} >{twoDigits(min)}</option>\n                })}\n            </select>\n            <select name=\"second\" style={{border:'none'}}  value={this.state.second} onChange={this.updateValue}>\n                {this.seconds.map((sec)=>{\n                    return <option key={\"SEC-\"+sec} value={sec} >{twoDigits(sec)}</option>\n                })}\n            </select>\n            <a style={{marginLeft: 5}}  onClick={this.setNow} ><i className=\"fas fa-history\"/></a>\n        </div>)\n    }\n}","import React, { ChangeEvent, Component } from 'react'\nimport { twoDigits } from '../../utils/StringUtil';\nimport { getInputReadableDate, getTime } from './../../utils/DateUtil';\nimport InputTime from './InputTime';\ninterface Props {\n    onChange(date: Date): any,\n    value: Date,\n}\nlet d = new Date();\n\nexport default class InputDateTime extends Component<Props, any>{\n    timeRef:React.RefObject<InputTime> = React.createRef();\n    constructor(props) {\n        super(props);\n\n    }\n    updateTime = (h: number, m: number, s: number) => {\n        const time = [twoDigits(h), twoDigits[m], twoDigits(s)].join(\":\");\n        const date = this.props.value;\n        date.setHours(h);\n        date.setMinutes(m);\n        date.setSeconds(s);\n        date.setMilliseconds(0);\n        this.setState({\n            date: date\n        }, () => {\n            this.props.onChange(this.props.value);\n        });\n    }\n    updateDate = (e: ChangeEvent) => {\n        const target = e.target as HTMLInputElement;\n        const inputDate = new Date(target.value);\n\n        const date = this.props.value;\n        date.setDate(inputDate.getDate());\n        date.setMonth(inputDate.getMonth());\n        date.setFullYear(inputDate.getFullYear());\n        this.setState({\n            date: date\n        }, () => {\n            this.props.onChange(this.props.value);\n        });\n    }\n    componentDidUpdate(){\n        if (this.timeRef.current) {\n            this.timeRef.current.setDefaultValue();\n        }\n    }\n    render() {\n        const date = this.props.value;\n        return (\n            <div className=\"row\">\n                <div className=\"col-md-1 text-center d-flex align-items-center\"><i className=\"far fa-calendar-alt\"/></div>\n                <div className=\"col-md-5\">\n                    <input onChange={this.updateDate} className=\"form-control\" value={getInputReadableDate(date)} type=\"date\" />\n                </div>\n                <div className=\"col-md-1 text-center d-flex align-items-center\"><i className=\"far fa-clock\"/></div>\n                <div className=\"col-md-5\">\n                    <InputTime ref={this.timeRef} value={getTime(date)} onChange={this.updateTime} />\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component, Fragment }  from 'react';\r\nimport EntityElement from '../../../../../models/settings/EntityElement';\r\nimport BaseField from './BaseField';\r\nimport InputDateTime from './../../../../form/InputDateTime';\r\n\r\n\r\nexport default class FormInputDateTime extends BaseField {\r\n    state = {\r\n        checked: false,\r\n        value: new Date()\r\n    }\r\n    inputRef:React.RefObject<InputDateTime> = React.createRef();\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    prepopulateForm = () => {\r\n         \r\n        if (!this.props.recordToEdit) {\r\n            return;\r\n        }\r\n        const fieldName = this.getEntityElement().id;\r\n        let recordValue = this.props.recordToEdit[fieldName];\r\n        \r\n        if (!recordValue) return;\r\n        \r\n        this.setState({ value: new Date(recordValue) }, ()=>{\r\n            // if (this.inputRef.current) {\r\n            //     this.inputRef.current.\r\n            // }\r\n        })\r\n    }\r\n    onChange = (date:Date) => {\r\n        this.setState({value:date});\r\n    }\r\n    render() {\r\n        const element: EntityElement = this.getEntityElement(); \r\n        console.debug(\"Date time value: \", this.state.value);\r\n        return (\r\n            <Fragment>\r\n                <input type=\"hidden\" name={element.id} value={this.state.value.getTime()} />\r\n                <InputDateTime ref={this.inputRef} onChange={this.onChange} value={this.state.value}/>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\n","\r\n\r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputImage from './fields/FormInputImage';\r\nimport FormInputImageMultiple from './fields/FormInputImageMultiple';\r\nimport BaseComponent from './../../../BaseComponent';\r\nimport FormInputDropDown from './fields/FormInputDropDown';\r\nimport FormInputTextEditor from './fields/FormInputTextEditor';\r\nimport FormInputCheckbox from './fields/FormInputCheckBox';\r\nimport FormInputCommon from './fields/FormInputCoomon';\r\nimport FormInputDropDownDynamic from './fields/FormInputDropDownDynamic';\r\nimport FormGroup from './../../../form/FormGroup';\r\nimport FormInputDateTime from './fields/FormInputDateTime';\r\n\r\nclass FormInputField extends BaseComponent {\r\n\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    getEntityElement = (): EntityElement => {\r\n        return this.props.entityElement;\r\n    }\r\n    render() {\r\n        const element = this.getEntityElement();\r\n\r\n        let input: JSX.Element = <p>{element.fieldType}</p>;\r\n        if (element.editable) {\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                    input = <FormInputDropDownDynamic recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    input = <FormInputDropDown recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_TEXTEDITOR:\r\n                    input = <FormInputTextEditor recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    input = element.multiple ?\r\n                        <FormInputImageMultiple recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                        :\r\n                        <FormInputImage recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_CHECKBOX:\r\n                    input = <FormInputCheckbox recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DATETIME:\r\n                    input = <FormInputDateTime recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n                    break;\r\n                case FieldType.FIELD_TYPE_PLAIN_LIST:\r\n                case FieldType.FIELD_TYPE_TEXTAREA:\r\n                default:\r\n                    input = <FormInputCommon recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n            }\r\n        } else {\r\n            input = <FormInputCommon recordToEdit={this.props.recordToEdit} entityElement={element} />\r\n        }\r\n        const formLabel = <span>{element.labelName}\r\n            {element.editable && element.required ? <i className=\"text-danger\">*</i> : null}</span>\r\n        return <FormGroup orientation='vertical' label={formLabel}>          {input}\r\n        </FormGroup>\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(FormInputField))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport EntityProperty from '../../../../models/settings/EntityProperty';\r\nimport EntityElement from '../../../../models/settings/EntityElement';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport WebResponse from '../../../../models/common/WebResponse'; \r\nimport { FieldType } from '../../../../models/FieldType';\r\nimport FormInputField from './FormInputField';\r\n\r\nclass MasterDataForm extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    editMode:boolean = false;\r\n    recordToEdit?:{} = undefined;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        if (props.recordToEdit) {\r\n            this.editMode = true;\r\n            this.recordToEdit = props.recordToEdit;\r\n        }\r\n    }\r\n    \r\n    getEntityProperty(): EntityProperty {\r\n        return this.props.entityProperty;\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.getEntityProperty().editable == false || this.getEntityProperty().creatable == false) {\r\n            this.props.onClose();\r\n        }\r\n    }\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        const form = e.target, app = this;\r\n        this.showConfirmation(\"Save data?\")\r\n            .then(function (ok) {\r\n                if (ok) { app.submit(form) }\r\n            });\r\n    }\r\n    getEntityElement(key:string) :EntityElement |undefined {\r\n        return EntityProperty.getEntityElement(this.getEntityProperty(), key);\r\n    }\r\n    submit = (form: HTMLFormElement) => {\r\n        const formData: FormData = new FormData(form);\r\n        const object: {} = {};\r\n        const promises: Promise<any>[] = new Array();\r\n        const nulledFields:any[] = [];\r\n        let hasImageField:boolean = false;\r\n\r\n        formData.forEach((value, key) => {\r\n            console.debug(\"Form data \", key);\r\n            if (!object[key]) {\r\n                object[key] = new Array();\r\n            }\r\n            const element:EntityElement|undefined = this.getEntityElement(key);\r\n            if (!element) return false;\r\n            switch (element.fieldType) {\r\n                case FieldType.FIELD_TYPE_CHECKBOX:\r\n                    object[key].push(value == \"true\");\r\n                    break;\r\n                case FieldType.FIELD_TYPE_DYNAMIC_LIST:\r\n                case FieldType.FIELD_TYPE_FIXED_LIST:\r\n                    const valueAttr = element.optionValueName;\r\n                    if (valueAttr) {\r\n                        object[key].push({ [valueAttr]: value })\r\n                    }\r\n                    break;\r\n                case FieldType.FIELD_TYPE_IMAGE:\r\n                    console.debug(key, \" is image\");\r\n                    if (value == \"NULLED\") {\r\n                        console.debug(\"NULLED VALUE ADDED: \", key);\r\n                        nulledFields.push(key);\r\n                    } else {\r\n                        if (new String(value).startsWith(\"data:image\")) {\r\n                            hasImageField = true;\r\n                        }\r\n                        object[key].push(value);\r\n                    }\r\n                    break;\r\n                default:\r\n                    object[key].push(value);\r\n                    break;\r\n            }\r\n            return true;\r\n            \r\n        });  \r\n        Promise.all(promises).then( (val) => {\r\n            const objectPayload = this.generateRequestPayload(object, nulledFields);\r\n            console.debug(\"Record object to save: \", objectPayload, \"realtimeProgress: \", hasImageField);\r\n            this.ajaxSubmit(objectPayload, hasImageField);\r\n        });\r\n        \r\n    }\r\n\r\n    generateRequestPayload = (rawObject: {}, nulledFields:any[]): {} => { \r\n        const result:{nulledFields:Array<any>} = this.editMode && this.recordToEdit? \r\n        {...this.recordToEdit, nulledFields:nulledFields} : \r\n        {nulledFields:new Array() };\r\n        for (const key in rawObject) {\r\n            const element: any[] = rawObject[key];\r\n            // console.debug(key, \" length: \", element.length);\r\n            if (element.length == 1) {\r\n                result[key] = element[0];\r\n            } else if (element.length > 1) {\r\n                result[key] = element.join(\"~\");\r\n            }\r\n        }\r\n        result.nulledFields = nulledFields;\r\n        return result;\r\n    }\r\n\r\n    ajaxSubmit = (object: any, realtimeProgress: boolean) => {\r\n        if (this.getEntityProperty().withProgressWhenUpdated == true || realtimeProgress){\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        } else{\r\n            this.commonAjax(\r\n                this.masterDataService.save, this.recordSaved, this.showCommonErrorAlert,\r\n                this.getEntityProperty().entityName, object, this.editMode\r\n            )\r\n        }\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record saved\");\r\n    }\r\n    render() {\r\n        const entityProperty: EntityProperty = this.getEntityProperty();\r\n\r\n        const editModeStr = this.editMode ?  <span className=\"badge badge-warning\">Edit Mode</span>:\"\"\r\n        return ( \r\n            <div id=\"MasterDataForm\" >\r\n                <AnchorButton style={{ marginBottom: '5px' }} onClick={this.props.onClose} iconClassName=\"fas fa-angle-left\">Back</AnchorButton>\r\n                <form onSubmit={this.onSubmit} id=\"record-form\">\r\n                <Modal title={<span>{entityProperty.alias} Record Form {editModeStr}</span>} footerContent={<SubmitReset />}>\r\n                        <InputFields app={this.parentApp} recordToEdit={this.recordToEdit}  entityProperty={entityProperty} />\r\n                    </Modal>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst SubmitReset = (props) => {\r\n    return (\r\n        <div className=\"btn-group\">\r\n            <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n            <input type=\"reset\" className=\"btn btn-warning\" />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst InputFields = (props: { app: any, entityProperty: EntityProperty, recordToEdit:{}|undefined }) => {\r\n    const elements: EntityElement[] = props.entityProperty.elements;\r\n    const groupedElements: Array<Array<EntityElement>> = new Array();\r\n    let counter: number = 0;\r\n    const hasTextEditor = EntityProperty.hasTextEditorField(elements);\r\n    groupedElements.push(new Array());\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        if (!hasTextEditor && i > 0 && i % 5 == 0) {\r\n            counter++;\r\n            groupedElements.push(new Array());\r\n        }\r\n        groupedElements[counter].push(element);\r\n    }\r\n    return (\r\n        <div className=\"row\">\r\n            {groupedElements.map((elements, ei) => {\r\n                return (\r\n                    <div key={\"GROUPED_ELEMENT_\"+ei} className={hasTextEditor?\"col-lg-12\":\"col-lg-6\"}>\r\n                        {elements.map(element => {\r\n                            const key = \"form-input-for-\"+props.entityProperty.entityName+element.id;\r\n                            return <FormInputField key={key} recordToEdit={props.recordToEdit} entityElement={element} />\r\n                        })}\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(mapCommonUserStateToProps)(MasterDataForm))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport ExternalEditForm from './ExternalEditForm';\r\n\r\nclass EditDeleteAction extends BaseComponent {\r\n    masterDataService:MasterDataService;\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    delete = (e) => {\r\n        const app = this;\r\n        this.showConfirmationDanger(\"Delete record?\")\r\n        .then(function(ok){\r\n            if (ok) {\r\n                app.doDelete();\r\n            }\r\n        });\r\n    }\r\n    doDelete = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n        if (entityProperty.withProgressWhenUpdated) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        } else { \r\n            this.commonAjax(\r\n                this.masterDataService.delete,\r\n                this.recordDeleted,\r\n                this.showCommonErrorAlert,\r\n                entityProperty.entityName, recordId\r\n            )\r\n        }\r\n    }\r\n    getRecordById = () => {\r\n        const record = this.props.record;\r\n        const entityProperty:EntityProperty = this.props.entityProperty;\r\n        const recordId = EntityProperty.getRecordId(record, entityProperty);\r\n     \r\n        this.commonAjax(\r\n            this.masterDataService.getById,\r\n            this.recordLoaded,\r\n            this.showCommonErrorAlert,\r\n            entityProperty.entityName,\r\n            recordId\r\n        );\r\n    }\r\n    recordLoaded = (response:WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0){\r\n            throw new Error(\"Record not found\");\r\n        }\r\n        if(this.props.showEditForm) {\r\n            this.props.showEditForm(response);\r\n        }\r\n    }\r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record deleted\");\r\n        this.props.reload();\r\n    }\r\n    render() {\r\n        const property:EntityProperty = this.props.entityProperty;\r\n        if (property.editable == false) return null;\r\n        return (\r\n           <Fragment>\r\n              \r\n                <AnchorButton onClick={this.getRecordById} iconClassName=\"fas fa-edit\" className=\"btn btn-warning btn-sm\"></AnchorButton>\r\n                <AnchorButton show={property.deletable == true} onClick={this.delete} className=\"btn btn-danger btn-sm\" iconClassName=\"fas fa-times\"></AnchorButton>\r\n            </Fragment>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditDeleteAction))","\r\nimport React, { ChangeEvent, Component, Fragment } from 'react';\r\nimport HeaderProps from '../../../models/common/HeaderProps';\r\ninterface IProps {\r\n    fieldsFilter: any,\r\n    orderButtonOnClick(e: any): void,\r\n    filterOnChange(e: any): void,\r\n    headerProps: HeaderProps[],\r\n}\r\nexport default class DataTableHeader extends Component<IProps, any>\r\n{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    render() {\r\n\r\n        const props = this.props;\r\n        const headerProps: HeaderProps[] = props.headerProps;\r\n        const fieldsFilter = props.fieldsFilter;\r\n        return (<thead>\r\n            <tr>\r\n                <th>No</th>\r\n                {headerProps.map((headerProp, i) => {\r\n                    const isDate = headerProp.filterable && headerProp.isDate;\r\n                    const headerName = headerProp.value;\r\n                    const k = \"dth-\" + i + \"-\" + headerName;\r\n                    if (!headerProp.filterable && !headerProp.orderable) {\r\n                        return <th key={k} ><p children={headerProp.label} /></th>\r\n                    }\r\n                    const className = \"form-control input-filter\";\r\n                    return (\r\n                        <th key={k} >\r\n                            <p children={headerProp.label} />\r\n                            <div style={{ minWidth: '200px' }} className=\"input-group\">\r\n                                {isDate ?\r\n                                    <FilterDate headerName={headerName} fieldsFilter={fieldsFilter} filterClass={className} onChange={props.filterOnChange} />\r\n                                    :\r\n                                    headerProp.filterable ?\r\n                                        <input key={\"filter-common-\" + headerName} autoComplete=\"off\" value={fieldsFilter[headerName] ?? \"\"} onChange={props.filterOnChange} placeholder={headerProp.label}\r\n                                            className={className} name={headerName} />\r\n                                        : null\r\n                                }\r\n                                <SortButton show={headerProp.orderable} headerName={headerName} onClick={props.orderButtonOnClick} />\r\n\r\n                            </div>\r\n                        </th>\r\n                    )\r\n                })}\r\n                <th>Action</th>\r\n            </tr>\r\n        </thead>)\r\n    }\r\n}\r\n\r\nconst FilterDate = (props: { headerName: string, fieldsFilter: {}, filterClass: string, onChange(e: ChangeEvent): any }) => {\r\n    const headerName = props.headerName;\r\n    const className = props.filterClass;\r\n    const fieldsFilter = props.fieldsFilter;\r\n    return (\r\n        <Fragment>\r\n            <input key={\"filter-day-\" + headerName} autoComplete=\"off\" value={fieldsFilter[headerName + \"-day\"] ?? \"\"} onChange={props.onChange} name={headerName + \"-day\"}\r\n                className={className} placeholder={\"day\"} />\r\n            <input key={\"filter-month-\" + headerName} autoComplete=\"off\" value={fieldsFilter[headerName + \"-month\"] ?? \"\"} onChange={props.onChange} name={headerName + \"-month\"}\r\n                className={className} placeholder={\"month\"} />\r\n            <input key={\"filter-year-\" + headerName} autoComplete=\"off\" value={fieldsFilter[headerName + \"-year\"] ?? \"\"} onChange={props.onChange} name={headerName + \"-year\"}\r\n                className={className} placeholder={\"year\"} />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nconst SortButton = (props: { show: boolean, onClick(e: any): any, headerName: string }) => {\r\n    if (props.show != true) return null;\r\n    const headerName = props.headerName;\r\n    return (\r\n        <div className=\"input-group-append btn-group\">\r\n            <button data-ordertype=\"asc\" onClick={props.onClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                <i data-ordertype=\"asc\" onClick={props.onClick} data-orderby={headerName} className=\"fas fa-angle-up\" /></button>\r\n            <button data-ordertype=\"desc\" onClick={props.onClick} data-orderby={headerName} className=\"btn btn-outline-secondary btn-sm\">\r\n                <i data-ordertype=\"desc\" onClick={props.onClick} data-orderby={headerName} className=\"fas fa-angle-down\" /></button>\r\n        </div>\r\n    )\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleError extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div className=\"alert alert-danger\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\n\r\nconst ExternalEditForm = (props: { record: any, entityProperty: EntityProperty, }) => {\r\n\r\n    \r\n\r\n    let link = \"\";\r\n    if (props.entityProperty.entityName == 'transaction') {\r\n        link = \"/transaction/detail/\" + props.record.code;\r\n    } else if (props.entityProperty.entityName == 'product') {\r\n        link = \"/dashboard/statistic/product/\" + props.record.code;\r\n    } else {\r\n        // console.debug(\"ENTITY NAME: \", props.entityProperty.entityName);\r\n        // console.debug(\"NO External Edit FORM\");\r\n        return null;\r\n    }\r\n\r\n\r\n    return <AnchorWithIcon className=\"btn btn-sm btn-dark\" iconClassName=\"fas fa-external-link-alt\" to={link} attributes={{ target: \"_blank\" }} />\r\n}\r\n\r\nexport default ExternalEditForm;","import React, { Component } from 'react'\r\nimport AnchorButton from './AnchorButton';\r\ninterface Props {\r\n    onClick(val:boolean):void,\r\n    active:boolean,\r\n    yesLabel?:string,\r\n    noLabel?:string\r\n}\r\nexport default class ToggleButton extends Component<Props, any>{\r\n    \r\n    render() {\r\n        const props = this.props;\r\n        const active = this.props.active;\r\n        return (\r\n            <div className=\"btn-group\">\r\n                <AnchorButton className={\"btn  btn-sm \" + (active ? \"btn-dark\" : \"btn-light\")} onClick={(e) => this.props.onClick(true)} >\r\n                    {props.yesLabel??\"Yes\"}</AnchorButton>\r\n                <AnchorButton className={\"btn  btn-sm \" + (active == false ? \"btn-dark\" : \"btn-light\")} onClick={(e) => this.props.onClick(false)}  >\r\n                    {props.noLabel??\"No\"}</AnchorButton>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\n\r\nimport React, { ChangeEvent, Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport Modal from '../../container/Modal';\r\nimport Filter from '../../../models/common/Filter';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport WebRequest from '../../../models/common/WebRequest';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport HeaderProps from '../../../models/common/HeaderProps';\r\nimport './DataTable.css'\r\nimport EntityValues from './../../../utils/EntityValues';\r\nimport NavigationButtons from './../../navigation/NavigationButtons';\r\nimport MasterDataForm from './form/MasterDataForm';\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nimport EditDeleteAction from './EditDeleteAction';\r\nimport DataTableHeader from './DataTableHeader';\r\nimport SimpleError from './../../alert/SimpleError';\r\nimport Spinner from './../../loader/Spinner';\r\nimport ExternalEditForm from './ExternalEditForm';\r\nimport { uniqueId } from './../../../utils/StringUtil';\r\nimport ToggleButton from '../../navigation/ToggleButton';\r\ninterface IState { recordData?: WebResponse, showForm: boolean, filter: Filter, loading: boolean }\r\nclass MasterDataList extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState;\r\n    recordToEdit?: {} = undefined;\r\n    entityProperty: EntityProperty;\r\n    headerProps: HeaderProps[];\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n\r\n        this.state = {\r\n            showForm: false, loading: false,\r\n            filter: { limit: 5, page: 0, fieldsFilter: {} }\r\n        };\r\n    } \r\n    loadItems = (page: number | undefined) => {\r\n        const filter = Object.assign(new Filter(), this.state.filter);\r\n        \r\n        const entityName = this.entityProperty.entityName;\r\n        filter.page = page ?? filter.page;\r\n        Filter.validateFieldsFilter(filter);\r\n        const request: WebRequest = {\r\n            entity: entityName,\r\n            filter: filter\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadItems,\r\n            this.itemsLoaded,\r\n            this.showCommonErrorAlert,\r\n            request\r\n        );\r\n\r\n    }\r\n    itemsLoaded = (response: WebResponse) => {\r\n        this.setState({ recordData: response, filter:response.filter  });\r\n    }\r\n    checkDefaultData = () => {\r\n        if (this.state.loading) {\r\n            return;\r\n        }\r\n        if (this.entityProperty.entityName == this.props.entityProperty.entityName && this.state.recordData != undefined) {\r\n            return;\r\n        }\r\n        this.entityProperty = this.props.entityProperty;\r\n        this.headerProps = EntityProperty.getHeaderLabels(this.props.entityProperty);\r\n        this.loadItems(0);\r\n    }\r\n    startLoading() { this.setState({ loading: true }) }\r\n    endLoading() { this.setState({ loading: false }) }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.checkDefaultData();\r\n    }\r\n    componentDidMount() {\r\n        this.checkDefaultData();\r\n    }\r\n    getRecordNumber = (i: number): number => {\r\n        let res = (this.state.filter.page ?? 0) * (this.state.filter.limit ?? 5) + i + 1;\r\n        return res;\r\n    }\r\n    filterFormSubmit = (e) => {\r\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\r\n        this.loadItems(page);\r\n    }\r\n    filterOnChange = (e: ChangeEvent) => {\r\n        e.preventDefault();\r\n        const filter = this.state.filter;\r\n        Filter.setFieldsFilterValueFromInput(filter, e.target ); \r\n        this.setState({ filter: filter });\r\n    }\r\n    setExactSearch = (exacts: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.exacts = exacts;\r\n        this.setState({ filter: filter });\r\n    }\r\n    filterReset = (e) => {\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter = {};\r\n        filter.limit = 5;\r\n        this.setState({ filter: filter });\r\n    }\r\n    orderButtonOnClick = (e) => {\r\n        const filter = this.state.filter;\r\n        Filter.setOrderPropertyFromDataSet(filter,  e.target.dataset);\r\n        this.setState({ filter: filter }, ()=>{ this.loadItems(0) }); \r\n    }\r\n    showEditForm = (response: WebResponse) => {\r\n        if (!response.entities) {\r\n            return;\r\n        }\r\n        this.recordToEdit = response.entities[0];\r\n        this.setState({ showForm: true });\r\n    }\r\n    showCreateForm = (e) => {\r\n        this.recordToEdit = undefined;\r\n        this.setState({ showForm: true });\r\n    }\r\n    updateFilterPage = (page: any) => {\r\n        const filter = this.state.filter;\r\n        filter.useExistingFilterPage = true;\r\n        filter.page = parseInt(page) - 1;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateFilterLimit = (limit: any) => {\r\n        const filter = this.state.filter;\r\n        filter.limit = parseInt(limit);\r\n        this.setState({ filter: filter });\r\n    }\r\n    printRecord = () => {\r\n        this.props.printRecord(this.state.filter);\r\n    }\r\n    render() {\r\n        if (undefined == this.state.recordData) {\r\n            return <Spinner />\r\n        }\r\n        const headerProps: HeaderProps[] = this.headerProps;\r\n        const exactsSearch: boolean = this.state.filter.exacts == true;\r\n        const resultList: any[] = this.state.recordData.entities ? this.state.recordData.entities : [];\r\n        if (headerProps == undefined || resultList == undefined) {\r\n            return <SimpleError />\r\n        }\r\n\r\n        if (this.state.showForm == true) {\r\n            return <MasterDataForm recordToEdit={this.recordToEdit} entityProperty={this.entityProperty} onClose={(e) => { this.setState({ showForm: false }) }} />\r\n        }\r\n        const filter = this.state.filter;\r\n        return (\r\n            <div id=\"MasterDataList\">\r\n                <div className=\"btn-group\" style={{ marginBottom: '5px' }}>\r\n                    <AnchorButton show={this.entityProperty.creatable == true && this.entityProperty.editable == true} onClick={this.showCreateForm}\r\n                        iconClassName=\"fas fa-plus\">Add Record</AnchorButton>\r\n                    <AnchorButton onClick={this.printRecord} iconClassName=\"fas fa-file\">Print Record</AnchorButton>\r\n                </div><form onSubmit={(e) => { e.preventDefault() }}>\r\n                    <Modal title=\"Filter\" toggleable={true}>\r\n                        <div>\r\n                            <div className=\"form-group row\">\r\n                                <div className=\"col-6\">\r\n                                    <input value={(filter.page ?? 0) + 1} onChange={(e) => { this.updateFilterPage(e.target.value) }} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"go to page\" />\r\n                                </div>\r\n                                <div className=\"col-6\">\r\n                                    <input value={filter.limit} onChange={(e) => this.updateFilterLimit(e.target.value)} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"record per page\" />\r\n                                </div>\r\n                                <div className=\"col-12\"><p /></div>\r\n                                <div className=\"col-3\">\r\n                                    <ToggleButton\r\n                                        yesLabel=\"exact\"\r\n                                        noLabel=\"not exact\"\r\n                                        active={exactsSearch}\r\n                                        onClick={(val: boolean) => this.setExactSearch(val)}\r\n                                    />\r\n                                    {/* <div className=\"btn-group\">\r\n                                        <a className={exactsSearch?\"btn-sm btn btn-dark\":\"btn-sm btn btn-outline-dark\"} onClick={(e) => this.setExactSearch(true)} >Exact</a>\r\n                                        <a className={!exactsSearch?\"btn-sm btn btn-dark\":\"btn-sm btn btn-outline-dark\"} onClick={(e) => this.setExactSearch(false)} >Not Exact</a>\r\n                                    </div> */}\r\n                                </div>\r\n                                <div className=\"col-3\">\r\n                                    <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </Modal>\r\n                    <NavigationButtons limit={filter.limit ?? 5} totalData={this.state.recordData.totalData ?? 0}\r\n                        activePage={filter.page ?? 0} onClick={this.loadItems} />\r\n                    <Modal title=\"Data List\" >\r\n                        {this.state.loading ?\r\n                            <Loading loading={this.state.loading} /> : null}\r\n                        <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\r\n                            <table className=\"table\" >\r\n                                <DataTableHeader fieldsFilter={filter.fieldsFilter} orderButtonOnClick={this.orderButtonOnClick} filterOnChange={this.filterOnChange} headerProps={headerProps} />\r\n                                <tbody>\r\n                                    {\r\n                                        resultList.map((result, i) => {\r\n                                            const number = this.getRecordNumber(i);\r\n                                            const values: Array<any> = EntityValues.parseValues(result, this.props.entityProperty);\r\n                                            return (<tr key={\"tr-result-\" + i}>\r\n                                                <td>{number}</td>\r\n                                                {values.map(value => {\r\n                                                    const k = \"td-u-\" + uniqueId();\r\n                                                    try {\r\n                                                        return (<td key={k} children={value}/>)\r\n                                                    } catch (error) {\r\n                                                        return (<td key={k} children=\"-\"/>)\r\n                                                    }\r\n                                                })}\r\n                                                <td>\r\n                                                    <div className=\"btn-group\">\r\n                                                        <ExternalEditForm record={result} entityProperty={this.entityProperty} />\r\n                                                        <EditDeleteAction showEditForm={this.showEditForm} record={result} entityProperty={this.entityProperty} reload={() => this.loadItems(undefined)} />\r\n                                                   </div>\r\n                                                </td>\r\n                                            </tr>)\r\n                                        })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </Modal>\r\n                </form>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nconst Loading = ({ loading }) => {\r\n    return (\r\n        <div style={{ width: '100%', height: '100%', paddingTop: '2rem', backgroundColor: 'rgb(240,240,240,0.5)', marginLeft: '-1rem', marginTop: '-1rem', position: 'absolute' }}>\r\n            <Spinner show={loading} />\r\n        </div>\r\n    )\r\n}\r\nconst SubmitResetButton = (props: any) => {\r\n    return (<div className=\"btn-group\">\r\n        <button onClick={props.onSubmit} className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-play-circle\" /></span>Apply Filter</button>\r\n        <button onClick={props.onReset} type=\"reset\" className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-sync-alt\" /></span>Reset</button>\r\n    </div>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(MasterDataList))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport EntityProperty from '../../../models/settings/EntityProperty';\r\nimport MasterDataList from './MasterDataList';\r\nimport Filter from '../../../models/common/Filter';\r\nimport WebRequest from '../../../models/common/WebRequest';\r\nimport AttachmentInfo from '../../../models/common/AttachmentInfo';\r\n\r\nclass MasterDataManagement extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    code: string = \"\";\r\n    loadingEntityProperty: boolean = false;\r\n    entityProperty: undefined\r\n    constructor(props: any) {\r\n        super(props, true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    entityPropertyLoaded = (response: WebResponse) => {\r\n        this.loadingEntityProperty = false;\r\n        if (response.entityProperty == undefined) {\r\n            return;\r\n        }\r\n        this.masterDataService.setEntityProperty(this.props.code, response.entityProperty);\r\n        this.setState({ entityProperty: response.entityProperty });\r\n        this.setTitle(response.entityProperty);\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n            this.scrollTop();\r\n        }\r\n        console.debug(\"updated this.props.code: \", this.props.code);\r\n    }\r\n    setTitle = (entityProp: EntityProperty) => {\r\n        document.title = new String(entityProp?.alias).toString();\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.code != undefined && this.code != this.props.code) {\r\n            this.code = this.props.code;\r\n            this.loadEntityProperty();\r\n        }\r\n    }\r\n    startLoading(raltime: boolean) {\r\n        if (raltime == true) {\r\n            super.startLoading(raltime);\r\n        }\r\n    }\r\n    loadEntityProperty() {\r\n\r\n        if (undefined == this.code && this.loadingEntityProperty == true) {\r\n            return;\r\n        }\r\n        const existingEntityProperty = this.masterDataService.getEntityProperty(this.code);\r\n        if (existingEntityProperty != undefined) {\r\n            this.loadingEntityProperty = false;\r\n            this.setState({ entityProperty: existingEntityProperty });\r\n            this.setTitle(existingEntityProperty);\r\n\r\n            return;\r\n        }\r\n        this.loadingEntityProperty = true;\r\n        this.setState({ entityProperty: undefined });\r\n        this.commonAjax(\r\n            this.masterDataService.loadEntityProperty,\r\n            this.entityPropertyLoaded,\r\n            (e: any) => { this.loadingEntityProperty = false; this.showCommonErrorAlert(e) },\r\n            this.code\r\n        )\r\n\r\n    }\r\n    printRecord = (filter: Filter) => {\r\n        const property = this.state.entityProperty;\r\n        if (!property) return;\r\n        this.showConfirmation(\"Print record? \")\r\n            .then(ok => {\r\n                if (!ok) return;\r\n                const req: WebRequest = {\r\n                    entity: property.entityName,\r\n                    filter: filter\r\n                }\r\n                this.commonAjaxWithProgress(\r\n                    this.masterDataService.generateReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    req);\r\n            })\r\n    }\r\n    reportCreated = (attachment: AttachmentInfo) => {\r\n        this.showConfirmation(\"Save File \" + attachment.name + \" ?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                Object.assign(document.createElement('a'), {\r\n                    target: '_blank',\r\n                    download: attachment.name,\r\n                    style: { display: 'none' },\r\n                    href: attachment.dataUrl,\r\n                }).click();\r\n            })\r\n\r\n    }\r\n    render() {\r\n        if (this.state.entityProperty == undefined) {\r\n            return (\r\n                <div className=\" container-fluid section-body\" style={{ paddingTop: '20px' }}>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-4 text-right\">\r\n                            <div className=\"spinner-border\" role=\"status\" />\r\n                        </div>\r\n                        <div className=\"col-8\"><h4>Loading configuration</h4>\r\n                        </div>\r\n                    </div>\r\n                </div>)\r\n        }\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>{this.state.entityProperty.alias}</h2>\r\n                <MasterDataList printRecord={this.printRecord} entityProperty={this.state.entityProperty} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataManagement))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from './../../BasePage';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport Menu from '../../../models/common/Menu';\r\nimport ManagementProperty from '../../../models/ManagementProperty';\r\nimport MasterDataManagement from './MasterDataManagement'; \r\nimport Spinner from './../../loader/Spinner';\r\n\r\ninterface IState {\r\n    code?: string\r\n    // managementProperties:ManagementProperty[]\r\n}\r\nclass MasterDataMain extends BasePage {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        code: undefined\r\n    };\r\n    constructor(props: any) {\r\n        super(props, \"Master Data\", true);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        console.debug(\"PROPS: \", this.props);\r\n    }\r\n\r\n    managementPropertiesLoaded = (response: WebResponse) => {\r\n        this.masterDataService.managementProperties = response.generalList ? response.generalList : [];\r\n        this.setSidebarMenus();\r\n        this.refresh();\r\n    }\r\n    setSidebarMenus = () => {\r\n        const sidebarMenus: Menu[] = [];\r\n        const managementProperties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        for (let i = 0; i < managementProperties.length; i++) {\r\n            const element = managementProperties[i];\r\n            sidebarMenus.push({\r\n                // role:[AuthorityType.ROLE_ADMIN],\r\n                name: element.label,\r\n                url: element.entityName,\r\n                code: element.entityName,\r\n                menuClass: element.iconClassName\r\n            });\r\n        }\r\n        console.debug(\"this.props.setSidebarMenus: \", this.props.setSidebarMenus);\r\n        if (this.props.setSidebarMenus) {\r\n            this.props.setSidebarMenus(sidebarMenus);\r\n        }\r\n    }\r\n    loadManagamenetPages = () => {\r\n        if (this.masterDataService.managementProperties.length > 0) {\r\n            this.setSidebarMenus();\r\n            this.refresh();\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadManagementProperties,\r\n            this.managementPropertiesLoaded,\r\n            this.showCommonErrorAlert\r\n        );\r\n    }\r\n    getCode = (): string => {\r\n        return this.props.match.params.code;\r\n    }\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        this.loadManagamenetPages();\r\n        this.scrollTop();\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n        this.setSidebarMenus();\r\n        // console.debug(\"this.getCode(): \", this.getCode());\r\n        if (this.state.code != this.getCode()) {\r\n            this.setState({ code: this.getCode() });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.getCode() != undefined && this.getCode() != null && this.getCode() != \"\") {\r\n            return <MasterDataManagement  code={this.getCode()} />\r\n        }\r\n        if (this.masterDataService.managementProperties.length == 0) {\r\n            return <div className=\"section-body container-fluid\"><Spinner/></div>\r\n        }\r\n        const properties: ManagementProperty[] = this.masterDataService.managementProperties;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Master Data Page</h2>\r\n                <div className=\"row\">\r\n                    {properties.map(property => {\r\n\r\n                        return (\r\n                            <div key={\"mngmnt-page-item-\"+property.entityName} className=\"col-md-2 text-center\" style={{ marginBottom: '10px' }}>\r\n                                <h2 ><Link className=\"btn btn-warning btn-lg\" to={\"/management/\" + property.entityName} ><i className={property.iconClassName} /></Link></h2>\r\n                                <p>{property.label}</p>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(MasterDataMain))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport './Home.css';\r\n\r\nclass HomeMain extends BaseComponent {\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.title = \"Home\";\r\n    }\r\n    render() {\r\n        const applicationProfile: ApplicationProfile = this.getApplicationProfile();\r\n        const imageUrl: string = baseImageUrl() + applicationProfile.backgroundUrl;\r\n        return (\r\n\r\n            <div className=\"landing-bg\"\r\n                style={{\r\n                    backgroundImage: 'url(\"' + imageUrl + '\")',\r\n                    color: applicationProfile.fontColor\r\n                }} >\r\n                <h1 className=\"display-4\">{applicationProfile.name}</h1>\r\n                <p className=\"lead\">{applicationProfile.shortDescription}</p>\r\n                <hr className=\"my-4\" />\r\n                <p>{applicationProfile.welcomingMessage}</p>\r\n                <div className=\"btn-group\">\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/about\" role=\"button\">About Us</Link>\r\n                    <Link className=\"btn btn-primary btn-lg\" to=\"/login\" role=\"button\">Login</Link>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(HomeMain))","\r\n\r\nimport  React, { Component, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux'; \r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from './../../BasePage';\r\n\r\nclass SettingsMain extends BasePage \r\n{\r\n    constructor(props:any){\r\n        super(props, \"Settings\", true);\r\n    }\r\n    render(){\r\n        return (\r\n            <div id=\"SettingsMain\" className=\"container-fluid section-body\">\r\n                <h2>Settings</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Welcome, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n  })\r\n  \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n  )(SettingsMain))","import BaseEntity from './BaseEntity';\n\nexport default class User extends BaseEntity{\n\tusername?:string;\n\tdisplayName?:string;\n\tpassword?:string;\n\tprofileImage?:string;\n\tauthorities?:any[];\n\trequestId?:string;\n\tprocessingDate?:Date;\n\n}\n","\r\nimport React, { Component } from 'react';\r\ninterface Props {\r\n    attributes?:any,\r\n    title?:string,\r\n    className?:string,\r\n    footerContent?:any\r\n}\r\nexport default class Card extends Component<Props, any> {\r\n    constructor(props: any) {\r\n        super(props)\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <div {...this.props.attributes} className={\"card \" + this.props.className}>\r\n                {this.props.title ? <div className=\"card-header\">\r\n                    {this.props.title}\r\n                </div> : null}\r\n                <div className=\"card-body\">\r\n                    {this.props.children}\r\n                </div>\r\n                {this.props.footerContent != undefined ?\r\n                    <div className=\"card-footer\">\r\n                        {this.props.footerContent}\r\n                    </div>\r\n                    : null}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","import React, { Fragment } from 'react'\r\nimport AnchorButton from '../../navigation/AnchorButton';\r\nexport const EditField = ({ edit, name, toggleInput, value, updateProperty, ...props }) => {\r\n    return (edit == true ?\r\n        <PropertyInput updateProperty={updateProperty} name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n        :\r\n        <PropertyLabel name={name} toggleInput={toggleInput} value={value} type={props.type} />\r\n    )\r\n}\r\nconst PropertyInput = ({ name, toggleInput, value, updateProperty, type }) => {\r\n    return (<div className=\"row\">\r\n        <p className=\"col-md-10\"><input type={type ?? 'text'} name={name} onChange={updateProperty} value={value} className=\"form-control\" /></p>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'false'\r\n            }}\r\n                onClick={toggleInput} className=\"btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nconst PropertyLabel = ({ name, toggleInput, value, type }) => {\r\n\r\n    return (<div className=\"row\" >\r\n        <div className=\"col-md-10\">\r\n            <p style={{ backgroundColor: type == 'color' ? value : '#fff' }} >{type == 'color' ? 'Sample Color' : value}</p>\r\n            {type == 'color' ? <p>{value}</p> : null}\r\n        </div>\r\n        <div className=\"col-md-2\">\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit</AnchorButton>\r\n        </div>\r\n    </div>)\r\n}\r\n\r\n\r\nexport const EditImage = ({ name, edit, toggleInput, updateProperty }) => {\r\n    if (edit) {\r\n        return (\r\n            <Fragment>\r\n                <div>\r\n                    <AnchorButton attributes={{\r\n                        'data-name': name, 'data-enabled': 'false'\r\n                    }} onClick={toggleInput} className=\" btn btn-secondary btn-sm\">cancel</AnchorButton>\r\n                </div>\r\n                <input onChange={updateProperty} className=\"form control\" accept=\"image/*\" type=\"file\" name={name} />\r\n            </Fragment>);\r\n    }\r\n    return (\r\n        <div>\r\n            <AnchorButton attributes={{\r\n                'data-name': name, 'data-enabled': 'true'\r\n            }} onClick={toggleInput} className=\" btn btn-info btn-sm\">edit image</AnchorButton>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { FormEvent } from 'react';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport BasePage from './../../BasePage'\r\n\r\nexport default class BaseUpdateProfilePage extends BasePage {\r\n    masterDataService: MasterDataService;\r\n    constructor(props, title){\r\n        super(props, title, true);\r\n        this.masterDataService = this.getServices().masterDataService; \r\n    }\r\n    saveRecord = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (this.state.fieldChanged() == false) {\r\n            return;\r\n        } \r\n        this.showConfirmation(\"Save Data?\")\r\n            .then((ok)=> {\r\n                if (ok) { this.doSaveRecord(); }\r\n            })\r\n    }\r\n    doSaveRecord = () => {\r\n\r\n    }\r\n    postRecordSaved = (response: WebResponse) => {\r\n\r\n    }\r\n    recordSaved = (response: WebResponse) => {\r\n        this.showInfo(\"Record Has Been Saved!\");\r\n        const editFields = this.state.editFields;\r\n        for (const key in editFields) {\r\n            editFields[key] = false;\r\n        }\r\n        this.setState({editFields:editFields},()=>{\r\n            this.postRecordSaved(response)\r\n        });\r\n    }\r\n    // render(){\r\n    //     return (<></>)\r\n    // }\r\n}\r\n\r\n","import React, { ChangeEvent  } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport User from './../../../models/User';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setLoggedUser } from './../../../redux/actionCreators';\r\nimport UserService from './../../../services/UserService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper'; \r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\ninterface EditField { username: boolean, displayName: boolean, password: boolean, profileImage: boolean }\r\nclass IState {\r\n    user?: User = undefined;\r\n    editFields: EditField = {\r\n        username: false,\r\n        displayName: false,\r\n        password: false,\r\n        profileImage: false\r\n    };\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass UserProfile extends BaseUpdateProfilePage {\r\n\r\n    userService: UserService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"User Profile\");\r\n        this.userService = this.getServices().userService;\r\n        this.state.user = Object.assign(new User(), this.getLoggedUser());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return;\r\n\r\n        user[target.name] = target.value;\r\n        this.setState({ user: user });\r\n    }\r\n    updateProfleImage = (e:ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const app = this;\r\n        const fileName:string|undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function(imageData) {\r\n           app.setProfileImage(imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setProfileImage = (imageData:string) => {\r\n        const user:User|undefined = this.state.user;\r\n        if (!user) return;\r\n        user.profileImage = imageData;\r\n        this.setState({user:user});\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const user: User | undefined = this.state.user;\r\n        const actualLoggedUser: User | undefined = this.getLoggedUser();\r\n        if (null == target || !user || !actualLoggedUser) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            user[propertyName] = actualLoggedUser[propertyName];\r\n        }\r\n        this.setState({ user: user, editFields: editFields });\r\n    }\r\n    \r\n    doSaveRecord = () => {\r\n        const user: User | undefined = this.getEditedRecord();\r\n        if (!user) return;\r\n        if (user.profileImage) {\r\n            this.commonAjaxWithProgress(\r\n                this.userService.updateProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.userService.updateProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                user\r\n            )\r\n        }\r\n    }\r\n    getEditedRecord = (): User | undefined => {\r\n        const user: User | undefined = this.state.user;\r\n        const editFields: EditField = this.state.editFields;\r\n        if (!user) return undefined;\r\n        const editedUser: User = new User();\r\n        for (const key in editFields) {\r\n            const element:boolean = editFields[key];\r\n            if (element && key != 'profileImage') {\r\n                editedUser[key] = user[key];\r\n            }\r\n        }\r\n        if (editFields.profileImage && user.profileImage?.startsWith(\"data:image\")) {\r\n            editedUser.profileImage = user.profileImage;\r\n        }\r\n        return editedUser;\r\n    }\r\n    postRecordSaved = (response: WebResponse) => { \r\n        this.props.setLoggedUser(response.user); \r\n    }\r\n\r\n    render() {\r\n        const user: User | undefined = this.state.user;\r\n        if (!user) return null;\r\n        const editFields: EditField = this.state.editFields;\r\n        return (\r\n            <div id=\"UserProfile\" className=\"container-fluid section-body\">\r\n                <h2>User Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{marginBottom:'10px'}}>\r\n                            <img style={{marginBottom:'10px'}} width=\"100\" height=\"100\" className=\"rounded-circle border border-primary\" src={user.profileImage?.startsWith(\"data:image\")?user.profileImage:baseImageUrl() + user.profileImage} />\r\n                            <EditImage name=\"profileImage\" edit={editFields.profileImage} updateProperty={this.updateProfleImage} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"User Name\">\r\n                            <EditField edit={editFields.username} updateProperty={this.updateProfileProperty} name=\"username\" toggleInput={this.toggleInput} value={user.username} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.displayName} updateProperty={this.updateProfileProperty} name=\"displayName\" toggleInput={this.toggleInput} value={user.displayName} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Password\">\r\n                            <EditField edit={editFields.password} updateProperty={this.updateProfileProperty} name=\"password\" toggleInput={this.toggleInput} value={user.password} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                           {this.state.fieldChanged()? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" />:null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setLoggedUser: (user: User) => dispatch(setLoggedUser(user)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(UserProfile))","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport ApplicationProfile from '../../../models/ApplicationProfile';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport { baseImageUrl } from '../../../constant/Url';\r\nimport { setApplicationProfile } from '../../../redux/actionCreators';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\nclass EditFields {\r\n    name: boolean = false; pageIcon: boolean = false;\r\n    welcomingMessage: boolean = false;\r\n    contact: boolean = false; shortDescription: boolean = false;\r\n    backgroundUrl: boolean = false; address: boolean = false;\r\n    about: boolean = false; color: boolean = false; fontColor: boolean = false; \r\n    iconUrl:boolean = false\r\n}\r\nclass IState {\r\n    applicationProfile?: ApplicationProfile = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditApplicationProfile extends BaseUpdateProfilePage {\r\n \r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"ApplicationProfile Profile\");\r\n        this.state.applicationProfile = Object.assign(new ApplicationProfile(), this.getApplicationProfile());\r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n\r\n        applicationProfile[target.name] = target.value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n\r\n    updateImageField = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const fieldName: string | null = e.target.getAttribute(\"name\");\r\n        if (null == fieldName) {\r\n            return;\r\n        }\r\n        const app = this;\r\n        const fileName: string | undefined = target.files ? target.files[0].name : undefined;\r\n        if (!fileName) return;\r\n        toBase64v2(target).then(function (imageData) {\r\n            app.setAppProfileField(fieldName, imageData);\r\n        }).catch(console.error);\r\n    }\r\n    setAppProfileField = (fieldName: string, value: any) => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return;\r\n        applicationProfile[fieldName] = value;\r\n        this.setState({ applicationProfile: applicationProfile });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const appProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const actualAppProfile: ApplicationProfile | undefined = this.getApplicationProfile();\r\n        if (null == target || !appProfile || !actualAppProfile) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            appProfile[propertyName] = actualAppProfile[propertyName];\r\n        }\r\n        this.setState({ applicationProfile: appProfile, editFields: editFields });\r\n    }\r\n    doSaveRecord = () => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.getApplicationEditedData();\r\n        if (!applicationProfile) return;\r\n        if (applicationProfile.backgroundUrl || applicationProfile.pageIcon || applicationProfile.iconUrl) {\r\n            this.commonAjaxWithProgress(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        } else {\r\n            this.commonAjax(\r\n                this.masterDataService.updateApplicationProfile,\r\n                this.recordSaved, this.showCommonErrorAlert,\r\n                applicationProfile\r\n            )\r\n        }\r\n    }\r\n    getApplicationEditedData = (): ApplicationProfile | undefined => {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        const editFields: EditFields = this.state.editFields;\r\n        if (!applicationProfile) return undefined;\r\n        const editedApplication: ApplicationProfile = new ApplicationProfile();\r\n        for (const key in editFields) {\r\n            const element: boolean = editFields[key];\r\n            if (element && key != 'backgroundUrl' && key != 'pageIcon' && key != 'iconUrl') {\r\n                editedApplication[key] = applicationProfile[key];\r\n            }\r\n        }\r\n        if (editFields.backgroundUrl && applicationProfile.backgroundUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.backgroundUrl = applicationProfile.backgroundUrl;\r\n        }\r\n        if (editFields.pageIcon && applicationProfile.pageIcon?.startsWith(\"data:image\")) {\r\n            editedApplication.pageIcon = applicationProfile.pageIcon;\r\n        }\r\n        if (editFields.iconUrl && applicationProfile.iconUrl?.startsWith(\"data:image\")) {\r\n            editedApplication.iconUrl = applicationProfile.iconUrl;\r\n        }\r\n        return editedApplication;\r\n    }\r\n    postRecordSaved = (response: WebResponse) => { \r\n        this.props.setApplicationProfile(response.applicationProfile);\r\n    }\r\n    render()\r\n    {\r\n        const applicationProfile: ApplicationProfile | undefined = this.state.applicationProfile;\r\n        if (!applicationProfile) return null;\r\n        const editFields: EditFields = this.state.editFields;\r\n        const bgUrl: string = applicationProfile.backgroundUrl ?? \"\";\r\n        const pageIcon: string = applicationProfile.pageIcon ?? \"\";\r\n        const iconUrl: string = applicationProfile.iconUrl ?? \"\";\r\n        return (\r\n            <div id=\"ApplicationProfile\" className=\"container-fluid section-body\">\r\n                <h2>Application Profile</h2>\r\n                <Card title=\"Profile Data\">\r\n                    <form onSubmit={this.saveRecord}>\r\n                        <div className=\"container-fluid text-center\" style={{ marginBottom: '10px' }}>\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={bgUrl.startsWith(\"data:image\") ? bgUrl : baseImageUrl() + bgUrl} />\r\n                            <EditImage name=\"backgroundUrl\" edit={editFields.backgroundUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </div>\r\n                        <FormGroup label=\"Name\">\r\n                            <EditField edit={editFields.name} updateProperty={this.updateProfileProperty} name=\"name\" toggleInput={this.toggleInput} value={applicationProfile.name} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Welcoming Message\">\r\n                            <EditField edit={editFields.welcomingMessage} updateProperty={this.updateProfileProperty} name=\"welcomingMessage\" toggleInput={this.toggleInput} value={applicationProfile.welcomingMessage} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Short Description\">\r\n                            <EditField edit={editFields.shortDescription} updateProperty={this.updateProfileProperty} name=\"shortDescription\" toggleInput={this.toggleInput} value={applicationProfile.shortDescription} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Address\">\r\n                            <EditField edit={editFields.address} updateProperty={this.updateProfileProperty} name=\"address\" toggleInput={this.toggleInput} value={applicationProfile.address} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"About\">\r\n                            <EditField edit={editFields.about} updateProperty={this.updateProfileProperty} name=\"about\" toggleInput={this.toggleInput} value={applicationProfile.about} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Contact\">\r\n                            <EditField edit={editFields.contact} updateProperty={this.updateProfileProperty} name=\"contact\" toggleInput={this.toggleInput} value={applicationProfile.contact} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Background Color\">\r\n                            <EditField type=\"color\" edit={editFields.color} updateProperty={this.updateProfileProperty} name=\"color\" toggleInput={this.toggleInput} value={applicationProfile.color} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Font Color\">\r\n                            <EditField type=\"color\" edit={editFields.fontColor} updateProperty={this.updateProfileProperty} name=\"fontColor\" toggleInput={this.toggleInput} value={applicationProfile.fontColor} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Application Icon\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={pageIcon.startsWith(\"data:image\") ? pageIcon : baseImageUrl() + pageIcon} />\r\n                            <EditImage name=\"pageIcon\" edit={editFields.pageIcon} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Logo\">\r\n                            <img style={{ marginBottom: '10px' }} height=\"100\" className=\"border border-primary\" src={iconUrl.startsWith(\"data:image\") ? iconUrl : baseImageUrl() + iconUrl} />\r\n                            <EditImage name=\"iconUrl\" edit={editFields.iconUrl} updateProperty={this.updateImageField} toggleInput={this.toggleInput} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setApplicationProfile: (applicationProfile: ApplicationProfile) => dispatch(setApplicationProfile(applicationProfile)),\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(EditApplicationProfile))","import React from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport Card from './../../container/Card';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport ApplicationProfile from './../../../models/ApplicationProfile';\r\nimport FormGroup from '../../form/FormGroup';\r\nclass AboutUs extends BaseComponent {\r\n    constructor(props) {\r\n        super(props, false);\r\n    }\r\n    componentDidMount() {\r\n        document.title = \"About Us\";\r\n    }\r\n    render() {\r\n        const appProfile:ApplicationProfile = this.getApplicationProfile();\r\n        return (\r\n        <div style={{marginTop:20}} className=\"section-body container-fluid\"  >\r\n            <h2>About Us</h2>\r\n            <Card title=\"Application\">\r\n                <FormGroup label=\"Name\">{appProfile.name}</FormGroup>\r\n                <FormGroup  ><i>{appProfile.shortDescription}</i></FormGroup>\r\n                <FormGroup label=\"Contact\">{appProfile.contact}</FormGroup>\r\n                <FormGroup label=\"Address\">{appProfile.address}</FormGroup>\r\n            </Card>\r\n            <p/>\r\n            {/* <Card title=\"Development Mode\">\r\n                <FormGroup label=\"Repository\"><a target=\"_blank\" href=\"https://github.com/fajaralmu\">https://github.com/fajaralmu</a></FormGroup>\r\n                <FormGroup label=\"Front End\">React Js</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/front-end-shopping-mart-v2\">https://github.com/fajaralmu/front-end-shopping-mart-v2</a></FormGroup>\r\n                <FormGroup label=\"Back End\">Java, Spring MVC</FormGroup>\r\n                <FormGroup><a target=\"_blank\" href=\"https://github.com/fajaralmu/universal-good-shop-v2\">https://github.com/fajaralmu/universal-good-shop-v2</a></FormGroup>\r\n            </Card>\r\n            <p/> */}\r\n        </div>);\r\n    }\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(AboutUs))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from '../../BasePage';\r\nimport { greeting } from '../../../utils/StringUtil';\r\n\r\n\r\nclass TransactionMain extends BasePage {\r\n    constructor(props: any) {\r\n        super(props, \"Transaction\", true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid section-body\">\r\n                <h2>Transaksi</h2>\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionMain))","import BaseEntity from './BaseEntity';\nimport Unit from './Unit';\nimport { baseImageUrl } from './../constant/Url';\n\nexport default class Product extends BaseEntity{\n\tcode?:string;\n\tname?:string;\n\tdescription?:string;\n\tunit?:Unit;\n\tutilityTool?:boolean;\n\timageNames?:string;\n\n\tcount?:number;\n\n\tgetDefaultImageUrl  = () :string => {\n\t\tif (this.imageNames == undefined) return baseImageUrl()+\"default.bmp\";\n\t\treturn  baseImageUrl()+this.imageNames.split(\"~\")[0];\n\t}\n\n}\n","\nimport Transaction from './Transaction';\nimport BaseEntity from './BaseEntity';\nimport Product from './Product';\n\nexport default class ProductFlow extends BaseEntity {\n\t/**\n\t * creates new instance of productFlow referencing given productFlow\n\t * @param availableProductFlow \n\t * @returns\n\t */\n    static fromReference(availableProductFlow: ProductFlow): ProductFlow {\n\t\tconst pf = new ProductFlow();\n\t\tpf.referenceProductFlow = Object.assign(new ProductFlow(), availableProductFlow);\n\t\tpf.product = pf.referenceProductFlow.product;\n\t\treturn pf;\n    }\n\ttransaction?: Transaction;\n\tproduct: Product = new Product();\n\texpiredDate: Date = new Date();\n\tcount: number = 0;\n\tusedCount: number = 0;\n\tstock: number = 0;\n\tsuitable: boolean = true;\n\tprice: number = 0;\n\tgeneric: boolean = false;\n\treferenceProductFlow?:ProductFlow;\n\tstockLocation?:string;\n\n\treferencingItems:ProductFlow[]|undefined;\n\n}\n","import User from './User';\nimport Customer from './Customer';\nimport BaseEntity from './BaseEntity';\nimport Supplier from './Supplier';\nimport HealthCenter from './HealthCenter';\nimport ProductFlow from './ProductFlow';\nimport Product from './Product';\n\nexport default class Transaction extends BaseEntity {\n\tcode?: string;\n\ttransactionDate: Date = new Date();\n\tuser?: User;\n\ttype?: string;\n\tsupplier?: Supplier;\n\tcustomer?: Customer;\n\thealthCenterDestination?: HealthCenter;\n\thealthCenterLocation?: HealthCenter;\n\tproductFlows: ProductFlow[] = [];\n\tdescription?: string;\n\n\tdestination: string = 'CUSTOMER';\n\n\t \n\tproductFlowCount = () => { return this.productFlows.length }\n\taddProductToFlow = (product: Product) => {\n\t\tconst productFlow: ProductFlow = new ProductFlow();\n\t\tproductFlow.product = product;\n\t\tthis.productFlows.push(productFlow);\n\t}\n\taddProductFlow = (productFlow:ProductFlow) => {\n\t\tthis.productFlows.push(productFlow);\n\t}\n\thasProductFlowReferenceid = (id:number) : boolean => {\n\n\t\tfor (let i = 0; i < this.productFlows.length; i++) {\n\t\t\tconst element = this.productFlows[i];\n\t\t\tif (element.referenceProductFlow && element.referenceProductFlow.id == id) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tsetProductFlowValue = (index: number, key: string, value: any) => {\n\t\ttry {\n\t\t\tthis.productFlows[index][key] = value;\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t}\n\tremoveProductFlow = (index: number) => {\n\t\tfor (let i = 0; i < this.productFlows.length; i++) {\n\t\t\tconst element = this.productFlows[i];\n\t\t\tif (i == index) {\n\t\t\t\tthis.productFlows.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import React from 'react'\r\nimport { uniqueId } from './StringUtil';\r\nexport const tableHeader = (...values:any[]) => {\r\n   \r\n    return (<thead>\r\n        <tr>\r\n            {values.map((value)=>{\r\n                if (null == value) return null;\r\n                return <th key={uniqueId()}>{value}</th>\r\n            })}\r\n        </tr>\r\n    </thead>)\r\n}\r\nexport const groupArray = function (array, division) {\r\n    if (null == array || array.length == 0) { return [] }\r\n    const groupedArray = new Array();\r\n    const itemPerDivision = Math.ceil(array.length / division)\r\n\r\n    if (itemPerDivision == 1) {\r\n        groupedArray.push(array);\r\n        return groupedArray;\r\n    }\r\n\r\n    for (let i = 0; i < division; i++) {\r\n        groupedArray.push(new Array());\r\n    }\r\n\r\n    let index = 1;\r\n    let divisionIndex = 0;\r\n    for (let i = 0; i < array.length; i++) {\r\n        const element = array[i];\r\n        groupedArray[divisionIndex].push(element);\r\n\r\n        index++;\r\n        if (index > itemPerDivision) {\r\n            divisionIndex++;\r\n            index = 1;\r\n        }\r\n    }\r\n\r\n    return groupedArray;\r\n}\r\n","import React from 'react'\r\nimport BaseComponent from './../../BaseComponent';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport Transaction from './../../../models/Transaction';\r\nimport { ChangeEvent, Fragment } from 'react';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport { getInputReadableDate } from '../../../utils/DateUtil';\r\nimport InputDateTime from './../../form/InputDateTime';\r\nexport default class BaseTransactionPage extends BaseComponent {\r\n\r\n    inventoryService: InventoryService;\r\n    masterDataService: MasterDataService;\r\n    constructor(props, title:string) {\r\n        super(props, true);\r\n        this.inventoryService = this.getServices().inventoryService;\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        document.title = title;\r\n    }\r\n\r\n    setTransaction = (transaction: Transaction) => {\r\n        this.setState({ transaction: transaction });\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    removeProductFlow = (index: number) => {\r\n\r\n        this.showConfirmationDanger(\"Delete Product?\").then((ok) => {\r\n            if (!ok) return;\r\n            const transaction: Transaction = this.state.transaction;\r\n            transaction.removeProductFlow(index);\r\n            this.setTransaction(transaction);\r\n        });\r\n    }\r\n    removeAll = () => {\r\n        this.showConfirmationDanger(\"Remove All?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                const transaction: Transaction = this.state.transaction;\r\n                transaction.productFlows = [];\r\n                this.setTransaction(transaction);\r\n            })\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus(()=>{\r\n            this.validateTransactionFromProps(); \r\n            this.didMountCallback();\r\n            this.scrollTop();\r\n        }); \r\n       \r\n    }\r\n    didMountCallback = () => {\r\n\r\n    }\r\n    updateTransactionGeneralField = (e: any) => {\r\n        const name = e.target.name;\r\n        let value;\r\n        if (e.target.type == 'date') {\r\n            value = new Date(e.target.value);\r\n        } else {\r\n            value = e.target.value;\r\n        }\r\n        const transaction: Transaction = this.state.transaction;\r\n        transaction[name] = value;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateProductFlow = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement = e.target as HTMLInputElement;\r\n        const index: string | undefined = target.dataset['index'];\r\n        let value: any = target.value;\r\n\r\n        if (!index) return;\r\n\r\n        const transaction: Transaction = this.state.transaction;\r\n        if (target.type == \"date\") {\r\n            value = new Date(value);\r\n        } else if (target.type == 'checkbox') {\r\n            value = target.checked == true;\r\n        }\r\n        transaction.setProductFlowValue(parseInt(index), target.name, value);\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateTransactionDate = (date:Date) => {\r\n        const transaction: Transaction = this.state.transaction;\r\n        transaction.transactionDate = date;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    buttonSubmitTransaction = (transaction: Transaction) => {\r\n        const transactionDate : Date = transaction.transactionDate ?? new Date();\r\n        return (\r\n            <Fragment>\r\n                <FormGroup label=\"Tanggal\">\r\n                    {transactionDate.toLocaleDateString(\"ID\")} - {transactionDate.toLocaleTimeString()}\r\n                    <InputDateTime onChange={this.updateTransactionDate} value={transactionDate??new Date()} />\r\n                </FormGroup>\r\n                <FormGroup label=\"Catatan\">\r\n                    <textarea value={transaction.description} name=\"description\"\r\n                        onChange={this.updateTransactionGeneralField}\r\n                        className=\"form-control\" />\r\n                </FormGroup>\r\n                <input type=\"submit\" className=\"btn btn-success\" />\r\n            </Fragment>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport BaseComponent from '../../BaseComponent'; \r\nimport Product from '../../../models/Product';\r\nimport Modal from '../../container/Modal';\r\nimport MasterDataService from '../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport FormGroup from '../../form/FormGroup';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../loader/Spinner';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\ninterface IState {\r\n    product?: Product; \r\n    recordList?:Product[]|undefined;\r\n    recordNotFound: boolean;\r\n    loading:boolean;\r\n    productName:string;\r\n}\r\n class ProductFormV2 extends BaseComponent {\r\n \r\n    masterDataService : MasterDataService;\r\n    state: IState = {\r\n        recordNotFound: false,\r\n        loading:false,\r\n        productName:\"\",\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.state = { ...this.state };\r\n        \r\n        this.masterDataService = this.getServices().masterDataService;\r\n\r\n    }\r\n    updateField = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name:string|null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({[name]: target.value}, this.loadRecords);\r\n    }\r\n    startLoading = () => this.setState({loading:true});\r\n    endLoading = () => this.setState({loading:false});\r\n    reset = (e:any) => {\r\n        this.setState({productName:\"\"})\r\n    }\r\n    searchRecord = (e) => {\r\n        e.preventDefault(); \r\n        if ( this.state.productName.trim() == \"\") return;\r\n        this.loadRecords();\r\n    }\r\n    recordsLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Produk tidak ditemukan\");\r\n        }\r\n        // if (this.props.setProduct) {\r\n        //     this.props.setProduct(response.entities[0]);\r\n        // }\r\n        this.setState({ recordList:response.entities, recordNotFound: false });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ productName:product.name, product: product, recordList:undefined, recordNotFound: false });\r\n        if (this.props.setProduct) {\r\n            this.props.setProduct(product);\r\n        }\r\n    }\r\n    recordsNotFound = (e: any) => {\r\n        this.setState({ recordNotFound: true, product:undefined, recordList: undefined });\r\n    }\r\n    loadRecords = ( ) => {\r\n        if (this.state.loading || ! this.state.productName) return;\r\n        this.commonAjaxWithProgress(this.masterDataService.getProductsByName,\r\n            this.recordsLoaded, this.recordsNotFound,  this.state.productName);\r\n    }\r\n    render() {\r\n        const recordList:Product[] =  this.state.recordList??[];\r\n        return (\r\n\r\n            <form onSubmit={this.searchRecord} >\r\n               \r\n                <Modal toggleable={true}  title=\"Pilih Produk\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/product\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Cari\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Nama\"  >\r\n                            <input onChange={this.updateField} value={this.state.productName??\"\"} placeholder=\"Nama\" required type=\"text\" className=\"form-control\" name=\"productName\" />\r\n                            {recordList.length > 0?<div style={{position:'absolute', zIndex: 200}} className=\"container-fluid bg-light rounded-sm border border-dark\">\r\n                                {recordList.map(p=>{\r\n                                    return (\r\n                                        <div className=\"option-item\"onClick={()=>{\r\n                                            this.setProduct(p);\r\n                                        }} style={{cursor: 'pointer'}} key={\"p-\"+p.code+p.id} >{p.name}</div>\r\n                                    )\r\n                                })}\r\n                                <a onClick={this.recordsNotFound}><i className=\"fas fa-times\"/>&nbsp;close</a>\r\n                            </div>:null}\r\n                        </FormGroup>\r\n                    </div> \r\n                    \r\n                    <ProductDetail loading={this.state.loading} product={this.state.product} notFound={this.state.recordNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst ProductDetail = (props: { loading:boolean, product?: Product, notFound: boolean }) => {\r\n   const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner/></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Produk tidak ditemukan</div></div>\r\n    }\r\n    if (!props.product) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Silakan pilih produk</div></div>\r\n    }\r\n    const product: Product = props.product;\r\n    return (\r\n        <div style={style}>\r\n            <h4>{product.name}</h4>\r\n            <table className=\"table\">\r\n                <thead><tr>\r\n                    <th>Kode</th>\r\n                    <th>Unit</th>\r\n                    {/* <th>Category</th>\r\n                    <th>Price@Unit</th>\r\n                    <th>Qty</th> */}\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td>{product.code}</td>\r\n                        <td>{product.unit ? product.unit.name : '-'}</td>\r\n                        {/* <td>{product.category ? product.category.name : '-'}</td>\r\n                        <td style={{ fontFamily: 'monospace' }}>{product.price}</td>\r\n                        <td>{product.count}</td> */}\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(ProductFormV2))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Supplier from '../../../../models/Supplier';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../../loader/Spinner';\r\ninterface IState {\r\n    recordList?:Supplier[];\r\n    supplier?: Supplier;\r\n    recordNotFound: boolean;\r\n    loading: boolean;\r\n    supplierName: string\r\n}\r\nclass SupplierFormV2 extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        recordNotFound: false, loading: false, supplierName: ''\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n    }\r\n    updateField = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value }, this.loadRecords);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    searchRecord = (e) => {\r\n        e.preventDefault();\r\n        const code: string = this.state.supplierName;\r\n        if (code.trim() == \"\") return;\r\n        this.loadRecords();\r\n    }\r\n    recordsLoaded = (response: WebResponse) => {\r\n        console.debug(\"response: \", response);\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Pemasok tidak ditemukan\");\r\n        }\r\n       \r\n        this.setState({ recordList:response.entities, recordNotFound: false });\r\n    }\r\n    setSupplier = (supplier:Supplier)=> {\r\n        this.setState({ supplierName:supplier.name, supplier: supplier, recordList:undefined, recordNotFound: false });\r\n        if (this.props.setSupplier) {\r\n            this.props.setSupplier(supplier);\r\n        }\r\n    }\r\n    recordsNotFound = (e: any) => {\r\n        this.setState({ recordNotFound: true, supplier: undefined, recordList: undefined });\r\n    }\r\n    loadRecords = ( ) => {\r\n        if (this.state.loading || !this.state.supplierName) return;\r\n        this.commonAjax(this.masterDataService.getRecordsByKeyLike,\r\n            this.recordsLoaded, this.recordsNotFound, 'supplier', 'name', this.state.supplierName);\r\n    }\r\n    reset = (e: any) => {\r\n        this.setState({ supplierName: \"\" })\r\n    }\r\n    render() {\r\n        const recordList:Supplier[] = this.state.recordList??[];\r\n        return (\r\n            \r\n            <form onSubmit={this.searchRecord} >\r\n                <Modal toggleable={true} title=\"Pilih Pemasok\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/supplier\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Search\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Nama\">\r\n                            <input placeholder=\"Nama Pemasok\" required className=\"form-control\"\r\n                             onChange={this.updateField} value={this.state.supplierName??\"\"} name=\"supplierName\" />\r\n                            {recordList.length > 0?<div style={{position:'absolute', zIndex: 200}} className=\"container-fluid bg-light rounded-sm border border-dark\">\r\n                                {recordList.map(p=>{\r\n                                    return (\r\n                                        <div className=\"option-item\"onClick={()=>{\r\n                                            this.setSupplier(p);\r\n                                        }} style={{cursor: 'pointer'}} key={\"p-\"+p.code+p.id} >{p.name}</div>\r\n                                    )\r\n                                })}\r\n                                <a onClick={this.recordsNotFound}><i className=\"fas fa-times\"/>&nbsp;close</a>\r\n                            </div>:null}\r\n                        </FormGroup>\r\n                    </div>\r\n                    <SupplierDetail loading={this.state.loading} supplier={this.state.supplier} notFound={this.state.recordNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst SupplierDetail = (props: { loading: boolean, supplier?: Supplier, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner /></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Pemasok tidak ditemukan</div></div>\r\n    }\r\n    if (!props.supplier) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Silakan pilih pemasok</div></div>\r\n    }\r\n    const supplier: Supplier = props.supplier;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{supplier.name}</h2>\r\n            <p>Kode: {supplier.code}</p>\r\n            <address>\r\n                {supplier.address}<br />\r\n                <abbr title=\"Contact\">Kontak: </abbr>{supplier.contact}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SupplierFormV2))","\r\n\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport SupplierForm from './SupplierForm';\r\nimport ProductForm from '../ProductForm';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport Product from '../../../../models/Product';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Supplier from '../../../../models/Supplier';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport { getInputReadableDate } from '../../../../utils/DateUtil';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport BaseTransactionPage from '../BaseTransactionPage';\r\nimport ProductFormV2 from '../ProductFormV2';\r\nimport SupplierFormV2 from './SupplierFormV2';\r\nimport { greeting } from '../../../../utils/StringUtil';\r\nclass State {\r\n    transaction: Transaction = new Transaction();\r\n    selectedProduct: Product | undefined = undefined;\r\n}\r\n\r\nclass TransactionIn extends BaseTransactionPage {\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Supply\");\r\n    } \r\n    setSupplier = (supplier: Supplier) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.supplier = supplier;\r\n        this.setTransaction(transaction);\r\n    }\r\n    setTransaction = (transaction: Transaction) => {\r\n        this.setState({ transaction: transaction });\r\n    }\r\n    setProduct = (product: Product) => {\r\n        this.setState({ selectedProduct: product });\r\n    }\r\n    addToCart = (product: Product) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.addProductToFlow(product);\r\n        this.setState({ transaction: transaction, selectedProduct: undefined });\r\n    }\r\n\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.transaction.supplier || this.state.transaction.productFlowCount() == 0) {\r\n            return;\r\n        }\r\n        this.showConfirmation(\"Lanjutkan Transaksi?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.props.history.push({\r\n                    pathname: \"/transaction/productin/confirm\",\r\n                    state: { transaction: this.state.transaction }\r\n                })\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const selectedProduct: Product | undefined = this.state.selectedProduct;\r\n        const transaction: Transaction = this.state.transaction;\r\n        // console.debug(\"transaction.supplier: \", transaction.supplier);\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                <h2>Transaksi :: Pemasokan </h2>\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                    <p />\r\n                    <FormGroup label=\"Lokasi\">\r\n                        <span className=\"form-control\" >{this.getMasterHealthCenter().name} </span>\r\n                    </FormGroup>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-6\"><ProductFormV2 setProduct={this.setProduct} /></div>\r\n                    <div className=\"col-6\"><SupplierFormV2 setSupplier={this.setSupplier} /></div>\r\n                </div>\r\n                <Card title=\"Rincian Produk\">\r\n                    {selectedProduct ?\r\n                        <SelectedProductDetail addToCart={this.addToCart} product={selectedProduct} /> :\r\n                        <i>Tidak ada data</i>\r\n                    }\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Daftar Produk\">\r\n                    <form onSubmit={this.submit}>\r\n                        <table className=\"table table-striped\"  >\r\n                            {tableHeader(\"No\", \"Nama\", \"Qty\", \"Unit\", \"Harga @Unit\", \"Generik\", \"Kadaluarsa\", \"Opsi\")}\r\n                            <tbody>\r\n                                {transaction.productFlows.map((productFlow, i) => {\r\n                                    return <ProductFlowItemInput\r\n                                        updateProductFlow={this.updateProductFlow}\r\n                                        productFlow={productFlow} key={\"PF_ITEM_\" + i}\r\n                                        index={i} remove={this.removeProductFlow} />\r\n                                })}\r\n                                <tr>\r\n                                    <td colSpan={7} >\r\n                                        <AnchorButton show={transaction.productFlowCount() > 0} onClick={this.removeAll} className=\"btn btn-danger\" iconClassName=\"fas fa-times\" >Remove All</AnchorButton>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        {transaction.supplier && transaction.productFlowCount() > 0 ?\r\n                           this.buttonSubmitTransaction(transaction) : null\r\n                        }\r\n                    </form>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductFlowItemInput = (props: { productFlow: ProductFlow, updateProductFlow(e: ChangeEvent): void, index: number, remove(index: number): void }) => {\r\n    const product: Product = props.productFlow.product;\r\n    return (<tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{product.name}</td>\r\n        <td><input required min={1} type=\"number\" className=\"form-control\" name=\"count\" data-index={props.index} onChange={props.updateProductFlow}\r\n            value={props.productFlow.count} />\r\n        </td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>\r\n            <input required type=\"number\" step={0.001}  className=\"form-control\" name=\"price\" data-index={props.index} onChange={props.updateProductFlow}\r\n                value={props.productFlow.price} />\r\n        </td>\r\n        <td>\r\n            <input   type=\"checkbox\" className=\"form-control\" name=\"generic\" data-index={props.index} onChange={props.updateProductFlow}\r\n                checked={props.productFlow.generic==true} />\r\n        </td>\r\n        <td>\r\n            <input required type=\"date\" className=\"form-control\" name=\"expiredDate\" data-index={props.index} onChange={props.updateProductFlow}\r\n                value={getInputReadableDate(props.productFlow.expiredDate ?? new Date())} />\r\n        </td>\r\n        <td><AnchorButton iconClassName=\"fas fa-times\" className=\"btn btn-danger\" onClick={(e) => {\r\n            props.remove(props.index);\r\n        }} /></td>\r\n    </tr>)\r\n}\r\n\r\nconst SelectedProductDetail = (props: { product: Product, addToCart(product: Product): void }) => {\r\n    return (\r\n        <div>\r\n            <FormGroup label=\"Nama\">{props.product.name}</FormGroup>\r\n            <FormGroup label=\"Unit\">{props.product.unit?.name}</FormGroup>\r\n            <FormGroup label=\"Alat Kesehatan\">{props.product.utilityTool == true ? \"Yes\" : \"No\"}</FormGroup>\r\n            <FormGroup label=\"Deskripsi\">{props.product.description}</FormGroup>\r\n            <AnchorButton className=\"btn btn-dark\" iconClassName=\"fas fa-plus\" onClick={(e) => props.addToCart(props.product)}>Add To Cart</AnchorButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionIn))","import React from 'react'\r\nimport Product from \"../../../../models/Product\";\r\nimport ProductFlow from \"../../../../models/ProductFlow\";\r\nimport Transaction from \"../../../../models/Transaction\";\r\nimport FormGroup from \"../../../form/FormGroup\"; \r\nimport { ChangeEvent } from 'react';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport Modal from '../../../container/Modal';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\n\r\nexport const HealthCenterForm = (props: {value?:HealthCenter, healthCenters:HealthCenter[], setHealthCenter(e:any):void }) => {\r\n\r\n    return (<form>\r\n         <Modal toggleable={true}  title=\"Health Center Destination\">\r\n            <FormGroup label=\"Health Center List\">\r\n                <select value={props.value?.id} className=\"form-control\" onChange={props.setHealthCenter}>\r\n                    {props.healthCenters.map((hc,i)=>{\r\n                        return <option value={hc.id} key={\"hc-frm-\"+i}>{hc.name}</option>\r\n                    })}\r\n                </select>\r\n            </FormGroup>\r\n         </Modal>\r\n    </form>)\r\n}\r\n\r\nexport const DestinationInfo  = (props:{transaction:Transaction}) => {\r\n    const destination = props.transaction.destination;\r\n    const healthCenterDestionation = props.transaction.healthCenterDestination;\r\n    const customer = props.transaction.customer;\r\n    return (\r\n        <FormGroup >\r\n            {destination== \"HEALTH_CENTER\"?  healthCenterDestionation?.name ?? <i className=\"text-danger\">Tidak ada puskesmas tujuan</i>:null}\r\n            {destination== \"CUSTOMER\" ? customer?.name ?? <span className=\"text-danger\"><i className=\"fas fa-exclamation-circle\"/> Tidak ada pelanggan</span>:null}\r\n        </FormGroup>\r\n    )\r\n}\r\nexport const ProductFlowItemInput = (props: { productFlow: ProductFlow, updateProductFlow(e: ChangeEvent): void, index: number, remove(index: number): void }) => {\r\n    const product: Product = props.productFlow.product;\r\n    const productFlow: ProductFlow = props.productFlow;\r\n    return (<tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{productFlow.referenceProductFlow?.id}</td>\r\n        <td>{product.name}</td>\r\n        \r\n        <td>{productFlow.referenceProductFlow?.stock} </td>\r\n        <td><input required min={1} max={productFlow.referenceProductFlow?.stock} type=\"number\" className=\"form-control\" name=\"count\" data-index={props.index} onChange={props.updateProductFlow}\r\n            value={productFlow.count} />\r\n        </td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>{productFlow.referenceProductFlow?.generic?\"Yes\":\"No\"} </td>\r\n        <td>\r\n            {new Date(productFlow.referenceProductFlow?.expiredDate ?? new Date()).toLocaleDateString(\"ID\")}\r\n        </td>\r\n        <td><AnchorButton iconClassName=\"fas fa-times\" className=\"btn btn-danger\" onClick={(e) => {\r\n            props.remove(props.index);\r\n        }} /></td>\r\n    </tr>)\r\n}","\r\nimport React, { Component } from 'react';\r\nexport default class SimpleWarning extends Component<any, any>\r\n{\r\n\r\n    render() {\r\n        if (this.props.show == false) return null;\r\n        return (\r\n            <div style={this.props.style} className=\"alert alert-warning\">\r\n                {this.props.children??\"Error Occured\"}\r\n            </div>\r\n        )\r\n    }\r\n}","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Customer from '../../../../models/Customer';\r\nimport Modal from '../../../container/Modal';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport Spinner from '../../../loader/Spinner';\r\ninterface IState {\r\n    customer?: Customer;\r\n    recordNotFound: boolean;\r\n    recordList?:Customer[];\r\n    loading: boolean;\r\n    customerName: string\r\n}\r\nclass CustomerFormV2 extends BaseComponent {\r\n    masterDataService: MasterDataService;\r\n    state: IState = {\r\n        recordNotFound: false, loading: false, customerName: \"\"\r\n    }\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.masterDataService = this.getServices().masterDataService;\r\n\r\n    }\r\n    updateField = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const name: string | null = target.getAttribute(\"name\");\r\n        if (null == name) return;\r\n        this.setState({ [name]: target.value }, this.loadRecords);\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    searchRecord = (e) => {\r\n        e.preventDefault();\r\n        e.preventDefault();\r\n        const code: string = this.state.customerName;\r\n        if (code.trim() == \"\") return;\r\n        this.loadRecords();\r\n    }\r\n    recordsLoaded = (response: WebResponse) => {\r\n        if (!response.entities || !response.entities[0]) {\r\n            throw new Error(\"Pelanggan tidak ditemukan\");\r\n        }\r\n        \r\n        this.setState({ recordList: response.entities , recordNotFound: false });\r\n    }\r\n    setCustomer = (customer:Customer) => {\r\n        this.setState({customer:customer, customerName: customer.name, recordList:undefined});\r\n        if (this.props.setCustomer) {\r\n            this.props.setCustomer(customer);\r\n        }\r\n    }\r\n    recordsNotFound = (e: any) => {\r\n        this.setState({ recordNotFound: true });\r\n    }\r\n    loadRecords = ( ) => {\r\n        if (this.state.loading) return;\r\n        this.commonAjax(this.masterDataService.getRecordsByKeyLike,\r\n            this.recordsLoaded, this.recordsNotFound, 'customer', 'name', this.state.customerName);\r\n    }\r\n    reset = (e: any) => {\r\n        this.setState({ customerName: \"\" })\r\n    }\r\n    render() {\r\n        const recordList:Customer[] = this.state.recordList??[];\r\n        return (\r\n\r\n            <form onSubmit={this.searchRecord} >\r\n                <Modal toggleable={true} title=\"Pilih Pelanggan\" footerContent={\r\n                    <Fragment>\r\n                        <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/customer\" className=\"btn btn-outline-secondary\" />\r\n                        <input type=\"submit\" className=\"btn btn-secondary\" value=\"Cari\" />\r\n                        <input type=\"reset\" onClick={this.reset} className=\"btn btn-outline-secondary\" />\r\n                    </Fragment>\r\n                } >\r\n                    <div className=\"form-group\">\r\n                        <FormGroup label=\"Nama\">\r\n                            <input placeholder=\"Nama\" value={this.state.customerName} onChange={this.updateField} required className=\"form-control\" name=\"customerName\" />\r\n                            {recordList.length > 0?<div style={{position:'absolute', zIndex: 200}} className=\"container-fluid bg-light rounded-sm border border-dark\">\r\n                                {recordList.map(p=>{\r\n                                    return (\r\n                                        <div className=\"option-item\"onClick={()=>{\r\n                                            this.setCustomer(p);\r\n                                        }} style={{cursor: 'pointer'}} key={\"CUST-\"+p.id} >{p.name}</div>\r\n                                    )\r\n                                })}\r\n                                <a onClick={this.recordsNotFound}><i className=\"fas fa-times\"/>&nbsp;close</a>\r\n                            </div>:null}\r\n                        </FormGroup>\r\n                    </div>\r\n                    <CustomerDetail loading={this.state.loading} customer={this.state.customer} notFound={this.state.recordNotFound} />\r\n                </Modal>\r\n            </form>\r\n        )\r\n    }\r\n\r\n}\r\nconst CustomerDetail = (props: { loading: boolean, customer?: Customer, notFound: boolean }) => {\r\n    const style = { height: '120px' };\r\n    if (props.loading) {\r\n        return <div style={style}><Spinner /></div>\r\n    }\r\n    if (true == props.notFound) {\r\n        return <div style={style}><div className=\"alert alert-warning\">Pelanggan tidak ditemukan</div></div>\r\n    }\r\n    if (!props.customer) {\r\n        return <div style={style}><div className=\"alert alert-secondary\">Silakan pilih pelanggan</div></div>\r\n    }\r\n    const customer: Customer = props.customer;\r\n    return (\r\n        <div style={style}>\r\n            <h2>{customer.name}</h2>\r\n            <p>{customer.age} tahun</p>\r\n            <address>\r\n                {customer.address}<br />\r\n                {/* <abbr title=\"Contact\">Contact: </abbr>{customer.a} */}\r\n            </address>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(CustomerFormV2))","import React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport CustomerForm from './CustomerForm';\r\nimport ProductForm from '../ProductForm';\r\nimport Product from '../../../../models/Product';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport Card from '../../../container/Card';\r\nimport { beautifyNominal, greeting } from '../../../../utils/StringUtil';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport Modal from '../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport Customer from '../../../../models/Customer';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport BaseTransactionPage from '../BaseTransactionPage';\r\nimport { ProductFlowItemInput, HealthCenterForm, DestinationInfo } from './transactionOutForms';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\nimport ProductFormV2 from '../ProductFormV2';\r\nimport CustomerFormV2 from './CustomerFormV2';\r\nconst CUSTOMER = \"CUSTOMER\", HEALTH_CENTER = \"HEALTH_CENTER\";\r\n\r\nclass State {\r\n    selectedProduct: Product | undefined = undefined;\r\n    transaction: Transaction = new Transaction();\r\n    availableProducts: ProductFlow[] | undefined = undefined;\r\n    healthCenters: HealthCenter[] = [];\r\n    loadingProducts: boolean = false;\r\n}\r\nclass TransactionOut extends BaseTransactionPage {\r\n\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Distribusi\");\r\n        this.state.transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n    }\r\n\r\n    updateDestination = (e) => {\r\n        const destination = e.target.value;\r\n        const transaction = this.state.transaction;\r\n\r\n        if (destination == CUSTOMER) {\r\n            transaction.healthCenterDestination = undefined;\r\n        } else if (destination == HEALTH_CENTER) {\r\n            transaction.customer = undefined;\r\n\r\n            transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n            transaction.healthCenterDestination = this.state.healthCenters[0];\r\n        }\r\n        transaction.destination = destination;\r\n        this.setState({\r\n            selectedProduct: undefined,\r\n            availableProducts: [], transaction: transaction\r\n        });\r\n    }\r\n\r\n    healthCentersLoaded = (response: WebResponse) => {\r\n        if (!response.entities || response.entities.length == 0) {\r\n            this.setState({ healthCenters: [{ id: -1, name: \"NO DATA, Please Check Master Data\" }] });\r\n            return;\r\n        }\r\n        const transaction = this.state.transaction;\r\n        if (!transaction.healthCenterLocation) {\r\n            transaction.healthCenterLocation = this.getMasterHealthCenter();\r\n        }\r\n        this.masterDataService.setHealthCenters(response.entities);\r\n        this.setState({ healthCenters: response.entities, transaction: transaction });\r\n    }\r\n\r\n    loadHealthCenters = (force: boolean = false) => {\r\n        const transaction = this.state.transaction;\r\n        transaction.healthCenterLocation = undefined;\r\n\r\n        if (!force && this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n\r\n        this.setState({ healthCenters: [], transaction: transaction, availableProduct: [] }, ()=> {\r\n            this.commonAjax(\r\n                this.masterDataService.loadHealthCenters,\r\n                this.healthCentersLoaded, this.showCommonErrorAlert,\r\n            )\r\n        });        \r\n    }\r\n\r\n    setProduct = (product: Product) => {\r\n        this.setState({ selectedProduct: product }, this.loadAvailableProducts);\r\n    }\r\n\r\n    availableProductsLoaded = (response: WebResponse) => {\r\n        this.setState({ availableProducts: response.entities, loadingProducts: false });\r\n    }\r\n    availableProductsNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ loadingProducts: false });\r\n    }\r\n    loadAvailableProducts = () => {\r\n        if (!this.state.selectedProduct || !this.state.transaction.healthCenterLocation) {\r\n            console.warn(\"(!this.state.selectedProduct || !this.state.selectedHealthCenter)\");\r\n            return;\r\n        }\r\n        if (this.state.loadingProducts) return;\r\n        this.commonAjax(\r\n            this.inventoryService.getAvailableProducts,\r\n            this.availableProductsLoaded,\r\n            this.availableProductsNotLoaded,\r\n            this.state.selectedProduct.code,\r\n            this.state.transaction.healthCenterLocation\r\n        )\r\n        this.setState({ loadingProducts: true });\r\n    }\r\n    didMountCallback = () => {\r\n        this.loadHealthCenters();\r\n    } \r\n    addToCart = (availableProductFlow: ProductFlow) => {\r\n        const productFlow: ProductFlow = ProductFlow.fromReference(availableProductFlow);\r\n        const transaction = this.state.transaction;\r\n        transaction.addProductFlow(productFlow);\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    updateSelectedHealthCenter = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters.filter(h => h.id?.toString() == input.value);\r\n        if (this.state.transaction.destination == HEALTH_CENTER) return;\r\n        this.showConfirmation(\"Ubah Lokasi\").then((ok) => {  if (!ok) return;\r\n            const transaction = new Transaction();\r\n            transaction.healthCenterLocation = healthCenters[0];\r\n            if (healthCenters.length > 0) {\r\n                this.setState({\r\n                    selectedProduct: undefined,\r\n                    availableProducts: [],\r\n                    transaction: transaction\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n    setCustomer = (customer: Customer) => {\r\n        const transaction: Transaction = this.state.transaction;\r\n        transaction.customer = customer;\r\n        this.setTransaction(transaction);\r\n    }\r\n\r\n    submit = (e) => {\r\n        e.preventDefault();\r\n        if (!this.state.transaction.healthCenterLocation || (!this.state.transaction.customer && !this.state.transaction.healthCenterDestination)) {\r\n            this.showError(\"Silakan lengkapi kolom\");\r\n            return;\r\n        }\r\n        this.showConfirmation(\"Lanjutkan Transaksi?\").then((ok) => { if (!ok) return;\r\n            this.props.history.push({\r\n                pathname: \"/transaction/productout/confirm\",\r\n                state: { transaction: this.state.transaction }\r\n            })\r\n        })\r\n    }\r\n    setHealthCenterDestination = (e: ChangeEvent) => {\r\n        const target = e.target as HTMLSelectElement;\r\n        const selecteds = this.state.healthCenters.filter((h) => { return h.id == parseInt(target.value ?? \"0\") });\r\n        if (selecteds.length == 0) return;\r\n        const transaction = this.state.transaction;\r\n        transaction.healthCenterDestination = selecteds[0];\r\n        this.setTransaction(transaction);\r\n    }\r\n    render() {\r\n        const availableProducts: ProductFlow[] = this.state.availableProducts ?? [];\r\n        const transaction: Transaction = this.state.transaction;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters;\r\n        if (!transaction.healthCenterLocation || healthCenters.length == 0) {\r\n            return <div className=\"container-fluid section-body\">\r\n                <h2>Transaksi :: Distribusi</h2>\r\n                <Spinner />\r\n            </div>\r\n        }\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                <h2>Transaksi :: Distribusi {transaction.healthCenterLocation?.name}</h2>\r\n                <form onSubmit={(e) => { e.preventDefault() }} className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                    \r\n                    <p />\r\n                    <FormGroup label=\"Lokasi\">\r\n                        <select autoComplete=\"off\" value={transaction.healthCenterLocation?.id} onChange={this.updateSelectedHealthCenter} className=\"form-control\">\r\n                            {healthCenters.map((healthCenter, i) => {\r\n                                return (<option key={\"opt-location-\" + i} value={healthCenter.id}>{healthCenter.name}</option>)\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Tujian\">\r\n                        <select autoComplete=\"off\" value={transaction.destination} onChange={this.updateDestination} className=\"form-control\">\r\n                            <option value={CUSTOMER} >Pelanggan</option>\r\n                            {transaction.healthCenterLocation?.id == this.getMasterHealthCenter().id ?\r\n                                <option value={HEALTH_CENTER}>Puskesmas</option> : null}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <DestinationInfo transaction={transaction} />\r\n                    <AnchorButton iconClassName=\"fas fa-sync-alt\" className=\"btn btn-secondary btn-sm\" onClick={(e) => this.loadHealthCenters(true)} >Reload Location</AnchorButton>\r\n                </form>\r\n                <div className=\"row\">\r\n                    <div className=\"col-6\"><ProductFormV2 setProduct={this.setProduct} /></div>\r\n                    <div className=\"col-6\">\r\n                        {transaction.destination == CUSTOMER ?\r\n                            <CustomerFormV2 setCustomer={this.setCustomer} /> :\r\n                            <HealthCenterForm value={transaction.healthCenterDestination} setHealthCenter={this.setHealthCenterDestination}\r\n                                healthCenters={this.state.healthCenters} />\r\n                        }\r\n                    </div>\r\n\r\n                </div>\r\n                <Modal toggleable={true} title={\"Produk tersedia di \" + transaction.healthCenterLocation?.name}>\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Id Stok\", \"Nama\", \"Jumlah Masuk\", \"Digunakan\", \"Stok\", \"Unit\", \"Generik\", \"Kadaluarsa\", \"Opsi\")}\r\n                        <tbody>\r\n                            {this.state.loadingProducts ?\r\n                                <tr><td colSpan={9}><Spinner /></td></tr>\r\n                                :\r\n                                availableProducts.length == 0? <tr><td colSpan={9}><SimpleWarning children=\"Tidak ada data\" /></td></tr>:\r\n                                availableProducts.map((productFlow, i) => {\r\n                                    const product: Product = productFlow.product ?? new Product();\r\n                                    const alreadyAdded = transaction.hasProductFlowReferenceid(productFlow.id ?? 0);\r\n                                    return (\r\n                                        <tr key={\"pf-tr-\" + i}>\r\n                                            <td>{i + 1}</td> <td>{productFlow.id}</td>\r\n                                            <td>{product.name} ({product.code})</td> \r\n                                            <td>{productFlow.count} </td>\r\n                                            <td>{productFlow.usedCount} </td>\r\n                                            <td>{beautifyNominal(productFlow.stock)}</td>\r\n                                            <td>{product.unit?.name}</td>\r\n                                            <td>{productFlow.generic?\"Yes\":\"No\"}</td>\r\n                                            <td>{productFlow.expiredDate ? new Date(productFlow.expiredDate).toLocaleDateString(\"ID\") : \"-\"}</td>\r\n                                            <td>\r\n                                                {alreadyAdded ? <i className=\"fas fa-check text-success\" /> : null}\r\n                                                <AnchorButton show={alreadyAdded == false} onClick={(e) => this.addToCart(productFlow)} iconClassName=\"fas fa-plus\" className=\"btn btn-dark btn-sm\" />\r\n                                            </td>\r\n                                        </tr>\r\n                                    )\r\n                                })}\r\n                        </tbody>\r\n                    </table>\r\n                </Modal>\r\n                <p />\r\n                <Card title=\"Daftar Produk\">\r\n                    <form onSubmit={this.submit}>\r\n                        <table className=\"table table-striped\"  >\r\n                            {tableHeader(\"No\", \"Id Stok\", \"Nama\", \"Stok\", \"Qty\", \"Unit\", \"Generk\", \"Kadaluarsa\", \"Opsi\")}\r\n                            <tbody>\r\n                                {transaction.productFlows.map((productFlow, i) => {\r\n                                    return <ProductFlowItemInput\r\n                                        updateProductFlow={this.updateProductFlow}\r\n                                        productFlow={productFlow} key={\"PF_ITEM_\" + i}\r\n                                        index={i} remove={this.removeProductFlow} />\r\n                                })}\r\n                                <tr>\r\n                                    <td colSpan={8} >\r\n                                        <AnchorButton show={transaction.productFlowCount() > 0} onClick={this.removeAll} className=\"btn btn-danger\" iconClassName=\"fas fa-times\" >Remove All</AnchorButton>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                        {(transaction.customer || transaction.healthCenterDestination) && transaction.productFlowCount() > 0 ?\r\n                            this.buttonSubmitTransaction(transaction) : null}\r\n                    </form>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionOut))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport TransactionService from '../../../../services/TransactionService';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport BasePage from './../../../BasePage';\r\n\r\nclass State { transaction?: Transaction }\r\nclass TransactionInConfirmation extends BasePage {\r\n    transactionService: TransactionService;\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Konfirmasi Transaksi\", true);\r\n        this.transactionService = this.getServices().transactionService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus(() => {\r\n            this.validateTransactionFromProps();\r\n            this.scrollTop();\r\n        });\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            this.props.history.push(\"/transaction/productin\");\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    back = (e) => {\r\n        this.props.history.push({\r\n            pathname: \"/transaction/productin\",\r\n            state: { transaction: this.state.transaction?.code ? new Transaction() : this.state.transaction }\r\n        })\r\n    }\r\n    onSuccess = (response: WebResponse) => {\r\n        this.showInfo(\"Transaksi Berhasil\");\r\n        this.props.history.push({\r\n            pathname: \"/transaction/detail\",\r\n            state: { transaction: response.transaction }\r\n        })\r\n    }\r\n    confirm = (e) => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.submitTransactionIN,\r\n            this.onSuccess,\r\n            this.showCommonErrorAlert,\r\n            this.state.transaction\r\n        )\r\n    }\r\n    render() {\r\n        const transaction: Transaction | undefined = this.state.transaction;\r\n        if (!transaction) return null;\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid section-body\">\r\n                <h2>Konfirmasi Transaksi</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Pastikan bahwa data transaksi telah sesuai\r\n                </div>\r\n                <Card title=\"Information\">\r\n                    {transaction.code ?\r\n                        <FormGroup label=\"Kode\">\r\n                            {transaction.code}\r\n                        </FormGroup> : null}\r\n                    <FormGroup label=\"Tanggal\">\r\n                        {new Date(transaction.transactionDate).toString()}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Pemasok\">\r\n                        {transaction.supplier?.name}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Catatan\"> {transaction.description}  </FormGroup>\r\n                    <AnchorButton style={{ marginRight: '5px' }} onClick={this.back} iconClassName=\"fas fa-angle-left\" children=\"Kembali\" />\r\n                    <AnchorButton show={transaction.code == undefined} onClick={this.confirm} iconClassName=\"fas fa-check\" className=\"btn btn-primary\" children=\"Konfirmasi\" />\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <table className=\"table table-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th><th>Nama</th><th>Qty</th><th>Unit</th><th>Generik</th><th>Harga @Unit</th><th>Kadaluarsa</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {transaction.productFlows.map((productFlow, i) => {\r\n                                return (\r\n                                    <ProductFlowRow productFlow={productFlow} index={i} key={\"pf-tr-cnfm-\" + i} />\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ProductFlowRow = (props: { productFlow: ProductFlow, index: number }) => {\r\n    const i = props.index, productFlow = props.productFlow;\r\n    return (<tr  >\r\n        <td>{i + 1}</td>\r\n        <td>{productFlow.product.name}</td>\r\n        <td>{beautifyNominal(productFlow.count)}</td>\r\n        <td>{productFlow.product.unit?.name}</td>\r\n        <td>{productFlow.generic ? \"Yes\" : \"No\"}</td>\r\n        <td>{beautifyNominal(productFlow.price)}</td>\r\n        <td>{productFlow.expiredDate ? new Date(productFlow.expiredDate).toLocaleDateString(\"ID\") : \"-\"}</td>\r\n    </tr>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionInConfirmation))","import React from 'react'\nimport BaseComponent from './../../../BaseComponent';\nimport AttachmentInfo from './../../../../models/common/AttachmentInfo';\nimport ReportService from './../../../../services/ReportService';\nimport { mapCommonUserStateToProps } from './../../../../constant/stores';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport AnchorWithIcon from './../../../navigation/AnchorWithIcon';\nclass IState {\n    loading: boolean = false;\n}\nclass PrintReceipt extends BaseComponent {\n    state:IState = new IState();\n    reportService: ReportService;\n    constructor(props) {\n        super(props, true);\n        this.reportService = this.getServices().reportService;\n    }\n    startLoading = () => this.setState({ loading: true });\n    endLoading = () => this.setState({ loading: false });\n    receiptCreated = (attachment: AttachmentInfo) => {\n        this.showConfirmation(\"Save \" + attachment.name + \" ?\")\n            .then((ok) => {\n                if (!ok) return;\n                Object.assign(document.createElement('a'), {\n                    target: '_blank',\n                    download: attachment.name,\n                    style: { display: 'none' },\n                    href: attachment.dataUrl,\n                }).click();\n            })\n\n    }\n    printReceipt = () => {\n\n        this.commonAjaxWithProgress(\n            this.reportService.printTransactionReceipt,\n            this.receiptCreated,\n            this.showCommonErrorAlert,\n            this.props.transactionCode\n        )\n    }\n\n    render() {\n        if (this.state.loading) {\n            return (\n                <AnchorWithIcon className=\"btn btn-dark\">\n                    <span className=\"spinner-border spinner-border-sm\" />\n                    Loading...\n                </AnchorWithIcon>\n            )\n        }\n        return (\n            <AnchorWithIcon onClick={this.printReceipt}\n                show={this.props.transactionCode != undefined}\n                iconClassName=\"fas fa-file\" className=\"btn btn-dark\">Cetak Struk</AnchorWithIcon>\n        )\n    }\n}\n\nexport default withRouter(connect(\n    mapCommonUserStateToProps,\n)(PrintReceipt))","import React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Transaction from './../../../../models/Transaction';\r\nimport Modal from './../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport ProductFlow from './../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport SimpleError from './../../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport TransactionService from './../../../../services/TransactionService';\r\nimport ReportService from './../../../../services/ReportService';\r\nimport BasePage from './../../../BasePage';\r\nimport PrintReceipt from './PrintReceipt';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nclass IState {\r\n    transaction?: Transaction;\r\n    transactionCode?: string;\r\n    dataNotFound: boolean = false;\r\n    loading: boolean = false;\r\n}\r\nclass TransactionDetail extends BasePage {\r\n    transactionService: TransactionService;\r\n    reportService:ReportService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Transaction Detail\", true);\r\n        this.transactionService = this.getServices().transactionService;\r\n        this.reportService = this.getServices().reportService;\r\n    }\r\n    startLoading = () => this.setState({ loading: true });\r\n    endLoading = () => this.setState({ loading: false });\r\n    componentDidMount() {\r\n        this.validateLoginStatus(()=>{\r\n            this.validateTransactionFromProps();\r\n            document.title = \"Transaction Detail\";\r\n            this.scrollTop();\r\n        });\r\n        \r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (!response.transaction) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ transaction: response.transaction, dataNotFound: false });\r\n    }\r\n\r\n    recordNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ dataNotFound: true, transaction: undefined });\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.loadData();\r\n    }\r\n    loadData = () => {\r\n        console.debug(\" this.state.transactionCode: \", this.state.transactionCode);\r\n        this.commonAjax(\r\n            this.transactionService.getTransactionByCode,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.state.transactionCode\r\n        )\r\n    } \r\n    recordDeleted = (response:WebResponse) => {\r\n        this.showInfo(\"Record has been successfully deleted\")\r\n        this.loadData();\r\n    }\r\n    recordNotDeleted = (e:any) => {\r\n        console.error(e);\r\n        this.showError(\"Cannot delete transaction \"+this.state.transaction?.code\r\n        +\", please delete all related stock/ product flow data\");\r\n    }\r\n    deleteRecord = (e) => {\r\n        if (!this.state.transaction) return;\r\n        this.showConfirmationDanger(\"Delete Record with code: \"+ this.state.transaction?.code+\"?\").then(ok=>{\r\n            if(!ok) return\r\n            this.commonAjax(\r\n                this.transactionService.deleteTransactionByCode,\r\n                this.recordDeleted,\r\n                this.recordNotDeleted,\r\n                this.state.transaction?.code\r\n            )\r\n        })\r\n    }\r\n   \r\n    validateTransactionFromProps = () => {\r\n        if (this.props.match.params && this.props.match.params.code) {\r\n            const code = this.props.match.params.code;\r\n\r\n            this.commonAjax(\r\n                this.transactionService.getTransactionByCode,\r\n                this.recordLoaded,\r\n                this.recordNotLoaded,\r\n                code\r\n            )\r\n            return;\r\n        }\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionDetail\" className=\"container-fluid section-body\" >\r\n                <h2>Rincian Transaksi</h2>\r\n                <div className=\"row\">\r\n                    <form className=\"col-md-6\" onSubmit={this.onSubmit}>\r\n                        <Modal title=\"Cari dengan kode\"\r\n                            footerContent={\r\n                                <Fragment>\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/transaction\" className=\"btn btn-secondary\" >Daftar Record Transaksi</AnchorWithIcon>\r\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Cari\" />\r\n                                </Fragment>\r\n                            }>\r\n                            <FormGroup label=\"Kode\">\r\n                                <input required onChange={this.handleInputChange} value={this.state.transactionCode??\"\"} \r\n                                    name=\"transactionCode\" type=\"text\" placeholder=\"Kode Transaksi\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                        </Modal>\r\n                    </form>\r\n                    <div className=\"col-md-6\"></div>\r\n                    <div className=\"col-md-12\">\r\n                        {this.state.loading ?\r\n                            <Spinner /> :\r\n                            <Fragment>\r\n                                <SimpleError show={this.state.dataNotFound == true} >Transaksi tidak ditemukan</SimpleError>\r\n                                <TransactionData show={this.state.transaction != undefined} transaction={this.state.transaction} />\r\n                                \r\n                                <div className=\"btn-group\">\r\n                                <AnchorWithIcon show={this.state.transaction != undefined} onClick={this.deleteRecord} \r\n                                    iconClassName=\"fas fa-times\" className=\"btn btn-danger\">Hapus Transaksi</AnchorWithIcon> \r\n                                <PrintReceipt transactionCode={this.state.transaction?.code} />\r\n                                </div> \r\n                            </Fragment>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst TransactionData = (props) => {\r\n    if (props.show == false) return null;\r\n    const transaction: Transaction = props.transaction;\r\n    const productFlows: ProductFlow[] = transaction.productFlows ? transaction.productFlows : [];\r\n    const isTransOut = transaction.type  == 'TRANS_OUT';\r\n    const date = new Date(transaction.transactionDate ?? new Date()).toLocaleString(\"ID\");\r\n    return (\r\n        <Modal title=\"Transaction Data\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Id Record\" orientation='horizontal' children={transaction.id}/>\r\n                    <FormGroup label=\"Kode\" orientation='horizontal' children={transaction.code}/>\r\n                    <FormGroup label=\"Tipe\" orientation='horizontal' children={transaction.type}/>\r\n                    <FormGroup label=\"Tanggal\" orientation='horizontal' children={date}/>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <Fragment>\r\n                        <FormGroup show={transaction.type == 'TRANS_OUT'} \r\n                            label=\"Pelanggan\" orientation='horizontal' \r\n                            children={transaction.customer?.name} />\r\n                        <FormGroup show={transaction.type == 'TRANS_OUT_TO_WAREHOUSE'} \r\n                            label=\"Puskesmas\" orientation='horizontal'\r\n                            children={transaction.healthCenterDestination?.name} />\r\n                        <FormGroup show={transaction.type == 'TRANS_IN'} \r\n                            label=\"Pemasok\" orientation='horizontal'\r\n                            children={transaction.supplier?.name} />\r\n                    </Fragment>\r\n                    <FormGroup label=\"User\" orientation='horizontal'\r\n                         children={transaction.user?.displayName} />\r\n\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"alert alert-info\">\r\n                        <h5>Note:</h5>\r\n                        {transaction.description}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <h3>Products</h3>\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Id Record\", \"Nama\", \"Qty\", \r\n                            \"Unit\", \"Generic\", \"Kadaluarsa\", \r\n                            \"Harga @Unit\", \"Total Harga\",isTransOut?\"Id Stok\":\"Used Qty\")} \r\n                        <tbody>\r\n                            {productFlows.map((pf, i) => {\r\n                                const product: Product = pf.product ?? new Product();\r\n                                const price = pf.price;\r\n                                return (\r\n                                    <tr key={\"pf-tr-\" + i}>\r\n                                        <td>{i + 1}</td>\r\n                                        <td>{pf.id}</td>\r\n                                        <td>{product.name} ({product.code})</td>\r\n                                        <td>{beautifyNominal(pf.count)}</td>\r\n                                        <td>{product.unit?.name}</td>\r\n                                        <td>{pf.generic?\"Yes\":\"No\"}</td>\r\n                                        <td>{pf.expiredDate?\r\n                                        \r\n                                        new Date(pf.expiredDate).toLocaleDateString(\"ID\"):\"-\"}</td>\r\n                                        <td>{beautifyNominal(price)}</td>\r\n                                        <td>{beautifyNominal((price ?? 0) * (pf.count ?? 0))}</td>\r\n                                        <td>{isTransOut?\r\n                                            pf.referenceProductFlow?pf.referenceProductFlow.id:\"-\":\r\n                                            beautifyNominal(pf.usedCount)} \r\n                                        </td>\r\n                                    </tr>\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                    {/* <div className=\"alert alert-info text-left\">\r\n                        <FormGroup label=\"Total unit\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).unit)}</p>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Total price\">\r\n                            <p>{beautifyNominal(totalUnitAndPrice(productFlows).productFlowPrice)}</p>\r\n                        </FormGroup>\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n})\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(TransactionDetail))","import React, { Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport Modal from '../../../container/Modal';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport AnchorWithIcon from '../../../navigation/AnchorWithIcon';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport TransactionService from '../../../../services/TransactionService';\r\nimport ReportService from '../../../../services/ReportService';\r\nimport BasePage from '../../../BasePage';\r\nimport { tableHeader } from './../../../../utils/CollectionUtil';\r\nclass IState {\r\n    transaction?: Transaction;\r\n    transactionCode?: string;\r\n    dataNotFound: boolean = false;\r\n    loading: boolean = false;\r\n}\r\nclass TransactionRelatedRecord extends BasePage {\r\n    transactionService: TransactionService;\r\n    reportService: ReportService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Transaction Related Record\", true);\r\n        this.transactionService = this.getServices().transactionService;\r\n        this.reportService = this.getServices().reportService;\r\n    }\r\n    // startLoading = () => this.setState({ loading: true });\r\n    // endLoading = () => this.setState({ loading: false });\r\n    componentDidMount() {\r\n        this.validateLoginStatus(() => {\r\n            this.validateTransactionFromProps();\r\n            this.scrollTop();\r\n        });\r\n\r\n    }\r\n    componentDidUpdate() {\r\n        this.validateLoginStatus();\r\n    }\r\n\r\n    recordLoaded = (response: WebResponse) => {\r\n        if (!response.transaction) {\r\n            throw new Error(\"Not found\");\r\n        }\r\n        this.setState({ transaction: response.transaction, dataNotFound: false });\r\n    }\r\n\r\n    recordNotLoaded = (e: any) => {\r\n        console.error(e);\r\n        this.setState({ dataNotFound: true, transaction: undefined });\r\n    }\r\n\r\n    onSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.loadData();\r\n    }\r\n    loadData = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.getTransactionRelatedRecord,\r\n            this.recordLoaded,\r\n            this.recordNotLoaded,\r\n            this.state.transactionCode\r\n        )\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (this.props.match.params && this.props.match.params.code) {\r\n            const code = this.props.match.params.code;\r\n\r\n            this.commonAjaxWithProgress(\r\n                this.transactionService.getTransactionRelatedRecord,\r\n                this.recordLoaded,\r\n                this.recordNotLoaded,\r\n                code\r\n            )\r\n            return;\r\n        }\r\n        if (!this.props.location.state) {\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"TransactionRelatedRecord\" className=\"container-fluid section-body\" >\r\n                <h2>Rincian Pemetaan Stok Transaksi</h2>\r\n                <div className=\"row\">\r\n                    <form className=\"col-md-6\" onSubmit={this.onSubmit}>\r\n                        <Modal title=\"Cari dengan kode\"\r\n                            footerContent={\r\n                                <Fragment>\r\n                                    <AnchorWithIcon iconClassName=\"fas fa-list\" attributes={{ target: '_blank' }} to=\"/management/transaction\" className=\"btn btn-secondary\" >Daftar Record Transaksi</AnchorWithIcon>\r\n                                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Cari\" />\r\n                                </Fragment>\r\n                            }\r\n                        >\r\n                            <FormGroup label=\"Kode\">\r\n                                <input value={this.state.transactionCode ?? \"\"} required onChange={this.handleInputChange} type=\"text\" name=\"transactionCode\" placeholder=\"Kode Transaksi\" className=\"form-control\" />\r\n                            </FormGroup>\r\n                        </Modal>\r\n                    </form>\r\n                    <div className=\"col-md-6\"></div>\r\n                    <div className=\"col-md-12\">\r\n                        {this.state.loading ?\r\n                            <Spinner /> :\r\n                            <Fragment>\r\n                                <SimpleError show={this.state.dataNotFound == true} >Transaksi tidak ditemukan</SimpleError>\r\n                                <TransactionData show={this.state.transaction != undefined} transaction={this.state.transaction} />\r\n\r\n                            </Fragment>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst TransactionData = (props) => {\r\n    if (props.show == false) return null;\r\n    const transaction: Transaction = props.transaction;\r\n    const productFlows: ProductFlow[] = transaction.productFlows ? transaction.productFlows : [];\r\n    const date = new Date(transaction.transactionDate ?? new Date()).toLocaleString(\"ID\");\r\n    return (\r\n        <Modal title=\"Transaction Data\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Id Record\" orientation='horizontal' children={transaction.id} />\r\n                    <FormGroup label=\"Kode\" orientation='horizontal' children={transaction.code} />\r\n                    <FormGroup label=\"Tipe\" orientation='horizontal' children={transaction.type} />\r\n                    <FormGroup label=\"Tanggal\" orientation='horizontal' children={date} />\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    <Fragment>\r\n                        <FormGroup show={transaction.type == 'TRANS_OUT'}\r\n                            label=\"Pelanggan\" orientation='horizontal'\r\n                            children={transaction.customer?.name} />\r\n                        <FormGroup show={transaction.type == 'TRANS_OUT_TO_WAREHOUSE'}\r\n                            label=\"Puskesmas\" orientation='horizontal'\r\n                            children={transaction.healthCenterDestination?.name} />\r\n                        <FormGroup show={transaction.type == 'TRANS_IN'}\r\n                            label=\"Pemasok\" orientation='horizontal'\r\n                            children={transaction.supplier?.name} />\r\n                    </Fragment>\r\n                    <FormGroup label=\"User\" orientation='horizontal'\r\n                        children={transaction.user?.displayName} />\r\n\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <div className=\"alert alert-info\">\r\n                        <h5>Note:</h5>\r\n                        {transaction.description}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-12\">\r\n                    <h3>Products</h3>\r\n                    <table className=\"table xtable-striped\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>No</th> <th colSpan={4}>Name</th> <th>Qty</th> <th>Trans. Code</th><th>Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {productFlows.map((item, i) => {\r\n                                const refItemsLv1 = item.referencingItems ?? [];\r\n                                return <Fragment key={\"main-pf-\" + i}>\r\n                                    <tr >\r\n                                        <td children={i + 1} />\r\n                                        <td colSpan={4}>\r\n                                            Item Id: {item.id}\r\n                                            <br/>{item.product?.name} | {item.product?.unit?.name}\r\n                                        </td>\r\n                                        <td>{item.count}</td>\r\n                                        <td>{item.transaction?.code}<br />({item.transaction?.type})</td>\r\n                                        <td>{transactionDateTime(item.transaction)}</td>\r\n                                    </tr>\r\n                                    {refItemsLv1 ? <tr><td /><td style={{ fontSize: '0.7em' }} colSpan={7} >Usage List</td></tr> : null}\r\n                                    {refItemsLv1.map((rfItemlv1, r) => {\r\n                                        const refItemsLv2 = rfItemlv1.referencingItems ?? [];\r\n                                        return (\r\n                                            <Fragment key={\"ref-pf-\" + r + \"-\" + i}>\r\n                                                <tr >\r\n                                                    <td /><td children={r + 1} />\r\n                                                    <td colSpan={3}>Item Id: {rfItemlv1.id}</td>\r\n                                                    <td>{rfItemlv1.count}</td>\r\n                                                    <td>{rfItemlv1.transaction?.code}\r\n                                                        <br />({rfItemlv1.transaction?.type})</td>\r\n                                                    <td>{transactionDateTime(rfItemlv1.transaction)}</td>\r\n                                                </tr>\r\n                                                {refItemsLv2.length > 0 ? <tr><td colSpan={2} /><td style={{ fontSize: '0.7em' }}  colSpan={6} >Usage List</td></tr> : null}\r\n                                                {refItemsLv2.map((rfItemlv2, r2) => {\r\n                                                    return (\r\n                                                        <Fragment key={\"ref-pf2-\" + r + \"-\" + i + \"-\" + r2}>\r\n                                                            <tr >\r\n                                                                <td colSpan={2} /><td children={r2 + 1} />\r\n                                                                <td colSpan={2}>Item Id: {rfItemlv2.id}</td>\r\n                                                                <td>{rfItemlv2.count}</td>\r\n                                                                <td>{rfItemlv2.transaction?.code}\r\n                                                                    <br />({rfItemlv2.transaction?.type})</td>\r\n                                                                <td>{transactionDateTime(rfItemlv2.transaction)}</td>\r\n                                                            </tr>\r\n\r\n                                                        </Fragment>\r\n                                                    )\r\n                                                })}\r\n\r\n                                            </Fragment>\r\n                                        )\r\n                                    })}\r\n                                </Fragment>\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nconst transactionDateTime = (transaction?: Transaction) => {\r\n    if (!transaction || !transaction.transactionDate) return null;\r\n    const date: Date = new Date(transaction.transactionDate);\r\n    return date.toLocaleDateString(\"ID\") + \" \" + date.toLocaleTimeString();\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n)(TransactionRelatedRecord))","\r\n\r\nimport React, { ChangeEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport Transaction from '../../../../models/Transaction';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport AnchorButton from '../../../navigation/AnchorButton';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport TransactionService from '../../../../services/TransactionService';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport Product from '../../../../models/Product';\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport BasePage from './../../../BasePage';\r\n\r\nclass State { transaction?: Transaction }\r\nclass TransactionOutConfirmation extends BasePage {\r\n    transactionService: TransactionService;\r\n    state: State = new State();\r\n    constructor(props: any) {\r\n        super(props, \"Konfirmasi Transaksi\", true);\r\n        this.transactionService = this.getServices().transactionService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus(()=> {\r\n            this.validateTransactionFromProps();\r\n            this.scrollTop();\r\n        });\r\n    }\r\n    validateTransactionFromProps = () => {\r\n        if (!this.props.location.state) {\r\n            this.props.history.push(\"/transaction/productin\");\r\n            return;\r\n        }\r\n        const transaction = this.props.location.state.transaction;\r\n        if (transaction) {\r\n            this.setState({ transaction: Object.assign(new Transaction(), transaction) });\r\n        }\r\n    }\r\n    back = (e) => {\r\n        this.props.history.push({\r\n            pathname: \"/transaction/productout\",\r\n            state: { transaction: this.state.transaction?.code ? new Transaction() : this.state.transaction }\r\n        })\r\n    }\r\n    onSuccess = (response: WebResponse) => {\r\n        this.showInfo(\"Transaction Success\");\r\n        this.props.history.push({\r\n            pathname: \"/transaction/detail\",\r\n            state: { transaction: response.transaction }\r\n        })\r\n    }\r\n    confirm = (e) => {\r\n        this.commonAjaxWithProgress(\r\n            this.transactionService.submitTransactionOUT,\r\n            this.onSuccess,\r\n            this.showCommonErrorAlert,\r\n            this.state.transaction\r\n        )\r\n    }\r\n    render() {\r\n        const transaction: Transaction | undefined = this.state.transaction;\r\n        if (!transaction) return null;\r\n        return (\r\n            <div id=\"TransactionMain\" className=\"container-fluid section-body\">\r\n                <h2>Konfirmasi Transaksi</h2>\r\n                <div className=\"alert alert-info\">\r\n                    Pastikan bahwa data transaksi telah sesuai\r\n                </div>\r\n                <Card title=\"Information\">\r\n                    {transaction.code ?\r\n                        <FormGroup label=\"Kode\">\r\n                            {transaction.code}\r\n                        </FormGroup> : null}\r\n                    <FormGroup label=\"Tanggal\">\r\n                        {new Date(transaction.transactionDate).toLocaleString()}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Lokasi\">\r\n                        {transaction.healthCenterLocation?.name}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Pelanggan\">\r\n                        {transaction.customer?.name??\"-\"}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Puskesmas\">\r\n                        {transaction.healthCenterDestination?.name??\"-\"}\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Catatan\"> {transaction.description}  </FormGroup>\r\n                    <Fragment>\r\n                        <AnchorButton style={{marginRight:'5px'}} onClick={this.back} iconClassName=\"fas fa-angle-left\" children=\"Back\" />\r\n                        <AnchorButton show={transaction.code == undefined} onClick={this.confirm} iconClassName=\"fas fa-check\" className=\"btn btn-primary\" children=\"Konfirmasi\" />\r\n                    </Fragment>\r\n                </Card>\r\n                <p />\r\n                <Card title=\"Product List\">\r\n                    <table className=\"table table-striped\">\r\n                        {tableHeader(\"No\", \"Id Stok\", \"Nama\", \"Stok\", \"Qty\", \"Unit\", \"Generik\", \"Kadaluarsa\" )}\r\n                            \r\n                        <tbody>\r\n                            {transaction.productFlows.map((productFlow, i) => {\r\n                                return (\r\n                                    <ProductFlowRow productFlow={productFlow} index={i} key={\"pf-tr-cnfm-\" + i} />\r\n                                )\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </Card>\r\n                <p />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ProductFlowRow = (props: { productFlow: ProductFlow, index: number }) => {\r\n    const i = props.index, productFlow = props.productFlow;\r\n    const product: Product = props.productFlow.product;\r\n    return (<tr>\r\n        <td>{props.index + 1}</td>\r\n        <td>{productFlow.referenceProductFlow?.id}</td>\r\n        <td>{product.name}</td>\r\n        <td>{props.productFlow.referenceProductFlow?.stock} </td>\r\n        <td>{beautifyNominal(productFlow.count)}</td>\r\n        <td>{product.unit?.name}</td>\r\n        <td>{productFlow.referenceProductFlow?.generic?\"Yes\":\"No\"}</td>\r\n        <td>\r\n            {new Date(props.productFlow.expiredDate).toLocaleDateString(\"ID\")}\r\n        </td>\r\n    </tr>)\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(TransactionOutConfirmation))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BasePage from '../../BasePage';\r\nimport { greeting } from '../../../utils/StringUtil';\r\n\r\n\r\nclass InventoryMain extends BasePage {\r\n    constructor(props: any) {\r\n        super(props, \"Inventory\", true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"InventoryMain\" className=\"container-fluid section-body\">\r\n                <h2>Persediaan</h2>\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(InventoryMain))","import React, { Component, Fragment } from 'react'\r\nimport { tableHeader } from '../../../../utils/CollectionUtil';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport ProductFlow from '../../../../models/ProductFlow';\r\nimport Product from '../../../../models/Product';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport Modal from '../../../container/Modal';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\n\r\nclass State {\r\n\r\n}\r\nclass Props {\r\n    product: Product = new Product();\r\n    productFlows: ProductFlow[] = [];\r\n    location: HealthCenter = new HealthCenter();\r\n    number: number = 1;\r\n}\r\nclass ProductStockDetail extends Component<Props, State> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        const product: Product = Object.assign(new Product(), this.props.product);\r\n        let stock: number = 0;\r\n        return (\r\n            <div className=\"row alert alert-light\">\r\n                <ProductImage number={props.number} product={product} />\r\n                <div className=\"col-9\">\r\n                    <Modal title={product.name + \"(\" + product.code + \")\"} toggleable={true}>\r\n                        <div style={{ width: '100%', overflow: 'scroll' }} >\r\n                            {props.productFlows.length == 0 ? <SimpleWarning>No Data</SimpleWarning> :\r\n                                <table className=\"table table-striped\">\r\n                                    {tableHeader(\"No\", \"Id\", \"Qty\", \"Digunakan\", \"Stok\", \"Unit\", \"Kadaluarsa\", \"Lokasi\")}\r\n                                    <tbody>\r\n                                        {props.productFlows.map((productFlow, i) => {\r\n                                            stock += productFlow.stock;\r\n                                            return (\r\n                                                <tr key={\"PF_DETAIL_STOCK\" + productFlow.id + \"-\" + i}>\r\n                                                    <td>{i + 1}</td>\r\n                                                    <td>{productFlow.id}</td>\r\n                                                    <td>{productFlow.count}</td>\r\n                                                    <td>{productFlow.usedCount}</td>\r\n                                                    <td>{productFlow.stock}</td>\r\n                                                    <td>{props.product.unit?.name}</td>\r\n                                                    <td>{new Date(productFlow.expiredDate).toLocaleDateString(\"ID\")}</td>\r\n                                                    <td>{productFlow.stockLocation}</td>\r\n                                                </tr>\r\n                                            )\r\n                                        })}\r\n                                        <tr>\r\n                                            <td colSpan={4}>Total Stok</td>\r\n                                            <td >{stock}</td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                            }</div>\r\n                    </Modal>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductImage = (props: { product: Product, number: number }) => {\r\n    const product = props.product;\r\n    return (\r\n        <div className=\"col-3\">\r\n            <div className=\"card bg-light\"  >\r\n                <img className=\"card-img-top \" src={product.getDefaultImageUrl()} />\r\n                <div className=\"card-body\">\r\n                    <p className=\"card-text\">{props.number} - {product.name}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStockDetail)","import React, { Component, Fragment } from 'react' \r\nimport ProductStockDetail from './ProductStockDetail';\r\nimport ProductStock from '../../../../models/stock/ProductStock';\r\nimport HealthCenter from './../../../../models/HealthCenter';\r\nimport SimpleWarning from '../../../alert/SimpleWarning';\r\n\r\nclass State {\r\n\r\n}\r\nclass Props {\r\n    productStocks: ProductStock[] = [];\r\n    startingNumber: number = 1;\r\n    location: HealthCenter = new HealthCenter()\r\n}\r\nexport default class ProductStocksTable extends Component<Props, State> {\r\n\r\n\r\n    render() {\r\n        const stocks: ProductStock[] = this.props.productStocks;\r\n        let number: number = this.props.startingNumber;\r\n        return (\r\n            <div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\"><strong>Nama</strong></div>\r\n                    <div className=\"col-9\"><strong>Rincian</strong></div>\r\n                </div>\r\n                {stocks.length == 0?\r\n                <SimpleWarning style={{marginTop: '10px'}}>Tidak ada data</SimpleWarning>\r\n                :\r\n                stocks.map((stock, i) => {\r\n                    const product = stock.product;\r\n                    const producFlows = stock.productFlows;\r\n                    return (<Fragment key={\"ps-\" + i}>\r\n                        <ProductStockDetail number={number+i} location={this.props.location} product={product} productFlows={producFlows} />\r\n                    </Fragment>)\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n","import BaseEntity from './BaseEntity';\n\nexport default class Configuration extends BaseEntity{\n\texpiredWarningDays:number = 10;\n\tleadTime?:number;\n\tcycleTime?:number;\n\n\tconstructor(){\n\t\tsuper();\n\t}\n\n}\n","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BaseComponent from '../../../BaseComponent';\r\nimport MasterDataService from '../../../../services/MasterDataService';\r\nimport Filter from '../../../../models/common/Filter';\r\nimport HealthCenter from '../../../../models/HealthCenter';\r\nimport ProductStock from '../../../../models/stock/ProductStock';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport InventoryService from '../../../../services/InventoryService';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Spinner from '../../../loader/Spinner';\r\nimport Card from '../../../container/Card';\r\nimport ProductStocksTable from './ProductStocksTable';\r\nimport NavigationButtons from '../../../navigation/NavigationButtons';\r\nimport Configuration from './../../../../models/Configuration';\r\nimport { getHtmlInputElement } from './../../../../utils/ComponentUtil';\r\nimport ToggleButton from '../../../navigation/ToggleButton';\r\nimport { addDays, getDiffDays, getInputReadableDate } from './../../../../utils/DateUtil';\r\nimport { beautifyNominal, greeting } from '../../../../utils/StringUtil';\r\nimport BasePage from './../../../BasePage';\r\nclass IState {\r\n    productStocks: ProductStock[] = new Array();\r\n    loading: boolean = false;\r\n    filter: Filter = new Filter();\r\n    totalData: number = 0;\r\n    totalItems: number = 0;\r\n    healthCenters: HealthCenter[] = [];\r\n    selectedHealthCenter: HealthCenter = new HealthCenter();\r\n    configuration: Configuration = new Configuration();\r\n    productName:string = \"\"\r\n}\r\n\r\nclass ProductStocks extends BasePage {\r\n    masterDataService: MasterDataService;\r\n    inventoryService: InventoryService;\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Stok Produk\", true);\r\n        this.state.filter.limit = 10;\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus(() => {\r\n            this.loadHealthCenter();\r\n            this.scrollTop();\r\n        });\r\n    }\r\n\r\n    updateFilterExpDate = (e: ChangeEvent) => {\r\n        const input = getHtmlInputElement(e);\r\n        let value;\r\n        if (input.type == 'date') {\r\n            const selectedDate = new Date(input.value)\r\n            const diffDay = getDiffDays(new Date(), selectedDate);\r\n            value = diffDay;\r\n            console.debug(\"diffDay: \", diffDay);\r\n        } else {\r\n            value = input.value;\r\n        }\r\n        const config = this.state.configuration;\r\n        config.expiredWarningDays = parseInt(value);\r\n        this.setState({ configuration: config });\r\n    }\r\n\r\n    healthCentersLoaded = (response: WebResponse) => {\r\n\r\n        if (!response.entities) { return; }\r\n        this.masterDataService.setHealthCenters(response.entities ?? []);\r\n        this.setState({\r\n            healthCenters: response.entities, selectedHealthCenter:\r\n                this.getMasterHealthCenter()\r\n        },\r\n            this.loadProducts);\r\n    }\r\n\r\n    productLoaded = (response: WebResponse) => {\r\n        const config = response.configuration ?? new Configuration();\r\n        if (this.state.filter.filterExpDate) {\r\n            config.expiredWarningDays = this.state.configuration.expiredWarningDays;\r\n        }\r\n        this.setState({\r\n            totalItems: response.totalItems,\r\n            configuration: config, loading: false,\r\n            totalData: response.totalData,\r\n            productStocks: response.generalList\r\n        });\r\n    }\r\n\r\n    loadProductsAt = (page: number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter }, this.loadProducts);\r\n\r\n    }\r\n    productLoadingError = (e: any) => {\r\n        this.showCommonErrorAlert(e);\r\n        this.setState({ loading: false });\r\n    }\r\n    loadProducts = (page: number = -1) => {\r\n        this.setState({ loading: true }, () => {\r\n            if (page >= 0) {\r\n                const filter = this.state.filter;\r\n                filter.page = page;\r\n                this.setState({ filter: filter }, this.doLoadProduct)\r\n            } else {\r\n                this.doLoadProduct();\r\n            }\r\n        }\r\n        );\r\n    }\r\n    doLoadProduct = () => {\r\n        const filter = this.state.filter;\r\n        if (filter.filterExpDate && filter.ignoreEmptyValue == true) {\r\n            filter.day = this.state.configuration.expiredWarningDays;\r\n        }\r\n        filter.fieldsFilter = {\r\n            name:this.state.productName\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getProductsInHealthCenter,\r\n            this.productLoaded, this.productLoadingError,\r\n            filter, this.state.selectedHealthCenter\r\n        )\r\n    }\r\n    getLocations = () => {\r\n        const allLocObject = new HealthCenter();\r\n        allLocObject.id = 0;\r\n        allLocObject.name = \"ALL\";\r\n        const locations: HealthCenter[] = [allLocObject];\r\n        const stateLocations: HealthCenter[] = this.state.healthCenters;\r\n        locations.push(...stateLocations);\r\n        return locations;\r\n    }\r\n    updateLocation = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const filter: Filter = this.state.filter;\r\n        if (input.value.toString() == \"0\") {\r\n            filter.flag = Filter.FLAG_ALL;\r\n\r\n        } else {\r\n            filter.flag = Filter.FLAG_DEFAULT;\r\n        }\r\n        const healthCenters: HealthCenter[] = this.getLocations().filter(h => h.id?.toString() == input.value);\r\n\r\n        this.showConfirmation(\"Ubah Lokasi? *muat ulang untuk melihat perubahan\").then((ok) => {\r\n            if (!ok) return;\r\n            if (healthCenters.length > 0) {\r\n                this.setState({ filter: filter, selectedHealthCenter: healthCenters[0] });\r\n            }\r\n        });\r\n    }\r\n\r\n    loadHealthCenter = () => {\r\n        if (this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadHealthCenters,\r\n            this.healthCentersLoaded,\r\n            this.showCommonErrorAlert,\r\n        )\r\n    }\r\n    getDisplayedRecordOptions = () => {\r\n        if (this.state.totalData <= 10) { return [10] }\r\n        const range = this.state.totalData / 10;\r\n        const options: number[] = [];\r\n        let counter = 10;\r\n        for (let i = 0; i < range; i++) {\r\n            options.push(counter);\r\n            counter += 10;\r\n        }\r\n        if (counter < this.state.totalData) {\r\n            options.push(this.state.totalData);\r\n        }\r\n        return options;\r\n    }\r\n    setIgnoreEmpty = (value: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.ignoreEmptyValue = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    setFilterExpDate = (value: boolean) => {\r\n        const filter = this.state.filter;\r\n        filter.filterExpDate = value;\r\n        this.setState({ filter: filter });\r\n    }\r\n    updateLimit = (e: any) => {\r\n        const value = e.target.value;\r\n        this.showConfirmation(\"Ubah jumlah tampilan?\").then((ok) => {\r\n            if (!ok) return;\r\n            const filter = this.state.filter;\r\n            filter.limit = value;\r\n            filter.page = 0;\r\n            this.setState({ filter: filter }, this.loadProducts);\r\n        });\r\n    }\r\n    render() {\r\n        if (this.getLocations().length == 0) {\r\n            return (\r\n                <div id=\"ProductStocks\" className=\"container-fluid section-body\">\r\n                    <h2>Stok Produk</h2><Spinner />\r\n                </div>\r\n            )\r\n        }\r\n        const ignoreEmptyValue = this.state.filter.ignoreEmptyValue;\r\n        const filterExpDate = this.state.filter.filterExpDate;\r\n\r\n        return (\r\n            <div id=\"ProductStocks\" className=\"container-fluid section-body\">\r\n                <h2>Stok Produk</h2>\r\n                \r\n                <form onSubmit={e => { e.preventDefault(); this.loadProducts(0) }} className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                    <LocationSelect updateLocation={this.updateLocation}\r\n                        selectedLocation={this.state.selectedHealthCenter} locations={this.getLocations()} />\r\n                    <FormGroup label=\"Jumlah Tampilan\">\r\n                        <select key=\"select-displayed-record\" onChange={this.updateLimit} value={this.state.filter.limit} className=\"form-control\">\r\n                            {this.getDisplayedRecordOptions().map((value, i) => {\r\n                                return <option key={\"select-displayed-record-\" + i + \"-\" + value} value={value} >{value}</option>\r\n                            })}\r\n                        </select>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Total Stok\">\r\n                        <strong >{beautifyNominal(this.state.totalItems)}</strong>\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Filter\">\r\n                            <input className=\"form-control\" placeholder=\"Name\" name=\"productName\" value={this.state.productName}\r\n                             onChange={this.handleInputChange} />\r\n                    </FormGroup>\r\n                    <FormGroup label=\"Abaikan Stok Kosong\">\r\n                        <ToggleButton active={ignoreEmptyValue == true} onClick={this.setIgnoreEmpty} />\r\n                    </FormGroup>\r\n                    {ignoreEmptyValue == false ? null :\r\n                        <ExpDateFilter active={filterExpDate == true}\r\n                            update={this.updateFilterExpDate} toggle={this.setFilterExpDate}\r\n                            expiredWarningDays={this.state.configuration.expiredWarningDays} />}\r\n                    <SubmitBtn />\r\n                </form>\r\n                <p />\r\n                <Card title=\"Daftar Produk\">\r\n                    <NavigationButtons activePage={this.state.filter.page ?? 0} onClick={this.loadProductsAt}\r\n                        limit={this.state.filter.limit ?? 10} totalData={this.state.totalData} />\r\n                    {this.state.loading ? <Spinner /> :\r\n                        <ProductStocksTable location={this.state.selectedHealthCenter} startingNumber={\r\n                            ((this.state.filter.page ?? 0) * (this.state.filter.limit ?? 0) + 1)\r\n                        } productStocks={this.state.productStocks} />\r\n                    }\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst ExpDateFilter = (props: { update(e: ChangeEvent): any, toggle(val: boolean): any, active: boolean, expiredWarningDays: number }) => {\r\n    const expDateFilterWithin = addDays(new Date(), props.expiredWarningDays);\r\n    return (\r\n        <FormGroup label=\"Kadaluarsa\">\r\n            <div className=\"row\">\r\n                <div className=\"col-2\">\r\n                    <ToggleButton active={props.active == true} onClick={props.toggle} />\r\n                </div>\r\n                {props.active ? <div className=\"col-10 input-group\">\r\n                    <span className=\"form-control-sm\">Dalam ({expDayLabel(props.expiredWarningDays)})</span>\r\n                    <input required type=\"number\" className=\"form-control-sm\" value={props.expiredWarningDays} onChange={props.update} />\r\n                    <span className=\"form-control-sm\">Max Tanggal</span>\r\n                    <input onChange={props.update} required type=\"date\" className=\"form-control-sm\" value={getInputReadableDate(expDateFilterWithin)} />\r\n                </div> : null}\r\n            </div>\r\n        </FormGroup>\r\n    )\r\n}\r\nconst expDayLabel = (days: number) => {\r\n    if (days < 0) {\r\n        return Math.abs(days) + \" Hari yang lalu\";\r\n    }\r\n    return days + \" Hari\";\r\n}\r\nconst SubmitBtn = (props) => {\r\n    return (\r\n        <FormGroup>\r\n            <button type=\"submit\" className=\"btn btn-success\" >\r\n                <i style={{ marginRight: '5px' }} className=\"fas fa-sync-alt\" />Muat Ulang\r\n                        </button>\r\n        </FormGroup>\r\n    )\r\n}\r\nconst LocationSelect = (props: { updateLocation(e): any, selectedLocation: HealthCenter, locations: HealthCenter[] }) => {\r\n    return (\r\n        <FormGroup label=\"Lokasi\">\r\n            <select key=\"select-health-center\" onChange={props.updateLocation} value={props.selectedLocation.id} className=\"form-control\">\r\n\r\n                {props.locations.map((location, i) => {\r\n                    return <option key={\"select-location-stock-\" + i} value={location.id} >{location.name}</option>\r\n                })}\r\n            </select>\r\n        </FormGroup>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStocks))","\r\n\r\nimport EntityProperty from './../settings/EntityProperty';\r\nexport default class HeaderProps {\r\n\r\n\tlabel:string = \"\";\r\n\tvalue:string = \"\";\r\n\tisDate:boolean = false;\r\n\tfilterable:boolean = true;\r\n\torderable:boolean = true;\r\n\r\n\tpublic static fromEntityProperty = (prop:EntityProperty) : HeaderProps[] => {\r\n\t\treturn EntityProperty.getHeaderLabels(prop);\r\n\t}\r\n}","import EntityProperty from './EntityProperty';\r\nimport { FieldType } from '../FieldType';\r\n\r\nexport default class EntityElement{\r\n\tignoreBaseField?:boolean;\r\n\tid:string=\"0\";\r\n\ttype:string=\"text\";\r\n\tclassName?:string;\r\n\tlabelName :string=\"Label\";\r\n\toptionItemName?:string;\r\n\toptionValueName?:string;\r\n\tentityReferenceName?:string;\r\n\tentityReferenceClass?:string;\r\n\tdetailFields?:string;\r\n\tmultiple?:boolean; \r\n\tdefaultValues?:any[];\r\n\tplainListValues:any[] = [];\r\n\toptions?:any[];\r\n\tidentity?:boolean;\r\n\trequired?:boolean;  \r\n\teditable:boolean = true;\r\n\tfilterable:boolean = true;\r\n\torderable:boolean = true;\r\n\r\n\tentityProperty?:EntityProperty;\r\n\tadditionalMap?:{};\r\n\tfieldType:FieldType =FieldType.FIELD_TYPE_TEXT;\r\n\r\n\tstatic isList = (el:EntityElement)  :boolean => {\r\n\t\treturn el.fieldType == FieldType.FIELD_TYPE_FIXED_LIST || el.fieldType == FieldType.FIELD_TYPE_DYNAMIC_LIST;\r\n\t}\r\n\r\n}\r\n","\n\nimport React, { ChangeEvent } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\nimport BasePage from '../../BasePage';\nimport { greeting } from '../../../utils/StringUtil';\nimport MasterDataService from './../../../services/MasterDataService';\nimport WebResponse from './../../../models/common/WebResponse';\nimport EntityProperty from './../../../models/settings/EntityProperty';\nimport SimpleError from './../../alert/SimpleError';\nimport AnchorButton from './../../navigation/AnchorButton';\nimport Filter from './../../../models/common/Filter';\nimport DataTableHeader from './../masterdata/DataTableHeader';\nimport HeaderProps from './../../../models/common/HeaderProps';\nimport Spinner from './../../loader/Spinner';\nimport Modal from './../../container/Modal';\nimport InventoryService from './../../../services/InventoryService';\nimport EntityElement from './../../../models/settings/EntityElement';\nimport ProductFlow from './../../../models/ProductFlow';\nimport NavigationButtons from './../../navigation/NavigationButtons';\nimport Configuration from './../../../models/Configuration';\nconst DEFAULT_LIMIT:number = 20;\nclass State {\n    entityProperty: EntityProperty | undefined;\n    entityPropertyNotLoaded: boolean = false;\n    filter: Filter = new Filter();\n    items:ProductFlow[] = [];\n    inventoryConfig:Configuration = new Configuration();\n    totalData:number = 0;\n}\nclass StockFilter extends BasePage {\n    state: State = new State();\n    masterDataService: MasterDataService;\n    inventoryService: InventoryService;\n    headerProps: HeaderProps[] = [];\n    constructor(props: any) {\n        super(props, \"Inventory\", true);\n        this.masterDataService = this.getServices().masterDataService;\n        this.inventoryService = this.getServices().inventoryService;\n        this.state.filter.limit = DEFAULT_LIMIT;\n    }\n\n    entityPropertyLoaded = (response: WebResponse) => {\n        if (!response.entityProperty) {\n            throw new Error(\"Invalid property!\");\n        }\n        const prop =  this.adjustProperty(response.entityProperty);\n        this.setState({ entityProperty: prop, entityPropertyNotLoaded: false },\n            ()=>{ this.loadItems(0)});\n    }\n    adjustProperty = (entityProperty: EntityProperty): EntityProperty => {\n        const prop: EntityProperty = Object.assign(new EntityProperty(), entityProperty);\n        prop.keepProperties(\n            \"id\", \"product\", \"stock\", \"expiredDate\"\n            //  \"count\", \"usedCount\"\n        );\n        const el: EntityElement = new EntityElement();\n        el.id = 'location';\n        el.labelName = 'Location';\n        el.orderable = false;\n        prop.addElement(el);\n        prop.setOrder(\"product\", \"stock\", \"expiredDate\", \"location\", \"id\");\n        return prop;\n    }\n    entityPropertyNotLoaded = (e: any) => {\n        this.setState({ entityProperty: undefined, entityPropertyNotLoaded: true });\n    }\n    loadEntityProperty = () => {\n        this.commonAjax(\n            this.masterDataService.loadEntityProperty,\n            this.entityPropertyLoaded,\n            this.entityPropertyNotLoaded,\n            'productflow'\n        )\n    }\n    loadItems = (page: number | undefined) => {\n        const filter = Object.assign(new Filter(), this.state.filter);\n        filter.page = page ?? filter.page;\n        Filter.validateFieldsFilter(filter);\n        this.commonAjax(\n            this.inventoryService.filterStocks,\n            this.itemsLoaded,\n            this.showCommonErrorAlert,\n            filter\n        );\n\n    }\n    itemsLoaded = (response: WebResponse) => {\n        this.setState({\n            items:response.entities, totalData:response.totalData,\n            filter:response.filter, config:response.configuration\n        })\n    }\n\n    componentDidMount() {\n        this.validateLoginStatus(() => {\n            this.scrollTop();\n            this.loadEntityProperty();\n        });\n    }\n    filterOnChange = (e: ChangeEvent) => {\n        e.preventDefault();\n        const filter = this.state.filter;\n        Filter.setFieldsFilterValueFromInput(filter, e.target ); \n        this.setState({ filter: filter });\n    }\n    orderButtonOnClick = (e) => {\n        const filter = this.state.filter;\n        Filter.setOrderPropertyFromDataSet(filter,  e.target.dataset);\n        this.setState({ filter: filter }, () => {this.loadItems(0);});\n    }\n    getHeaderProps = (): HeaderProps[] => {\n        if (!this.state.entityProperty) {\n            this.showCommonErrorAlert(\"Invalid Entity Property\");\n            return [];\n        }\n        if (this.headerProps.length > 0) {\n            return this.headerProps;\n        }\n        this.headerProps = HeaderProps.fromEntityProperty(this.state.entityProperty);\n        return this.headerProps;\n    }\n    updateFilterPage = (page: any) => {\n        const filter = this.state.filter;\n        filter.useExistingFilterPage = true;\n        filter.page = parseInt(page) - 1;\n        this.setState({ filter: filter });\n    }\n    updateFilterLimit = (limit: any) => {\n        const filter = this.state.filter;\n        filter.limit = parseInt(limit);\n        this.setState({ filter: filter });\n    }\n    filterReset = (e) => {\n        const filter = this.state.filter;\n        filter.fieldsFilter = {};\n        filter.limit = DEFAULT_LIMIT;\n        this.setState({ filter: filter });\n    }\n    filterFormSubmit = (e) => {\n        let page = this.state.filter.useExistingFilterPage ? this.state.filter.page : 0;\n        this.loadItems(page);\n    }\n    bgClass = (item:ProductFlow) :string=> {\n        if (!item.expiredDate) return \"\";\n        const expDate:Date = new Date(item.expiredDate);\n        const now = new Date();\n        if (expDate <= now) {\n            return \"bg-danger\";\n        }\n        const config = this.state.inventoryConfig;\n        const secondsOneDay = (1000*24*60*60)\n        if ((expDate.getTime() - now.getTime())/secondsOneDay <= config.expiredWarningDays) {\n            return \"bg-warning\";\n        }\n        return \"\";\n    }\n\n    render() {\n        if (this.state.entityPropertyNotLoaded) {\n            return (\n                <div className=\"container-fluid section-body\">\n                    <SimpleError>\n                        <h3>Config Not Loaded</h3>\n                        <AnchorButton onClick={this.loadEntityProperty}>\n                            Reload Config\n                        </AnchorButton>\n                    </SimpleError>\n                </div>\n            )\n        }\n        if (!this.state.entityProperty) {\n            return <div className=\"container-fluid section-body\"><Spinner /></div>\n        }\n        const filter = this.state.filter;\n        const items = this.state.items;\n        return (\n            <div className=\"container-fluid section-body\">\n                <h2>Filter Persediaan</h2>\n                <div className=\"alert alert-info\">\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr />\n                </div>\n                <form onSubmit={(e) => { e.preventDefault() }}>\n                    <Modal title=\"Filter\" toggleable={true}>\n                        <div>\n                            <div className=\"form-group row\">\n                                <div className=\"col-6\">\n                                    <input value={(filter.page ?? 0) + 1} onChange={(e) => { this.updateFilterPage(e.target.value) }} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"go to page\" />\n                                </div>\n                                <div className=\"col-6\">\n                                    <input value={filter.limit} onChange={(e) => this.updateFilterLimit(e.target.value)} min=\"1\" className=\"form-control\" type=\"number\" placeholder=\"record per page\" />\n                                </div>\n                                <div className=\"col-12\"><p /></div>\n                                <div className=\"col-3\">\n                                    <SubmitResetButton onSubmit={this.filterFormSubmit} onReset={this.filterReset} />\n                                </div>\n                            </div>\n\n                        </div>\n                    </Modal>\n                    <NavigationButtons limit={filter.limit ?? DEFAULT_LIMIT} totalData={this.state.totalData ?? 0}\n                        activePage={filter.page ?? 0} onClick={this.loadItems} />\n                    <div className=\"container-fluid\" style={{ overflow: 'scroll' }}>\n                        <table className=\"table\" >\n                            <DataTableHeader headerProps={this.getHeaderProps()}\n                                fieldsFilter={filter.fieldsFilter}\n                                filterOnChange={this.filterOnChange}\n                                orderButtonOnClick={this.orderButtonOnClick}\n                                \n                            />\n                            <tbody>\n                                {items.map((item, i)=>{\n                                        const location = item.transaction?.type == 'TRANS_IN' ? item.transaction?.healthCenterLocation?.name :item.transaction?.healthCenterDestination?.name;\n                                        return (\n                                            <tr key={\"stock-item-\"+item.id} className={this.bgClass(item)}>\n                                                <td>{i+1+(filter.page??0)*(filter.limit??DEFAULT_LIMIT) }</td>\n                                                <td children={item.product?.name}/><td children={item.stock}/>\n                                                <td>\n                                                    {item.expiredDate?new Date(item.expiredDate).toLocaleDateString(\"ID\"):\"-\"}\n                                                </td>\n                                                <td children={location}/>\n                                                <td children={item.id} />\n                                            </tr>\n                                        )\n                                    })}\n                            </tbody>\n                        </table>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\n\nconst SubmitResetButton = (props: any) => {\n    return (<div className=\"btn-group\">\n        <button onClick={props.onSubmit} className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-play-circle\" /></span>Apply Filter</button>\n        <button onClick={props.onReset} type=\"reset\" className=\"btn btn-dark btn-sm\"><span className=\"icon\"><i className=\"fas fa-sync-alt\" /></span>Reset</button>\n    </div>)\n}\n\n\nexport default withRouter(connect(\n    mapCommonUserStateToProps\n)(StockFilter))","\r\n\r\nimport React, { ChangeEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport Filter from '../../../models/common/Filter';\r\nimport HealthCenter from './../../../models/HealthCenter';\r\nimport ReportService from './../../../services/ReportService';\r\nimport MasterDataService from './../../../services/MasterDataService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport FormGroup from './../../form/FormGroup';\r\nimport { getInputReadableDate } from '../../../utils/DateUtil';\r\nimport AnchorButton from './../../navigation/AnchorButton';\r\nimport AttachmentInfo from '../../../models/common/AttachmentInfo';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport Card from './../../container/Card';\r\nimport { MONTHS } from './../../../utils/DateUtil';\r\nimport { greeting } from '../../../utils/StringUtil';\r\nimport BasePage from './../../BasePage';\r\nclass State {\r\n    filter: Filter = new Filter();\r\n    healthCenters: HealthCenter[] = [];\r\n    selectedHealthCenter: HealthCenter = new HealthCenter();\r\n    period: Date = new Date();\r\n}\r\nclass Report extends BasePage {\r\n    state: State = new State();\r\n    masterDataService: MasterDataService;\r\n    reportService: ReportService;\r\n    inventoryService: InventoryService;\r\n    constructor(props: any) {\r\n        super(props, \"Laporan\", true);\r\n        const date = this.state.period;\r\n        this.state.filter.day = date.getDate();\r\n        this.state.filter.month = date.getMonth() + 1;\r\n        this.state.filter.year = date.getFullYear();\r\n        this.reportService = this.getServices().reportService;\r\n        this.masterDataService = this.getServices().masterDataService;\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus(()=>{\r\n            this.loadHealthCenter();\r\n            this.scrollTop();\r\n        });\r\n    }\r\n    healthCentersLoaded = (response: WebResponse) => {\r\n\r\n        if (!response.entities) { return; }\r\n        this.masterDataService.setHealthCenters(response.entities ?? []);\r\n        this.setState({\r\n            healthCenters: response.entities, selectedHealthCenter:\r\n                this.getMasterHealthCenter()\r\n        });\r\n    }\r\n    loadHealthCenter = () => {\r\n        if (this.masterDataService.getHealthCenters().length > 0) {\r\n            this.healthCentersLoaded({ entities: this.masterDataService.getHealthCenters() });\r\n            return;\r\n        }\r\n        this.commonAjax(\r\n            this.masterDataService.loadHealthCenters,\r\n            this.healthCentersLoaded,\r\n            this.showCommonErrorAlert,\r\n        )\r\n    }\r\n    updateLocation = (e: ChangeEvent) => {\r\n        const input = e.target as HTMLSelectElement;\r\n        const healthCenters: HealthCenter[] = this.state.healthCenters.filter(h => h.id?.toString() == input.value);\r\n        if (healthCenters.length > 0) {\r\n            this.setState({ selectedHealthCenter: healthCenters[0] });\r\n\r\n        }\r\n    }\r\n    reportCreated = (attachment: AttachmentInfo) => {\r\n        this.showConfirmation(\"Simpan \" + attachment.name + \" ?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                Object.assign(document.createElement('a'), {\r\n                    target: '_blank',\r\n                    download: attachment.name,\r\n                    style: { display: 'none' },\r\n                    href: attachment.dataUrl,\r\n                }).click();\r\n            })\r\n\r\n    }\r\n    updatePeriod = (e) => {\r\n        const date = new Date(e.target.value);\r\n        const filter = this.state.filter;\r\n        filter.day = date.getDate();\r\n        filter.month = date.getMonth() + 1;\r\n        filter.year = date.getFullYear();\r\n        this.setState({ period: date, filter: filter });\r\n    }\r\n    loadStockOpname = () => {\r\n        const name = this.state.selectedHealthCenter.name;\r\n        const date = this.state.period.toLocaleDateString(\"ID\");\r\n        this.showConfirmation(\"Muat Stok Opname \" + date + \" : \" + name + \"?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.loadStockOpnameReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter, this.state.selectedHealthCenter\r\n                )\r\n            });\r\n    }\r\n    loadMontlyReport = () => {\r\n        const date = (this.state.period.getMonth() + 1) + \" - \" + this.state.period.getFullYear();\r\n        this.showConfirmation(\"Muat Laporan Bulanan \" + date + \"?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.loadMontlyReport,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter\r\n                )\r\n            });\r\n    }\r\n    printReceiveRequestSheet = () => {\r\n        const date = (this.state.period.getMonth() + 1) + \" - \" + this.state.period.getFullYear();\r\n        this.showConfirmation(\"Muat LPLPO \" + date + \"?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.reportService.printReceiveRequestSheet,\r\n                    this.reportCreated,\r\n                    this.showCommonErrorAlert,\r\n                    this.state.filter, this.state.selectedHealthCenter\r\n                )\r\n            });\r\n    }\r\n    adjustStocks = () => {\r\n        this.showConfirmation(\"Kalkulasi Ulang Stok?\")\r\n            .then((ok) => {\r\n                if (!ok) return;\r\n                this.commonAjaxWithProgress(\r\n                    this.inventoryService.adjustStocks,\r\n                    () => this.showInfo(\"Success\"),\r\n                    this.showCommonErrorAlert,\r\n                )\r\n            });\r\n    }\r\n    render() {\r\n        const period:Date = this.state.period;\r\n        const filter:Filter = this.state.filter;\r\n        const selectedMonthName = MONTHS[period.getMonth()];\r\n        return (\r\n            <div id=\"Report\" className=\"container-fluid section-body\">\r\n                <h2>Cetak Laporan</h2>\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                    <form onSubmit={e => e.preventDefault()}>\r\n                        <FormGroup label=\"Lokasi\">\r\n                            <select autoComplete=\"off\" key=\"select-health-center\" onChange={this.updateLocation} value={this.state.selectedHealthCenter.id} className=\"form-control\">\r\n                                {this.state.healthCenters.map((healthCenter, i) => {\r\n\r\n                                    return <option key={\"select-location-stock-\" + i} value={healthCenter.id} >{healthCenter.name}</option>\r\n                                })}\r\n                            </select>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Periode\">\r\n                            <input autoComplete=\"off\" onChange={this.updatePeriod} type=\"date\" className=\"form-control\"\r\n                                value={getInputReadableDate(period)}\r\n                            />\r\n                        </FormGroup>\r\n                    </form>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <ReportButton onClick={this.loadStockOpname} description={[\"Tanggal\",period.getDate(),selectedMonthName,filter.year].join(\" \")}>\r\n                        Stok Opname\r\n                    </ReportButton>\r\n                    <ReportButton onClick={this.loadMontlyReport} description={[\"Bulan\",selectedMonthName,filter.year].join(\" \")}>\r\n                        Laporan Bulanan\r\n                    </ReportButton>\r\n                    <ReportButton onClick={this.printReceiveRequestSheet} description={[\"Bulan\",selectedMonthName,filter.year].join(\" \")}>\r\n                        LPLPO\r\n                    </ReportButton>\r\n                    <ReportButton onClick={this.adjustStocks} description=\"\">\r\n                        Kalkulasi Ulang Stok\r\n                    </ReportButton>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ReportButton = (props: { onClick(): any, children: any, description?:string }) => {\r\n    return (\r\n        <div className=\"col-md-3 text-center\">\r\n            <Card title={props.children}>  \r\n                <p>{props.description}</p>     \r\n                <AnchorButton iconClassName=\"far fa-file\" onClick={props.onClick} >\r\n                    Submit\r\n                </AnchorButton>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(Report))","import React, { ChangeEvent, Component, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../constant/stores';\r\nimport BaseComponent from '../../BaseComponent';\r\nimport Configuration from '../../../models/Configuration';\r\nimport Card from '../../container/Card';\r\nimport FormGroup from '../../form/FormGroup'; \r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { toBase64v2 } from '../../../utils/ComponentUtil';\r\nimport { EditField, EditImage } from './settingHelper';\r\nimport MasterDataService from '../../../services/MasterDataService'; \r\nimport Spinner from './../../loader/Spinner';\r\nimport BaseUpdateProfilePage from './BaseUpdateProfilePage';\r\nclass EditFields {\r\n    cycleTime:boolean = false; leadTime:boolean =false;\r\n    expiredWarningDays:boolean = false;\r\n}\r\nclass IState {\r\n    config?: Configuration = undefined;\r\n    editFields: EditFields = new EditFields()\r\n    fieldChanged = (): boolean => {\r\n        for (const key in this.editFields) {\r\n            if (this.editFields[key] == true) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nclass EditInventoryConfiguration extends BaseUpdateProfilePage {\r\n \r\n    actualConfig: Configuration = new Configuration();\r\n    state: IState = new IState();\r\n    constructor(props: any) {\r\n        super(props, \"Configuration Profile\");\r\n    }\r\n    loadConfiguration = () => {\r\n        this.commonAjax(\r\n            this.masterDataService.getByKey,\r\n            this.configLoaded,\r\n            this.showCommonErrorAlert,\r\n            'configuration','code','APP_CONFIG'\r\n        )\r\n    }\r\n    configLoaded = (response:WebResponse) => {\r\n        if (response.entities && response.entities.length>0){\r\n            const config = Object.assign(new Configuration(), response.entities[0]);\r\n            this.actualConfig = Object.assign(new Configuration(), response.entities[0]);\r\n            this.setState({config: config});\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus(()=>{\r\n            this.loadConfiguration();\r\n            this.scrollTop();\r\n        });\r\n        \r\n    }\r\n    updateProfileProperty = (e: ChangeEvent) => {\r\n        const target: HTMLInputElement | null = e.target as HTMLInputElement;\r\n        if (null == target) return;\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return;\r\n\r\n        config[target.name] = target.value;\r\n        this.setState({ config: config });\r\n    }\r\n \r\n    setProperty = (fieldName: string, value: any) => {\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return;\r\n        config[fieldName] = value;\r\n        this.setState({ config: config });\r\n    }\r\n    toggleInput = (e: MouseEvent) => {\r\n        const target: HTMLAnchorElement | null = e.target as HTMLAnchorElement;\r\n        const config: Configuration | undefined = this.state.config;\r\n        const actualConfig: Configuration = this.actualConfig;\r\n        if (null == target || !config ) {\r\n            return;\r\n        }\r\n\r\n        const propertyName: string | null = target.getAttribute(\"data-name\");\r\n        if (null == propertyName) {\r\n            return;\r\n        }\r\n        const enabled: boolean = target.getAttribute('data-enabled') == 'true';\r\n        const editFields = this.state.editFields;\r\n        editFields[propertyName] = enabled;\r\n        if (!enabled) {\r\n            config[propertyName] = actualConfig[propertyName];\r\n        }\r\n        this.setState({ config: config, editFields: editFields });\r\n    }\r\n    doSaveRecord = () => {\r\n        const config: Configuration | undefined = this.getEditedRecord();\r\n        if (!config) return;\r\n        this.commonAjax(\r\n            this.masterDataService.updateConfiguration,\r\n            this.recordSaved, this.showCommonErrorAlert,\r\n            config\r\n        )\r\n    }\r\n    getEditedRecord = (): Configuration | undefined => {\r\n        const config: Configuration | undefined = this.state.config;\r\n        const editFields: EditFields = this.state.editFields;\r\n        if (!config) return undefined;\r\n        const editedApplication: Configuration = new Configuration();\r\n        for (const key in editFields) { \r\n            editedApplication[key] = config[key]; \r\n        }\r\n       \r\n        return editedApplication;\r\n    }\r\n\r\n    render() {\r\n        const config: Configuration | undefined = this.state.config;\r\n        if (!config) return <div  className=\"container-fluid section-body\"><Spinner/></div>;\r\n        const editFields: EditFields = this.state.editFields; \r\n        return (\r\n            <div  className=\"container-fluid section-body\">\r\n                <h2>Inventory Configuration</h2>\r\n                <Card title=\"Inventory Configuration\">\r\n                    <form onSubmit={this.saveRecord}> \r\n                        <FormGroup label=\"Cycle Time\">\r\n                            <EditField type=\"number\" edit={editFields.cycleTime} updateProperty={this.updateProfileProperty} \r\n                            name=\"cycleTime\" toggleInput={this.toggleInput} value={config.cycleTime} />\r\n                        </FormGroup>\r\n                         \r\n                        <FormGroup label=\"Lead Time\">\r\n                            <EditField type=\"number\" edit={editFields.leadTime} updateProperty={this.updateProfileProperty} \r\n                            name=\"leadTime\" toggleInput={this.toggleInput} value={config.leadTime} />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Exp Date Warning\">\r\n                            <EditField type=\"number\" edit={editFields.expiredWarningDays} updateProperty={this.updateProfileProperty} \r\n                            name=\"expiredWarningDays\" toggleInput={this.toggleInput} value={config.expiredWarningDays} />\r\n                        </FormGroup>\r\n                        <FormGroup  >\r\n                            {this.state.fieldChanged() ? <input type=\"submit\" className=\"btn btn-success\" value=\"Save\" /> : null}\r\n                        </FormGroup>\r\n                    </form>\r\n                </Card>\r\n            </div>\r\n        )\r\n    }\r\n\r\n} \r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps, \r\n)(EditInventoryConfiguration))","\r\nimport ProductInventory from '../common/ProductInventory';\r\nimport DataSet from '../settings/DataSet';\r\nimport { MONTHS } from '../../utils/DateUtil';\r\nimport PeriodicReviewResult from './PeriodicReviewResult';\r\nexport default class InventoryData implements DataSet {\r\n\r\n    inventories:ProductInventory[] = [];\r\n    totalItemsSum:number = 0;\r\n    totalExpiredSum:number = 0;\r\n    totalWillExpiredSum:number = 0;\r\n    periodicReviewResult?:PeriodicReviewResult;\r\n\r\n    month?:number;\r\n    year?:number;\r\n\r\n    getLabel = () :string => {\r\n        return MONTHS[(this.month??1) - 1] + \" \" + this.year;\r\n    }\r\n    getAmount = () : number => {\r\n        return this.totalItemsSum;\r\n    }\r\n    public static toDataSets = (list:InventoryData[]) : DataSet[] => {\r\n        const res:DataSet[] = [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            const element = list[i];\r\n            res.push(Object.assign(new InventoryData, element))\r\n        }\r\n        return res;\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport BaseComponent from './../../BaseComponent';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport Card from '../../container/Card';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport InventoryData from '../../../models/stock/InventoryData';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport SimpleWarning from '../../alert/SimpleWarning';\r\nimport Configuration from './../../../models/Configuration';\r\nimport { beautifyNominal, greeting } from '../../../utils/StringUtil';\r\nimport AnchorWithIcon from './../../navigation/AnchorWithIcon';\r\nimport { setInventoryData } from '../../../redux/actionCreators';\r\n\r\nclass State {\r\n    inventoryData: InventoryData = new InventoryData();\r\n    configuration:Configuration = new Configuration();\r\n}\r\nclass DashboardInfo extends BaseComponent {\r\n\r\n    state: State = new State();\r\n    inventoryService: InventoryService;\r\n    constructor(props) {\r\n        super(props, true);\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validateLoginStatus(this.loadInventoriesData);\r\n        this.setPageTitle(\"Info Persediaan\");\r\n        this.scrollTop();\r\n\r\n    }\r\n    inventoriesDataLoaded = (response: WebResponse) => {\r\n        this.setState({ inventoryData: response.inventoryData, configuration: response.configuration },\r\n            \r\n        ()=> {\r\n            this.props.setInventoryData(response)\r\n        });\r\n    }\r\n    loadInventoriesData = (force:boolean = false) => {\r\n        if (!force && this.getInventoryData()) {\r\n            this.setState({ inventoryData: this.getInventoryData(), configuration: this.getInventoryConfig() });\r\n            return;\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getInventoriesData,\r\n            this.inventoriesDataLoaded,\r\n            this.showCommonErrorAlert,\r\n\r\n        )\r\n    }\r\n\r\n    render() {\r\n\r\n        const totalItems = this.state.inventoryData.totalItemsSum; \r\n        const totalWillExpired = this.state.inventoryData.totalWillExpiredSum;\r\n        const totalExpired = this.state.inventoryData.totalExpiredSum;\r\n        const totalSafe = totalItems - totalExpired - totalWillExpired;\r\n        return (\r\n            <div id=\"DashboardInfo\" className=\"section-body container-fluid\">\r\n                <h2>Info</h2>\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                </div>\r\n                <div className=\"row\">\r\n                    {/* <div className=\"col-4\">\r\n                        <Card className=\"bg-info text-light\" title=\"Transaction Today\">\r\n                            \r\n                        </Card>\r\n                    </div> */}\r\n                    <div className=\"col-4\">\r\n                        <Card className=\"bg-success text-light\" title=\"Stok Aman\">\r\n                            <h3 className=\"text-center\"> {beautifyNominal(totalSafe)}</h3>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"col-4\">\r\n                        <Card className=\"bg-warning\" title=\"Stok Akan Kadaluarsa\">\r\n                            <h3 className=\"text-center\">{beautifyNominal(totalWillExpired)}</h3>\r\n                        </Card>\r\n                    </div>\r\n\r\n                    <div className=\"col-4\">\r\n                        <Card className=\"bg-danger text-warning\" title=\"Stok Kadaluarsa\">\r\n                            <h3 className=\"text-center\">{beautifyNominal(totalExpired)}</h3>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"col-10\">\r\n                        <p/>\r\n                        <SimpleWarning>\r\n                            <p>Total Stok: <strong>{beautifyNominal(totalItems)}</strong></p>\r\n                            <p>Peraingatan Kadaluarsa: {this.state.configuration.expiredWarningDays} hari</p>\r\n                        </SimpleWarning>\r\n                        <div className=\"btn-group\">\r\n                            <AnchorWithIcon iconClassName=\"fas fa-sync-alt\" onClick={()=>this.loadInventoriesData(true)} >Muat Ulang</AnchorWithIcon>\r\n                            <AnchorWithIcon iconClassName=\"fas fa-list\" to=\"/inventory/status\" >Rincian</AnchorWithIcon>\r\n                        </div>\r\n                    </div> \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setInventoryData: (payload: WebResponse) => dispatch(setInventoryData(payload)), \r\n});\r\nexport default withRouter(\r\n    connect(\r\n        mapCommonUserStateToProps,\r\n        mapDispatchToProps,\r\n    )(DashboardInfo)\r\n)\r\n","import React from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from './../../../constant/stores';\r\nimport InventoryData from '../../../models/stock/InventoryData';\r\nimport Configuration from './../../../models/Configuration';\r\nimport InventoryService from './../../../services/InventoryService';\r\nimport WebResponse from '../../../models/common/WebResponse';\r\nimport { setInventoryData } from '../../../redux/actionCreators';\r\nimport { tableHeader } from './../../../utils/CollectionUtil';\r\nimport ProductInventory from '../../../models/common/ProductInventory';\r\nimport AnchorWithIcon from '../../navigation/AnchorWithIcon';\r\nimport { beautifyNominal, greeting } from '../../../utils/StringUtil';\r\nimport BasePage from './../../BasePage';\r\nclass State {\r\n    inventoryData: InventoryData = new InventoryData();\r\n    configuration: Configuration = new Configuration();\r\n}\r\nclass InventoryStatus extends BasePage {\r\n\r\n    state: State = new State();\r\n    inventoryService: InventoryService;\r\n    constructor(props) {\r\n        super(props, \"Status Persediaan\", true);\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n    componentDidMount() {\r\n        this.validateLoginStatus(this.loadInventoriesData);\r\n        super.componentDidMount();\r\n    }\r\n    inventoriesDataLoaded = (response: WebResponse) => {\r\n        this.setState({ inventoryData: response.inventoryData, configuration: response.configuration },\r\n\r\n            () => {\r\n                this.props.setInventoryData(response)\r\n            });\r\n    }\r\n    loadInventoriesData = (force: boolean = false) => {\r\n        if (!force && this.getInventoryData()) {\r\n            this.setState({ inventoryData: this.getInventoryData(), configuration: this.getInventoryConfig() });\r\n            return;\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getInventoriesData,\r\n            this.inventoriesDataLoaded,\r\n            this.showCommonErrorAlert,\r\n\r\n        )\r\n    }\r\n    render() {\r\n        const config = this.state.configuration;\r\n        const inventoryData = this.state.inventoryData;\r\n        const inventories: ProductInventory[] = this.state.inventoryData.inventories;\r\n        let totalSaveSum: number = 0;\r\n        return (\r\n            <div className=\"container-fluid section-body\">\r\n                <h2>Status Persediaan</h2>\r\n                <div className=\"alert alert-info\">\r\n                    {greeting()}, <strong>{this.getLoggedUser()?.displayName}</strong><hr/>\r\n                </div>\r\n                <div>\r\n                    <AnchorWithIcon iconClassName=\"fas fa-sync-alt\" onClick={() => this.loadInventoriesData(true)}>Muat Ulang</AnchorWithIcon>\r\n                    <p />\r\n                </div>\r\n                <table className=\"table table-striped\">\r\n                    {tableHeader(\"No\", \"Lokasi\", \"Total\", \"Stok Aman\", \"Kadaluarsa dalam \" + config.expiredWarningDays + \" hari\", \"Kadaluarsa\")}\r\n                    <tbody>\r\n                        {inventories.map((inventory, i) => {\r\n                            const safe = inventory.totalItems - inventory.expiredItems - inventory.willExpiredItems;\r\n                            totalSaveSum += safe;\r\n                            return (\r\n                                <tr key={\"p-inv-\" + i}>\r\n                                    <td>{i + 1}</td>\r\n                                    <td>{inventory.location.name}</td>\r\n                                    <td >{beautifyNominal(inventory.totalItems)}</td>\r\n                                    <td >{beautifyNominal(safe)}</td>\r\n                                    <td className={inventory.willExpiredItems > 0 ? \"bg-warning\" : \"\"}>\r\n                                        {beautifyNominal(inventory.willExpiredItems)} </td>\r\n                                    <td className={inventory.expiredItems > 0 ? \"bg-danger text-warning\" : \"\"}>\r\n                                        {beautifyNominal(inventory.expiredItems)} </td>\r\n                                </tr>\r\n                            )\r\n                        })}\r\n                        <tr className=\"font-weight-bold\">\r\n                            <td colSpan={2}>Total</td>\r\n                            <td>{beautifyNominal(inventoryData.totalItemsSum)}</td>\r\n                            <td>{beautifyNominal(totalSaveSum)}</td>\r\n                            <td>{beautifyNominal(inventoryData.totalWillExpiredSum)}</td>\r\n                            <td>{beautifyNominal(inventoryData.totalExpiredSum)}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    setInventoryData: (payload: WebResponse) => dispatch(setInventoryData(payload)),\r\n});\r\nexport default withRouter(\r\n    connect(\r\n        mapCommonUserStateToProps,\r\n        mapDispatchToProps,\r\n    )(InventoryStatus)\r\n)","import React, { ChangeEvent, Component, Fragment } from 'react'\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport Filter from '../../../../models/common/Filter';\r\nimport { MONTHS, getMonthDays } from './../../../../utils/DateUtil';\r\nconst year = new Date().getFullYear();\r\ninterface Props {\r\n    filter: Filter;\r\n    onChange(e: ChangeEvent): any;\r\n    fullPeriod: boolean;\r\n    withDay?:boolean;\r\n}\r\nexport default class PeriodFilter extends Component<Props, any> {\r\n\r\n    getDayToArray = () => {\r\n        const filter: Filter = this.props.filter;\r\n        const count = getMonthDays(filter.monthTo??1, filter.yearTo??year);\r\n        const days:number[] = [];\r\n        for (let i = 1 ; i <= count; i++) {\r\n            days.push(i);      \r\n        }\r\n        return days;\r\n    }\r\n    getDayFromArray = () => {\r\n        const filter: Filter = this.props.filter;\r\n        const count = getMonthDays(filter.month??1, filter.year??year);\r\n        const days:number[] = [];\r\n        for (let i = 1 ; i <= count; i++) {\r\n            days.push(i);      \r\n        }\r\n        return days;\r\n    }\r\n    render = () => {\r\n        const filter: Filter = this.props.filter;\r\n        const withDay:boolean  = this.props.withDay == true;\r\n        return (\r\n            <Fragment>\r\n                {withDay?\r\n                <FormGroup label=\"Day\">\r\n                <select  onChange={this.props.onChange} name=\"day\" value={filter.day??1} className=\"form-control\" >\r\n                    {this.getDayFromArray().map(day=>{\r\n                        return <option key={\"day-from-\"+day} value={day} >{day}</option>\r\n                    })}\r\n                </select>\r\n                </FormGroup>:null\r\n                }\r\n                <FormGroup label=\"Month\">\r\n                    <select onChange={this.props.onChange} value={filter.month??1} name=\"month\" className=\"form-control\">\r\n                        {MONTHS\r\n                            .map((name, i) => {\r\n                                return (\r\n                                    <option key={\"filter-month-from-\" + i} value={i + 1}>{name}</option>\r\n                                )\r\n                            })}\r\n                    </select>\r\n                </FormGroup>\r\n                <FormGroup label=\"Year\">\r\n                    <input onChange={this.props.onChange} name=\"year\" type=\"number\" value={filter.year??year} className=\"form-control\" />\r\n                </FormGroup>\r\n                {this.props.fullPeriod ?\r\n                    <Fragment>\r\n                         {withDay?\r\n                        <FormGroup label=\"Day\">\r\n                         <select  onChange={this.props.onChange} name=\"dayTo\" value={filter.dayTo??1} className=\"form-control\" >\r\n                            {this.getDayToArray().map(day=>{\r\n                                return <option key={\"day-from-\"+day} value={day} >{day}</option>\r\n                            })}\r\n                        </select> </FormGroup>:null\r\n                        }\r\n                        <FormGroup label=\"Month To\">\r\n                            <select onChange={this.props.onChange} value={filter.monthTo??1} name=\"monthTo\" className=\"form-control\">\r\n                                {MONTHS\r\n                                    .map((name, i) => {\r\n                                        return (\r\n                                            <option key={\"filter-month-from-\" + i} value={i + 1}>{name}</option>\r\n                                        )\r\n                                    })}\r\n                            </select>\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Year To\">\r\n                            <input  onChange={this.props.onChange} name=\"yearTo\" type=\"number\" value={filter.yearTo??year} className=\"form-control\" />\r\n                        </FormGroup>\r\n                    </Fragment> : null\r\n                }\r\n            </Fragment>\r\n        )\r\n    }\r\n}","\r\nimport React, { Component, Fragment } from 'react';\r\nimport './ChartSvg.css';  \r\nimport DataSet from '../../../../models/settings/DataSet';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\ninterface IProps {\r\n    dataSet: DataSet[],\r\n    updated: Date,\r\n    onClick?:(index:number)=>void\r\n    onUnHover?:()=>void\r\n}\r\nclass IState {\r\n    hoveredIndex: number = -1;\r\n    updated: Date = new Date();\r\n}\r\nexport default class DashboardBarChart extends Component<IProps, IState>\r\n{\r\n    middleYAxisValue: number = 0;\r\n    bottomYAxisValue: number = 0;\r\n    offsetX: number = 100;\r\n    offsetY: number = 50;\r\n    baseYIndex: number = 200;\r\n    baseHeight: number = 150;\r\n    lineWidth: number = 0;\r\n    maxValue: number = 0;\r\n    state: IState = new IState();\r\n    constructor(props: IProps) {\r\n        super(props);\r\n        this.updateSizes();\r\n\r\n    }\r\n    maxAmount:(cashflows: DataSet[])=>number = (cashflows: DataSet[]): number => {\r\n        let max = 0;\r\n        for (let i = 0; i < cashflows.length; i++) {\r\n            const element = cashflows[i];\r\n            \r\n            if (element.getAmount() > max) {\r\n                max = element.getAmount();\r\n            }\r\n        }\r\n\r\n        return max;\r\n    }\r\n    updateSizes = () => {\r\n        this.maxValue = this.maxAmount(this.props.dataSet);\r\n        this.middleYAxisValue = Math.round(this.maxValue * 2 / 3);\r\n        this.bottomYAxisValue = Math.round(this.maxValue * 1 / 3);\r\n        this.lineWidth = (23) * (this.props.dataSet.length) + 100;\r\n    }\r\n    componentDidUpdate() {\r\n        this.updateSizes();\r\n        if (this.props.updated != this.state.updated) {\r\n            this.setState({ updated: this.props.updated });\r\n        }\r\n    }\r\n    hover = (index: number) => {\r\n        this.setState({ hoveredIndex: index });\r\n        \r\n    }\r\n    onClick = (index:number) => {\r\n        if (this.props.onClick) {\r\n            this.props.onClick(index);\r\n        }\r\n    }\r\n    unHover = () => {\r\n        this.setState({ hoveredIndex: -1 });\r\n        // if (this.props.onUnHover) {\r\n        //     this.props.onUnHover();\r\n        // }\r\n    }\r\n  \r\n    render() {\r\n        const props = this.props;\r\n        return (\r\n           <Fragment>\r\n                <div className=\"text-center border border-secondary\" style={{ \r\n                    minHeight: '300px', overflowX: 'scroll',\r\n                    paddingTop:'10px', paddingBottom: '10px'\r\n                     }}>\r\n                    <svg onMouseOut={this.unHover} className=\"bg-light border\" version=\"1.1\" baseProfile=\"full\" width={this.offsetX * 2 + (23) * (props.dataSet.length)+ 100} height={300} xmlns=\"http://www.w3.org/2000/svg\">\r\n\r\n                        {props.dataSet.map((data, i) => {\r\n                            const percentage = (data.getAmount() / this.maxValue) * this.baseHeight;\r\n                            const labelY = this.baseYIndex + 15, labelX = this.offsetX + 10 + (23) * (i);\r\n                            const xTranslated = 0, yTranslated = 0;\r\n                            const transform = \"translate(\" + xTranslated + \",\" + yTranslated + \") rotate(-30,\" + labelX + \",\" + labelY + \")\";\r\n                            const hovered = i == this.state.hoveredIndex;\r\n                            return (\r\n                                <g style={hovered ? { cursor: 'pointer' } : {}} className=\"chart-group\"\r\n                                 onMouseOver={(e) => this.hover(i)} onClick={(e) => this.onClick(i)} onMouseOut={this.unHover} key={ \"bar-item-chart-\" + i}>\r\n                                    <rect fill={hovered ? \"red\" : \"green\"} x={this.offsetX + (23) * (i)} y={this.baseYIndex - percentage} height={percentage} width={20} ></rect>\r\n                                    <text fill={hovered ? \"red\" : \"black\"} textAnchor=\"end\" fontSize={10} x={labelX} y={labelY} transform={transform}>{data.getLabel()}</text>\r\n                                    <circle cx={this.offsetX + (23) * (i + 1)} cy={this.baseYIndex} r=\"3\" fill=\"red\" />\r\n                                </g>\r\n                            )\r\n                        })}\r\n                        <rect name=\"base_axis_x\" x={this.offsetX} y={this.baseYIndex} height={2} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_top\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_middle\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"ruler_line_bottom\" fill=\"rgb(100,100,100)\" x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3} height={1} width={this.lineWidth} />\r\n                        <rect name=\"base_axis_y\" x={this.offsetX} y={this.offsetY} height={this.baseHeight} width={2} />\r\n\r\n                        <text textAnchor=\"end\" name=\"top_val\" fontSize={10} x={this.offsetX} y={this.offsetY}>{beautifyNominal(this.maxValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"middle_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 1 / 3}>{beautifyNominal(this.middleYAxisValue)}</text>\r\n                        <text textAnchor=\"end\" name=\"bottom_val\" fontSize={10} x={this.offsetX} y={this.offsetY + this.baseHeight * 2 / 3}>{beautifyNominal(this.bottomYAxisValue)}</text>\r\n                    </svg>\r\n                </div>\r\n                <p><i className=\"fas fa-history\" /> {new Date(this.state.updated).toString()}</p> \r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n","\r\n\r\nimport React, { ChangeEvent, FormEvent, Fragment } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BasePage from '../../../BasePage';\r\nimport ProductFormV2 from '../../transaction/ProductFormV2';\r\nimport Product from '../../../../models/Product';\r\nimport Filter from '../../../../models/common/Filter';\r\nimport PeriodFilter from './PeriodFilter';\r\nimport Modal from '../../../container/Modal';\r\nimport WebRequest from '../../../../models/common/WebRequest';\r\nimport InventoryService from '../../../../services/InventoryService';\r\nimport InventoryData from '../../../../models/stock/InventoryData';\r\nimport WebResponse from '../../../../models/common/WebResponse';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport DashboardBarChart from './BarChart';\r\nimport Card from '../../../container/Card';\r\nimport FormGroup from '../../../form/FormGroup';\r\nimport { beautifyNominal } from '../../../../utils/StringUtil';\r\nimport PeriodicReviewResult from './../../../../models/stock/PeriodicReviewResult';\r\n\r\nclass State {\r\n    product?: Product;\r\n    filter: Filter = new Filter();\r\n    inventoriesData?: InventoryData[];\r\n    selectedItem?: InventoryData;\r\n    totalData: number = 0;\r\n    periodicReviewResult?: PeriodicReviewResult\r\n}\r\nclass ProductStatDetail extends BasePage {\r\n    state: State = new State();\r\n    inventoryService: InventoryService;\r\n    constructor(props: any) {\r\n        super(props, \"Penggunaan Produk\", true);\r\n        const date: Date = new Date();\r\n        this.state.filter.year = this.state.filter.yearTo = date.getFullYear();\r\n        this.state.filter.month = this.state.filter.monthTo = date.getMonth() + 1;\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n    setProduct = (p: Product) => this.setState({ product: p });\r\n\r\n    updateFilter = (e: ChangeEvent) => {\r\n        const target: any = e.target;\r\n        const name = target.getAttribute(\"name\"), value = target.value;\r\n        if (!name || !value) return;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    setFilter = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        if (!this.state.product) {\r\n            this.showError(\"Please select product\");\r\n            return;\r\n        }\r\n        const req: WebRequest = {\r\n            product: this.state.product,\r\n            filter: this.state.filter\r\n        }\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getProductUsage,\r\n            this.usageDataLoaded,\r\n            this.showCommonErrorAlert,\r\n            req\r\n        )\r\n    }\r\n    usageDataLoaded = (response: WebResponse) => {\r\n        this.setState({ selectedItem: undefined, periodicReviewResult: response.inventoryData?.periodicReviewResult, inventoriesData: response.inventoriesData, totalData: response.totalData });\r\n    }\r\n    selectInventory = (index: number) => {\r\n        if (this.state.inventoriesData == undefined) return;\r\n        try {\r\n            const item = this.state.inventoriesData[index];\r\n            this.setState({ selectedItem: item });\r\n        } catch (error) {\r\n\r\n        }\r\n    }\r\n    render() {\r\n        const inventoriesData = this.state.inventoriesData;\r\n        const periodicReviewResult = this.state.periodicReviewResult;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Penggunaan Produk</h2>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                        <Modal title=\"Periode\" >\r\n                            <form onSubmit={this.setFilter}>\r\n                                <PeriodFilter fullPeriod filter={this.state.filter} onChange={this.updateFilter} />\r\n                                {this.state.product ? <button type=\"submit\" className=\"btn btn-dark\">Apply</button> :\r\n                                    <i>Silakan pilih produk</i>}\r\n                            </form>\r\n                        </Modal>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <ProductFormV2 setProduct={this.setProduct} />\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {inventoriesData ? <UsageChart periodicReviewResult={periodicReviewResult} totalData={this.state.totalData} onClick={this.selectInventory} inventoriesData={inventoriesData} />\r\n                        : <SimpleError>No data</SimpleError>}\r\n                </div>\r\n                {this.state.selectedItem ?\r\n                    <UsageDetail item={this.state.selectedItem} /> : null\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst UsageDetail = (props: { item: InventoryData }) => {\r\n    const item = Object.assign(new InventoryData, props.item);\r\n\r\n    return <Card attributes={{ style: { marginTop: '10px' } }} title={\"Detail Usage\"} >\r\n        <FormGroup label=\"Period\">{item.getLabel()}</FormGroup>\r\n        <FormGroup label=\"Amount\">{beautifyNominal(item.getAmount())}</FormGroup>\r\n    </Card>\r\n}\r\nconst UsageChart = (props: { periodicReviewResult?: PeriodicReviewResult, totalData: number, inventoriesData: InventoryData[], onClick(index: number): any }) => {\r\n\r\n    return (\r\n        <Card>\r\n            <DashboardBarChart onClick={props.onClick} updated={new Date()}\r\n                dataSet={InventoryData.toDataSets(props.inventoriesData)} />\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                    <FormGroup label=\"Total\">{beautifyNominal(props.totalData)}</FormGroup>\r\n                </div>\r\n                <div className=\"col-md-6\">\r\n                    {props.periodicReviewResult ?\r\n                        <PeriodicReviewResultContent periodicReviewResult={props.periodicReviewResult} />\r\n                        : null} \r\n                </div>\r\n            </div>\r\n        </Card>\r\n    )\r\n}\r\n\r\nconst PeriodicReviewResultContent = (props: { periodicReviewResult: PeriodicReviewResult }) => {\r\n    const review = props.periodicReviewResult;\r\n    return (\r\n        <Fragment>\r\n            <FormGroup label=\"Safety stock\">\r\n                {review.safetyStock}\r\n            </FormGroup>\r\n            <FormGroup label=\"Target Stock Level\">\r\n                {review.targetStockLevel}\r\n            </FormGroup>\r\n            <FormGroup label=\"Order Size\">\r\n                {review.orderSize}\r\n            </FormGroup>\r\n            <FormGroup label=\"Description\">\r\n                {review.description}\r\n            </FormGroup>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStatDetail))","\r\n\r\nimport React, { ChangeEvent, FormEvent } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { mapCommonUserStateToProps } from '../../../../constant/stores';\r\nimport BasePage from '../../../BasePage'; \r\nimport Filter from '../../../../models/common/Filter';\r\nimport PeriodFilter from './PeriodFilter';\r\nimport Modal from '../../../container/Modal'; \r\nimport InventoryService from '../../../../services/InventoryService';\r\nimport WebResponse from '../../../../models/common/WebResponse'; \r\nimport FormGroup from '../../../form/FormGroup'; \r\nimport NavigationButtons from '../../../navigation/NavigationButtons'; \r\nimport Product from './../../../../models/Product';\r\nimport SimpleError from '../../../alert/SimpleError';\r\nimport { tableHeader } from './../../../../utils/CollectionUtil';\r\nimport { beautifyNominal } from './../../../../utils/StringUtil';\r\nclass State {\r\n    filter: Filter = new Filter();\r\n    recordList?: Product[];\r\n    totalData: number = 0;\r\n}\r\nclass ProductStat extends BasePage {\r\n    state: State = new State();\r\n    inventoryService: InventoryService;\r\n    constructor(props: any) {\r\n        super(props, \"Penggunaan Produk\", true);\r\n        const date: Date = new Date();\r\n        this.state.filter.year = this.state.filter.yearTo = date.getFullYear();\r\n        this.state.filter.month = this.state.filter.monthTo = date.getMonth() + 1;\r\n        this.state.filter.day = this.state.filter.dayTo = 1;\r\n        this.state.filter.limit = 10;\r\n        this.state.filter.fieldsFilter['name'] = \"\";\r\n        this.inventoryService = this.getServices().inventoryService;\r\n    }\r\n\r\n    updateFilter = (e: ChangeEvent) => {\r\n        const target: any = e.target;\r\n        const name = target.getAttribute(\"name\"), value = target.value;\r\n        if (!name || !value) return;\r\n        const filter = this.state.filter;\r\n        filter[name] = parseInt(value);\r\n        this.setState({ filter: filter });\r\n    }\r\n    setFilter = (e: FormEvent) => {\r\n        e.preventDefault();\r\n        this.loadRecords();\r\n    }\r\n    loadRecordsAtPage = (page:number) => {\r\n        const filter = this.state.filter;\r\n        filter.page = page;\r\n        this.setState({ filter: filter }, this.loadRecords);\r\n    }\r\n    loadRecords = () => {\r\n        this.commonAjaxWithProgress(\r\n            this.inventoryService.getProductListWithUsage,\r\n            this.usageDataLoaded,\r\n            this.showCommonErrorAlert,\r\n            this.state.filter\r\n        )\r\n    }\r\n    usageDataLoaded = (response: WebResponse) => {\r\n        this.setState({ recordList: response.entities, totalData: response.totalData });\r\n    }\r\n    updateFieldsFilter = (e:ChangeEvent) => {\r\n        const target = e.target as HTMLInputElement;\r\n        const filter = this.state.filter;\r\n        filter.fieldsFilter[target.name] = target.value;\r\n        this.setState({filter: filter});\r\n    }\r\n    \r\n    render() {\r\n        const products:Product[]|undefined = this.state.recordList;\r\n        return (\r\n            <div className=\"section-body container-fluid\">\r\n                <h2>Penggunaan Produk</h2>\r\n                <Modal title=\"Periode\" >\r\n                    <form onSubmit={this.setFilter}>\r\n                        <PeriodFilter withDay fullPeriod filter={this.state.filter} onChange={this.updateFilter} />\r\n                        <FormGroup label=\"Limit\" >\r\n                            <input value={this.state.filter.limit??5} type=\"number\" min={1} \r\n                                name=\"limit\" className=\"form-control\"  onChange={this.updateFilter}\r\n                            />\r\n                        </FormGroup>\r\n                        <FormGroup label=\"Search by name\">\r\n                            <input value={this.state.filter.fieldsFilter['name']??\"\"} onChange={this.updateFieldsFilter} name=\"name\" className=\"form-control\" />\r\n                        </FormGroup>\r\n                        <button type=\"submit\" className=\"btn btn-dark\">Apply</button>\r\n                    </form>\r\n                </Modal>\r\n                <NavigationButtons\r\n                    activePage={this.state.filter.page??0}\r\n                    limit={this.state.filter.limit??10}\r\n                    totalData={this.state.totalData}\r\n                    onClick={this.loadRecordsAtPage} />\r\n\r\n                {products?\r\n                    <ProductList products={products} startNumber={(this.state.filter.page??0) * (this.state.filter.limit??10)} />:\r\n                    <SimpleError>No data</SimpleError>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst ProductList = (props:{products: Product[], startNumber:number}) => {\r\n    return (\r\n        <table className=\"table table-striped\" > \r\n                {tableHeader(\"No\", \"Name\", \"Usage\", \"Unit\")} \r\n            <tbody>\r\n                {props.products.map((product, i)=>{\r\n                    return (\r\n                        <tr key={\"product-stat-item-\"+i}>\r\n                            <td>{props.startNumber+i+1}</td>\r\n                            <td>{product.name}</td>\r\n                            <td>{beautifyNominal(product.count??0)}</td>\r\n                            <td>{product.unit?.name}</td>\r\n                        </tr>\r\n                    )\r\n                })}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps\r\n)(ProductStat))","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport Login from '../pages/login/Login';\r\nimport DashboardMain from '../pages/dashboard/main/DashboardMain';\r\nimport MasterDataMain from '../pages/masterdata/MasterDataMain';\r\nimport HomeMain from '../pages/home/HomeMain';\r\nimport Menu from '../../models/common/Menu';\r\nimport SettingsMain from '../pages/settings/SettingsMain';\r\nimport UserProfile from '../pages/settings/UserProfile';\r\nimport EditApplicationProfile from '../pages/settings/EditApplicationProfile';\r\nimport AboutUs from './../pages/home/AboutUs';\r\nimport TransactionMain from '../pages/transaction/TransactionMain';\r\nimport TransactionIn from '../pages/transaction/supply/TransactionIn';\r\nimport TransactionOut from '../pages/transaction/distribution/TransactionOut';\r\nimport TransactionInConfirmation from '../pages/transaction/supply/TransactionInConfirmation';\r\nimport TransactionDetail from '../pages/transaction/detail/TransactionDetail';\r\nimport TransactionRelatedRecord from '../pages/transaction/related/TransactionRelatedRecord';\r\nimport TransactionOutConfirmation from '../pages/transaction/distribution/TransactionOutConfirmation';\r\nimport InventoryMain from '../pages/inventory/InventoryMain';\r\nimport ProductStocks from '../pages/inventory/stock/ProductStocks';\r\nimport StockFilter from '../pages/inventory/StockFilter';\r\nimport Report from '../pages/inventory/Report';\r\nimport EditInventoryConfiguration from '../pages/settings/EditInventoryConfiguration';\r\nimport DashboardInfo from '../pages/dashboard/DashboardInfo';\r\nimport InventoryStatus from '../pages/inventory/InventoryStatus';\r\nimport ProductStatDetail from '../pages/dashboard/statistic/ProductStatDetail';\r\nimport ProductStat from '../pages/dashboard/statistic/ProductStat';\r\n\r\nclass ApplicationContent extends BaseComponent {\r\n\r\n    constructor(props: any) {\r\n        super(props, false);\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        this.props.setSidebarMenus(menus);\r\n    }\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                <Switch>\r\n                    <Route exact path=\"/login\" render={\r\n                        (props: any) =>\r\n                            <Login />\r\n                    } />\r\n                    {/* -------- home -------- */}\r\n                    <Route exact path=\"/home\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/\" render={\r\n                        (props: any) =>\r\n                            <HomeMain />\r\n                    } />\r\n                    <Route exact path=\"/about\" render={\r\n                        (props: any) =>\r\n                            <AboutUs />\r\n                    } />\r\n\r\n\r\n                    {/* -------- masterdata -------- */}\r\n                    <Route exact path=\"/management\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n                    <Route exact path=\"/management/:code\" render={\r\n                        (props: any) =>\r\n                            <MasterDataMain setSidebarMenus={this.setSidebarMenus} />\r\n                    } />\r\n                </Switch>\r\n                <Dashboard />\r\n                <Setting />\r\n                <Transaction />\r\n                <Inventory />\r\n            </Fragment>\r\n        )\r\n    }\r\n    componentDidMount() {\r\n        // document.title = \"Login\";\r\n    }\r\n\r\n}\r\nconst Dashboard = (props) => {\r\n\r\n    return (\r\n\r\n        <Switch>\r\n            <Route exact path=\"/dashboard\" render={\r\n                (props: any) =>\r\n                    <DashboardMain />\r\n            } />\r\n            <Route exact path=\"/dashboard/info\" render={\r\n                (props: any) =>\r\n                    <DashboardInfo />\r\n            } />\r\n            <Route exact path=\"/dashboard/productstat\" render={\r\n                (props: any) =>\r\n                    <ProductStat />\r\n            } />\r\n            <Route exact path=\"/dashboard/productstatdetail\" render={\r\n                (props: any) =>\r\n                    <ProductStatDetail />\r\n            } />\r\n        </Switch>\r\n    )\r\n}\r\nconst Setting = (props) => {\r\n    return <Switch>\r\n        {/* -------- settings --------- */}\r\n        <Route exact path=\"/settings\" render={\r\n            (props: any) =>\r\n                <SettingsMain />\r\n        } />\r\n        <Route exact path=\"/settings/user-profile\" render={\r\n            (props: any) =>\r\n                <UserProfile />\r\n        } />\r\n        <Route exact path=\"/settings/app-profile\" render={\r\n            (props: any) =>\r\n                <EditApplicationProfile />\r\n        } />\r\n        <Route exact path=\"/settings/inventory-config\" render={\r\n            (props: any) =>\r\n                <EditInventoryConfiguration />\r\n        } />\r\n    </Switch>\r\n}\r\nconst Transaction = (props) => {\r\n    return <Switch>\r\n        {/*TRANSACTION*/}\r\n        <Route exact path=\"/transaction\" render={\r\n            (props: any) =>\r\n                <TransactionMain />\r\n        } />\r\n        <Route exact path=\"/transaction/productin\" render={\r\n            (props: any) => <TransactionIn />\r\n        } />\r\n        <Route exact path=\"/transaction/productin/confirm\" render={\r\n            (props: any) => <TransactionInConfirmation />\r\n        } />\r\n        <Route exact path=\"/transaction/productout\" render={\r\n            (props: any) =>\r\n                <TransactionOut />\r\n        } />\r\n        <Route exact path=\"/transaction/productout/confirm\" render={\r\n            (props: any) => <TransactionOutConfirmation />\r\n        } />\r\n        <Route exact path=\"/transaction/detail\" render={\r\n            (props: any) =>\r\n                <TransactionDetail />\r\n        } />\r\n        <Route exact path=\"/transaction/detail/:code\" render={\r\n            (props: any) =>\r\n                <TransactionDetail />\r\n        } />\r\n        <Route exact path=\"/transaction/relatedrecord\" render={\r\n            (props: any) =>\r\n                <TransactionRelatedRecord />\r\n        } />\r\n        <Route exact path=\"/transaction/relatedrecord/:code\" render={\r\n            (props: any) =>\r\n                <TransactionRelatedRecord />\r\n        } />\r\n    </Switch>\r\n}\r\nconst Inventory = (props) => {\r\n    return <Switch>\r\n        {/*INVENTORY*/}\r\n        <Route exact path=\"/inventory\" render={\r\n            (props: any) =>\r\n                <InventoryMain />\r\n        } />\r\n        <Route exact path=\"/inventory/stock\" render={\r\n            (props: any) =>\r\n                <ProductStocks />\r\n        } />\r\n        <Route exact path=\"/inventory/status\" render={\r\n            (props: any) =>\r\n                <InventoryStatus />\r\n        } />\r\n        <Route exact path=\"/inventory/stockfilter\" render={\r\n            (props: any) =>\r\n                <StockFilter />\r\n        } />\r\n        <Route exact path=\"/inventory/report\" render={\r\n            (props: any) =>\r\n                <Report />\r\n        } />\r\n    </Switch>\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => ({})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(ApplicationContent))","import BaseEntity from '../BaseEntity'; \nimport { uniqueId } from '../../utils/StringUtil';\n\nexport default class Menu extends BaseEntity{\n\tstatic defaultMenuIconClassName:string = \"fas fa-folder\";\n\n\tcode:string = uniqueId();\n\tname?:string;\n\tdescription?:string;\n\turl?:string;\n\tpathVariables?:string; \n\ticonUrl?:string;\n\tcolor?:string;\n\tfontColor?:string;\n\n\t//\n\tactive?:boolean = false;\n\tmenuClass?:string = \"fas fa-folder\";\n\tauthenticated?:boolean = false;\n\tshowSidebar?:boolean  = false;\n\tsubMenus?:Menu[] = undefined;\n\n\tstatic getIconClassName = (menu:Menu) => {\n\t\tif (undefined == menu.menuClass) {\n\t\t\treturn Menu.defaultMenuIconClassName;\n\t\t}\n\t\treturn menu.menuClass;\n\t}\n}\n","\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Menu from '../../models/common/Menu';\r\nimport './SideBar.css'\r\n\r\nclass SideBar extends BaseComponent {\r\n    constructor(props: { brand: any, sidebarMenus?: Menu[] }) {\r\n        super(props, false);\r\n    }\r\n    isSidebarActive = (menu: Menu) => {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return false; }\r\n        const pathName = this.props.location.pathname;\r\n        return parentMenu.url + \"/\" + menu.url == pathName;\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScroll);\r\n    }\r\n\r\n    handleScroll(event) {\r\n        let scrollTop = event.srcElement.body.scrollTop,\r\n            itemTranslate = Math.min(0, scrollTop / 3 - 60);\r\n        // console.debug(\"scrollTop: \", scrollTop);\r\n\r\n    }\r\n    render() {\r\n        const parentMenu: Menu = this.props.parentMenu;\r\n        if (null == parentMenu) { return null }\r\n        const menus: Menu[] = this.props.sidebarMenus == null ? [] : this.props.sidebarMenus;\r\n\r\n        return (\r\n            <ul id=\"sidebar\" className=\"sidebar-nav bg-light\">\r\n                <Brand show={parentMenu != null} brand={parentMenu} />\r\n                {menus.map(menu => {\r\n                    const isActive: boolean = this.isSidebarActive(menu);\r\n                    const menuClassName = isActive ? 'menu-active' : 'regular-menu';\r\n                    return (\r\n                        <li className={\"sidebar-item \" + menuClassName} key={\"SIDEBAR_\" + menu.code}><Link to={parentMenu.url + \"/\" + menu.url}>\r\n                            <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(menu)}></i></span>\r\n                            <span className={'menu-label'} >{menu.name}</span>\r\n                        </Link></li>\r\n                    )\r\n                })\r\n                }\r\n            </ul >\r\n        )\r\n    }\r\n\r\n}\r\nconst Brand = (props) => {\r\n    if (props.show == false) return null;\r\n    return (\r\n        <Fragment> <li id=\"sidebar-brand\" className=\"sidebar-brand\" style={{ marginBottom: '20px' }}><div\r\n            style={{\r\n                textAlign: 'center', paddingTop: '10px',\r\n                paddingBottom: '10px'\r\n            }}>\r\n            <h3 className=\"text-dark\">\r\n                <i className={Menu.getIconClassName(props.brand)}></i>\r\n            </h3>\r\n            <Link to={props.brand.url} style={{ textDecoration: 'none' }}><h4 className=\"text-dark\">{props.brand.name}</h4></Link>\r\n        </div></li>\r\n            <li className={\"sidebar-item-brand \"} >\r\n                <Link to={props.brand.url}>\r\n                    <span className=\"sidebar-icon\"><i className={Menu.getIconClassName(props.brand)}></i></span>\r\n                </Link>\r\n            </li>\r\n        </Fragment>\r\n    )\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(SideBar))","\r\n\r\nimport React from 'react';\r\nimport BaseComponent from './../BaseComponent';\r\nimport { mapCommonUserStateToProps } from './../../constant/stores';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { performLogout } from './../../redux/actionCreators';\r\nimport Header from '../navigation/Header';\r\nimport ApplicationContent from './ApplicationContent';\r\nimport SideBar from '../navigation/SideBar';\r\nimport './Layout.css';\r\nimport Menu from '../../models/common/Menu';\r\nimport { getMenuByMenuPath, extractMenuPath } from './../../constant/Menus';\r\ninterface IState {\r\n    showSidebar: boolean;\r\n    activeMenuCode: any;\r\n    menu?: Menu;\r\n    sidebarMenus?: Menu[]\r\n};\r\nclass MainLayout extends BaseComponent {\r\n    state: IState = {\r\n        showSidebar: false,\r\n        activeMenuCode: null,\r\n        menu: undefined,\r\n        sidebarMenus: []\r\n    };\r\n    currentPathName: string = \"\";\r\n    constructor(props: any) {\r\n        super(props, false);\r\n        this.state = {\r\n            ...this.state,\r\n        }\r\n    }\r\n    setMenuNull = () => {\r\n        console.warn(\"SET MENU NULL\");\r\n        this.setState({ menu: undefined, showSidebar: false, activeMenuCode: null, sidebarMenus: null });\r\n    }\r\n    setMenu = (menu: Menu) => {\r\n        if (menu == null) {\r\n            return;\r\n        }\r\n        console.debug(\"SET MENU: \", menu.code);\r\n        this.setState({ menu: menu, sidebarMenus: null, showSidebar: menu.showSidebar, activeMenuCode: menu.code });\r\n    }\r\n    setSidebarMenus = (menus: Menu[]) => {\r\n        // console.debug(\"Set sidebar menus: \", menus);\r\n        this.setState({ sidebarMenus: menus });\r\n    }\r\n    componentDidMount() {\r\n        this.setCurrentMenu();\r\n    }\r\n    componentDidUpdate() {\r\n        this.setCurrentMenu();\r\n    }\r\n    setCurrentMenu = () => {\r\n        const pathName = extractMenuPath(this.props.location.pathname);\r\n       \r\n        if (pathName == this.currentPathName) {\r\n            return;\r\n        }\r\n        this.currentPathName = pathName;\r\n        const menu = getMenuByMenuPath(pathName);\r\n        if (menu == null) {\r\n            this.setMenuNull();\r\n        } else {\r\n            this.setMenu(menu);\r\n        }\r\n    }\r\n    getSubMenus = () => {\r\n        if (this.state.menu && this.state.menu.subMenus != null && this.state.menu.subMenus?.length > 0) {\r\n            return this.state.menu?.subMenus;\r\n        }\r\n        if (this.state.sidebarMenus) {\r\n            return this.state.sidebarMenus;\r\n        }\r\n        return null;\r\n    }\r\n    render() {\r\n        const showSidebar = this.state.showSidebar == true;\r\n        return (\r\n            <div id=\"main-layout\">\r\n                <Header setMenuNull={this.setMenuNull} activeMenuCode={this.state.activeMenuCode} setMenu={this.setMenu}  />\r\n                <div id=\"page-content\" className=\"container-fluid\" style={{ margin: 0, padding: 0, minHeight: '95vh' }}>    \r\n                    <div className=\"container-fluid\" style={{zIndex:  1 , position:'absolute',paddingTop: '55px'}} id={showSidebar ? \"app-content\" : \"content\"}>\r\n                        <ApplicationContent setSidebarMenus={this.setSidebarMenus}  />\r\n                    </div>\r\n                    {showSidebar == true ?  \r\n                            <SideBar sidebarMenus={this.getSubMenus()} parentMenu={this.state.menu} />\r\n                         : null}\r\n                    {/* </div> */}\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapDispatchToProps = (dispatch: Function) => ({\r\n    performLogout: (app: any) => dispatch(performLogout(app))\r\n})\r\n\r\n\r\nexport default withRouter(connect(\r\n    mapCommonUserStateToProps,\r\n    mapDispatchToProps\r\n)(MainLayout))","\nimport React, { Component, Fragment, RefObject } from 'react';\nimport './App.css';\nimport { withRouter } from 'react-router-dom'\nimport * as actions from './redux/actionCreators'\nimport { connect } from 'react-redux'\nimport SockJsClient from 'react-stomp';\nimport * as url from './constant/Url';\nimport { mapCommonUserStateToProps } from './constant/stores';\nimport Loader from './component/loader/Loader';\nimport Alert from './component/alert/Alert';\nimport MainLayout from './component/layout/MainLayout';\nimport WebResponse from './models/common/WebResponse';\nimport Spinner from './component/loader/Spinner';\nimport UserService from './services/UserService';\nimport { doItLater } from './utils/EventUtil';\n\nclass IState {\n  loading: boolean = false;\n  loadingPercentage: number = 0;\n  requestId?: undefined;\n  mainAppUpdated: Date = new Date();\n  showAlert: boolean = false;\n  realtime: boolean = false;\n  appIdStatus: string = \"Loading App Id\";\n  errorRequestAppId: boolean = false;\n}\nclass App extends Component<any, IState> {\n\n  state: IState = new IState();\n  loadings: number = 0;\n  alertTitle: String = \"Info\";\n  alertBody: any = null;\n  alertIsYesOnly: boolean = true;\n  alertIsError: boolean = false;\n  alertOnYesCallback: Function = function (e) { };\n  alertOnCancelCallback: Function = function (e) { };\n  clientRef: RefObject<SockJsClient> = React.createRef();\n  userService: UserService;\n  // alertRef: RefObject<Alert> = React.createRef();\n  alertCallback = {\n    title: \"Info\",\n    message: \"Info\",\n    yesOnly: false,\n    onOk: () => { },\n    onNo: () => { }\n  }\n\n  constructor(props: any) {\n    super(props);\n\n    this.props.setMainApp(this);\n    this.userService = this.props.services.userService;\n\n  }\n  refresh() {\n    this.setState({ mainAppUpdated: new Date() });\n  }\n\n  requestAppId = () => {\n    this.setState({ errorRequestAppId: false, appIdStatus: \"Authenticating application\" });\n    this.userService.requestApplicationId((response) => {\n      this.props.setRequestId(response, this);\n      this.refresh();\n    }, this.retryRequestAppId)\n\n  }\n  retryRequestAppId = () => {\n    // console.debug(\"RETRYING\");\n    this.setState({ errorRequestAppId: false, appIdStatus: \"Authenticating application (Retrying)\" });\n    this.userService.requestApplicationIdNoAuth((response) => {\n      this.props.setRequestId(response, this);\n    }, this.errorRequestingAppId)\n\n  }\n\n  errorRequestingAppId = () => {\n    this.setState({ errorRequestAppId: true });\n  }\n\n  incrementLoadings() {\n    this.loadings++;\n  }\n\n  decrementLoadings() {\n    this.loadings--;\n    if (this.loadings < 0) {\n      this.loadings = 0;\n    }\n  }\n\n  startLoading(realtime) {\n    this.incrementLoadings();\n    this.setState({ loading: true, realtime: realtime });\n  }\n\n  endLoading() {\n    try {\n      this.decrementLoadings();\n      if (this.loadings == 0) {\n        if (this.state.realtime) {\n          this.setState({ loadingPercentage: 100 },\n            this.smoothEndLoading);\n        } else {\n          this.setState({ loading: false, loadingPercentage: 0 });\n        }\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n  }\n\n  smoothEndLoading = () => {\n    doItLater(() => {\n      this.setState({ loading: false, loadingPercentage: 0 });\n    }, 100);\n  }\n\n  handleMessage(msg: WebResponse) {\n    const percentageFloat: number = msg.percentage ?? 0;\n    let percentage = Math.floor(percentageFloat);\n    if (percentageFloat < 0 || percentageFloat > 100) {\n      this.endLoading();\n    }\n    this.setState({ loadingPercentage: percentage });\n  }\n\n  showAlert(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertTitle = title;\n    this.alertBody = body;\n    this.alertIsYesOnly = yesOnly;\n    const app = this;\n    this.alertOnYesCallback = function (e) {\n      app.dismissAlert();\n      yesCallback(e);\n    }\n    if (!yesOnly) {\n      this.alertOnCancelCallback = function (e) {\n        app.dismissAlert();\n        if (noCallback != null) {\n          noCallback(e);\n        }\n      };\n    }\n    this.setState({ showAlert: true });\n  }\n\n  dismissAlert() {\n    this.alertIsError = false;\n    this.setState({ showAlert: false })\n  }\n  showAlertError(title: string, body: any, yesOnly: boolean, yesCallback: Function, noCallback?: Function) {\n    this.alertIsError = true;\n    this.showAlert(title, body, yesOnly, yesCallback, noCallback)\n  }\n\n  componentDidUpdate() {\n    // console.debug(\"APP UPDATED\");\n    if (this.props.applicationProfile) {\n      updateFavicon(this.props.applicationProfile);\n    }\n  }\n\n  componentDidMount() {\n\n    this.requestAppId();\n    this.setState({ loadingPercentage: 0 });\n  }\n\n  render() {\n\n    if (!this.props.requestId) {\n\n      return (\n        <div className=\"text-center\" style={{ paddingTop: '10%' }}>\n          <h2>{this.state.appIdStatus}</h2>\n          {this.state.errorRequestAppId ?\n            <a className=\"btn btn-outline-dark\" onClick={this.retryRequestAppId} >\n              <i className=\"fas fa-redo\" />\n            </a> :\n            <Spinner />\n          }\n        </div>\n      )\n    }\n    const usedHost = url.contextPath();\n    return (\n      <Fragment>\n        <Loading realtime={this.state.realtime} loading={this.state.loading} loadingPercentage={this.state.loadingPercentage} />\n        {this.state.showAlert ?\n          <Alert title={this.alertTitle}\n            isError={this.alertIsError}\n            onClose={(e) => this.setState({ showAlert: false })}\n            yesOnly={this.alertIsYesOnly}\n            onYes={this.alertOnYesCallback} onNo={this.alertOnCancelCallback}\n          >{this.alertBody}</Alert> :\n          null}\n        <MainLayout />\n        <SockJsClient url={usedHost + 'realtime-app'} topics={['/wsResp/progress/' + this.props.requestId]}\n          onMessage={(msg: WebResponse) => { this.handleMessage(msg) }}\n          ref={(client) => { this.clientRef = client }} />\n      </Fragment>\n    )\n  }\n}\n\nfunction Loading(props) {\n  if (props.loading == true) {\n    return (\n      <Loader realtime={props.realtime} progress={props.loadingPercentage} text=\"Please wait...\" type=\"loading\" />\n    );\n  }\n  return null;\n}\n\nfunction updateFavicon(profile: any) {\n  if (profile.pageIcon) {\n    let link = document.querySelector('link[rel=\"shortcut icon\"]') ||\n      document.querySelector('link[rel=\"icon\"]');\n    if (!link) {\n      link = document.createElement('link');\n      link.id = 'favicon';\n      link.setAttribute(\"rel\", 'shortcut icon');\n      document.head.appendChild(link);\n    }\n    link.setAttribute(\"href\", url.baseImageUrl() + profile.pageIcon);\n  }\n}\n\nconst mapDispatchToProps = (dispatch: Function) => ({\n  setMainApp: (app: App) => dispatch(actions.setMainApp(app)),\n  setRequestId: (response: WebResponse, app: App) => dispatch(actions.setRequestId(response, app)),\n})\n\nexport default withRouter(connect(\n  mapCommonUserStateToProps,\n  mapDispatchToProps\n)(App))\n","import React from 'react'\r\nimport App from './App'\r\nimport configureStore from './redux/configureStore'\r\nimport { HashRouter, BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\n \r\nconst Root = (props:any)  => {\r\n\r\n    const store = configureStore();\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            {/* <BrowserRouter basename=\"/rentmanagement\">\r\n                <App/>\r\n            </BrowserRouter> */}\r\n            <HashRouter>\r\n                <App/>\r\n            </HashRouter>\r\n        </Provider>  \r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Root;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './Root.tsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}