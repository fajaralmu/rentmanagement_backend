(this["webpackJsonpmedical-inventory"]=this["webpackJsonpmedical-inventory"]||[]).push([[0],{143:function(e,t,a){},144:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),i=a.n(o),l=(a(82),a(4)),s=a(9),c=a(3),u=a(2),d=a(1),m=(a(83),a(12)),p=a(7),f=a(24),h={mainApp:void 0,inventoryData:void 0,inventoryConfig:void 0},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAIN_APP":return Object(p.a)(Object(p.a)({},e),{},{mainApp:t.payload});case"SET_INVENTORY_DATA":return Object(p.a)(Object(p.a)({},e),{},{inventoryData:t.payload.inventoryData,inventoryConfig:t.payload.inventoryConfig});default:return e}},g=function e(){Object(d.a)(this,e),this.id=void 0,this.createdDate=void 0,this.modifiedDate=void 0,this.nulledFields=void 0},E=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.name=void 0,e.address=void 0,e.monthlyProductCount=void 0,e}return a}(g),b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name=void 0,e.appCode=void 0,e.shortDescription=void 0,e.about=void 0,e.welcomingMessage=void 0,e.address=void 0,e.contact=void 0,e.website=void 0,e.iconUrl=void 0,e.pageIcon=void 0,e.backgroundUrl=void 0,e.footerIconClass=void 0,e.color=void 0,e.fontColor=void 0,e}return a}(g),y={loginKey:null,loginStatus:!1,loginFailed:!1,loggedUser:null,loginAttempt:!1,requestId:null,applicationProfile:new b,masterHealthCenter:new E,assetsPath:"/"},N=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0,r={};switch(n.type){case"SET_REQUEST_ID":return console.debug("USER REDUCER:REQUEST_ID",n.payload.requestId),r=Object(p.a)(Object(p.a)({},a),{},{requestId:n.payload.requestId,masterHealthCenter:null!==(e=n.payload.masterHealthCenter)&&void 0!==e?e:{},applicationProfile:null!==(t=n.payload.applicationProfile)&&void 0!==t?t:{},assetsPath:n.payload.applicationProfile.assetsPath}),1==n.payload.loginStatus?(r.loggedUser=n.payload.user,r.loginStatus=!0):(r.loginStatus=!1,r.loggedUser=null),console.debug("result"),console.debug("action.payload.requestId: ",n.payload.requestId),console.debug("REQUEST_ID result.loginStatus:",r.loginStatus),n.payload.referer&&n.payload.referer.refresh(),r;case"do_login":return r=Object(p.a)(Object(p.a)({},a),{},{loginAttempt:!0,loginStatus:n.payload.loginStatus,loginKey:n.payload.loginKey,loginFailed:0==n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"do_logout":return r=Object(p.a)(Object(p.a)({},a),{},{loginStatus:!1,loggedUser:null}),Z(null),r;case"refresh_login":return r=Object(p.a)(Object(p.a)({},a),{},{loginStatus:n.payload.loginStatus,loggedUser:n.payload.loggedUser});case"get_logged_user":return r=Object(p.a)(Object(p.a)({},a),{},{loggedUser:n.payload.data});case"set_logged_user":return r=Object(p.a)(Object(p.a)({},a),{},{loggedUser:n.payload.user});case"SET_APPLICATION_PROFILE":return r=Object(p.a)(Object(p.a)({},a),{},{applicationProfile:n.payload.applicationProfile});default:return Object(p.a)({},a)}},C=function e(){Object(d.a)(this,e),this.name="",this.data=new Blob,this.dataUrl=""},S=a(47),D=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){S.post(e,a,{headers:V()}).then((function(e){J(e);var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))},k=function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){S.post(e,a,{responseType:"blob",headers:V()}).then((function(e){J(e);var a=e.data;a.rawAxiosResponse=e;var n=e.headers["content-disposition"].split("filename=")[1],r=n.split("."),o=r[r.length-1],i=new Blob([a],{type:o}),l=window.URL.createObjectURL(i),s=new C;s.name=n,s.data=i,s.dataUrl=l,t(s)})).catch((function(e){console.error(e),n(e)}))}))},w=function(){function e(){Object(d.a)(this,e),this.updateProfile=function(e){var t={user:e},a=ne().concat("api/app/account/updateprofile");return D(a,t)},this.requestApplicationId=function(e,t){var a=ne()+"api/public/requestid";D(a,{}).then((function(t){if("00"==t.code){var a=t.rawAxiosResponse;J(a),console.debug("response header:",a.headers["access-token"]),e(t)}else alert("Error requesting app ID")})).catch((function(e){console.error("ERROR requestApplicationId: ",e),t()}))},this.requestApplicationIdNoAuth=function(e,t){(function(e,t){var a=null==t?{}:t;return new Promise((function(t,n){S.post(e,a,{headers:z()}).then((function(e){var a=e.data;a.rawAxiosResponse=e,"00"==a.code?t(a):n(a)})).catch((function(e){console.error(e),n(e)}))}))})(ne()+"api/public/requestid",{}).then((function(t){"00"==t.code?e(t):alert("Error requesting app ID")})).catch((function(e){t(),console.error("ERROR requestApplicationIdNoAuth: ",e)}))}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();w.instance=void 0;var O=a(11),P=function(){function e(){var t=this;Object(d.a)(this,e),this.managementProperties=[],this.entityPropertyMap=new Map,this.healthCenters=[],this.getProductByCode=function(e){return t.getByKey("product","code",e)},this.getProductsByName=function(e){return t.getRecordsByKeyLike("product","name",e)},this.loadHealthCenters=function(){var e=ne().concat("api/app/entity/get");return D(e,{entity:"healthcenter",filter:{orderBy:"name",orderType:"asc"}})},this.updateApplicationProfile=function(e){var t={profile:e},a=ne().concat("api/app/setting/updateprofile");return D(a,t)},this.updateConfiguration=function(e){var t={inventoryConfiguration:e},a=ne().concat("api/app/setting/updateconfig");return D(a,t)},this.setHealthCenters=function(e){t.healthCenters=e},this.getHealthCenters=function(){return t.healthCenters}}return Object(l.a)(e,[{key:"setEntityProperty",value:function(e,t){t&&this.entityPropertyMap.set(e,t)}},{key:"getEntityProperty",value:function(e){if(void 0!=e)return this.entityPropertyMap.get(e)}},{key:"loadManagementProperties",value:function(e){var t=ne().concat("api/app/entity/managementpages");return D(t,{})}},{key:"loadEntityProperty",value:function(e){console.debug("Load entity prop: ",e);var t={entity:e},a=ne().concat("api/app/entity/configv2");return D(a,t)}},{key:"loadItems",value:function(e){var t=ne().concat("api/app/entity/get");return D(t,e)}},{key:"loadAllEntities",value:function(e){var t={entity:e,filter:{limit:0,page:0}},a=ne().concat("api/app/entity/get");return D(a,t)}},{key:"getByKey",value:function(e,t,a){var n={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:Object(O.a)({},t,a)}},r=ne().concat("api/app/entity/get");return D(r,n)}},{key:"getRecordsByKeyLike",value:function(e,t,a){var n={entity:e,filter:{limit:10,page:0,fieldsFilter:Object(O.a)({},t,a)}},r=ne().concat("api/app/entity/get");return D(r,n)}},{key:"getById",value:function(e,t){var a={entity:e,filter:{exacts:!0,limit:1,page:0,fieldsFilter:{id:t}}},n=ne().concat("api/app/entity/get");return D(n,a)}},{key:"getBy",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n={entity:e,filter:{exacts:!0,limit:a,page:0,fieldsFilter:t}},r=ne().concat("api/app/entity/get");return D(r,n)}},{key:"delete",value:function(e,t){var a={entity:e,filter:{fieldsFilter:{id:t}}},n=ne().concat("api/app/entity/delete");return D(n,a)}},{key:"save",value:function(e,t,a){var n,r=Object(O.a)({entity:e},e,t);return n=a?ne().concat("api/app/entity/update"):ne().concat("api/app/entity/add"),D(n,r)}},{key:"generateReport",value:function(e){var t=ne().concat("api/app/report/records");return k(t,e)}}],[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();P.instance=void 0;var j=function(){function e(){Object(d.a)(this,e),this.submitTransactionOUT=function(e){console.debug("object: ",e);var t={transaction:e},a=ne().concat("api/app/transaction/transactionout");return D(a,t)},this.submitTransactionIN=function(e){var t={transaction:e},a=ne().concat("api/app/transaction/transactionin");return D(a,t)},this.getTransactionByCode=function(e){var t=ne().concat("api/app/transaction/gettransaction/"+e);return D(t,{})},this.getTransactionRelatedRecord=function(e){var t=ne().concat("api/app/transaction/relatedrecord/"+e);return D(t,{})},this.deleteTransactionByCode=function(e){var t=ne().concat("api/app/transaction/deleterecord/"+e);return D(t,{})}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();j.instance=void 0;var I=function(){function e(){Object(d.a)(this,e),this.getAvailableProducts=function(e,t){var a=ne().concat("api/app/inventory/availableproducts/"+e);return D(a,{healthcenter:t})},this.getProductsInHealthCenter=function(e,t){var a=ne().concat("api/app/inventory/getproducts");return D(a,{healthcenter:t,filter:e})},this.adjustStocks=function(){var e=ne().concat("api/app/inventory/recalculatestock");return D(e,{})},this.getInventoriesData=function(){var e=ne().concat("api/app/inventory/getinventoriesdata");return D(e,{})},this.getProductUsage=function(e){var t=ne().concat("api/app/inventory/getproductusage");return D(t,e)},this.getProductListWithUsage=function(e){var t=ne().concat("api/app/inventory/getproductswithusage");return D(t,{filter:e})},this.filterStocks=function(e){var t=ne().concat("api/app/inventory/filter");return D(t,{filter:e})}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();I.instance=void 0;var T=function(){function e(){Object(d.a)(this,e),this.loadStockOpnameReport=function(e,t){var a=ne().concat("api/app/report/stockopname");return k(a,{healthcenter:t,filter:e})},this.loadMontlyReport=function(e){var t=ne().concat("api/app/report/monthly");return k(t,{filter:e})},this.printTransactionReceipt=function(e){var t=ne().concat("api/app/report/transactionreceipt/"+e);return k(t,{})},this.printReceiveRequestSheet=function(e,t){var a=ne().concat("api/app/report/receiverequestsheet");return k(a,{healthcenter:t,filter:e})}}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return null==this.instance&&(this.instance=new e),this.instance}}]),e}();T.instance=void 0;var L={services:new function e(){Object(d.a)(this,e),this.userService=w.getInstance(),this.masterDataService=P.getInstance(),this.transactionService=j.getInstance(),this.inventoryService=I.getInstance(),this.reportService=T.getInstance()}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return e},A=Object(f.c)({appState:v,userState:N,servicesState:F}),x={appState:h,userState:y,servicesState:L},R=a(47),M=function(e){return function(t){return function(a){if(!a.meta||"do_login"!==a.meta.type)return t(a);var n=a.meta.app;R.post(a.meta.url,{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){var n=t.data,r="",o=!1;null!=n.code&&"00"==n.code&&(r=t.headers["access-token"],console.log("api_token: ",r),o=!0),J(t);var i=Object.assign({},a,{payload:{loginStatus:o,loginKey:r,loggedUser:n.user}});delete i.meta,e.dispatch(i)})).catch(console.log).finally((function(){n.endLoading()}))}}},_=function(e){return function(t){return function(a){if(!a.meta||"get_logged_user"!==a.meta.type)return t(a);var n=V();R.post(a.meta.url,a.payload,{headers:n}).then((function(t){var n=t.data;if(n){var r=Object.assign({},a,{payload:{data:n}});delete r.meta,e.dispatch(r)}else alert("Error performing request")})).catch(console.log).finally((function(e){a.meta.app.endLoading(),a.meta.app.refresh()}))}}},U=function(e){return function(t){return function(a){if(!a.meta||"do_logout"!==a.meta.type)return t(a);var n=a.meta.app;R.post(a.meta.url,a.payload,{headers:V()}).then((function(t){var n=!1;"00"==t.data.code?n=!0:alert("Logout Failed");var r=Object.assign({},a,{payload:{loginStatus:!n}});delete r.meta,e.dispatch(r)})).catch(console.log).finally((function(e){return n.endLoading()}))}}},H=function(e){return function(t){return function(a){if(!a.meta||"set_logged_user"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},Y=function(e){return function(t){return function(a){if(!a.meta||"GET_MESSAGE"!==a.meta.type)return t(a);fetch(a.meta.url,{method:"post",body:JSON.stringify(a.payload),headers:V()}).then((function(e){return e.json()})).then((function(t){console.debug("sendChatMessageMiddleware Response:",t);var n=Object.assign({},a,{payload:t});delete n.meta,e.dispatch(n)})).catch((function(e){return console.log(e)})).finally((function(e){return a.meta.app.endLoading()}))}}},B=function(e){return function(t){return function(a){if(!a.meta||"store_message"!==a.meta.type)return t(a);var n=Object.assign({},a,{payload:a.payload});delete n.meta,e.dispatch(n)}}},W=null,q=function(){return W},K=function(){return W=Object(f.d)(A,x,Object(f.a)(M,U,_,H,B,Y))},V=function(){return{"Content-Type":"application/json",requestId:G(),Authorization:"Bearer "+Q()}},z=function(){return{"Content-Type":"application/json",requestId:G()}},X="medical-inventory-login-key",G=function(){var e=q();return null==e?"":e.getState().userState.requestId},Q=function(){return ee(X)},J=function(e){if(e&&e.headers&&e.headers["access-token"]){var t=e.headers["access-token"];$(X,t)}},Z=function(e){$(X,e)},$=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},ee=function(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},te="${contextPath}"==document.getElementById("rootPath").value||""==document.getElementById("rootPath").value,ae=te?"/universal-good-shop/":document.getElementById("rootPath").value,ne=function(){var e=te?"http://localhost:8080".concat(ae):ae;return e},re=function(){return function(){var e=q();return null==e?"":e.getState().userState.assetsPath}()+"images/"},oe=ne(),ie=oe+"api/app/account/",le=function(e){return e.startLoading(),{type:"do_logout",payload:{},meta:{app:e,type:"do_logout",url:ie.concat("logout")}}},se=function(e){return{type:"SET_INVENTORY_DATA",payload:{inventoryData:e.inventoryData,inventoryConfig:e.configuration},meta:{type:"SET_INVENTORY_DATA"}}},ce=a(5),ue=a(75),de=a.n(ue),me=function(e){return{applicationProfile:e.userState.applicationProfile,masterHealthCenter:e.userState.masterHealthCenter,loggedUser:e.userState.loggedUser,loginStatus:e.userState.loginStatus,requestId:e.userState.requestId,services:e.servicesState.services,mainApp:e.appState.mainApp,inventoryData:e.appState.inventoryData,inventoryConfig:e.appState.inventoryConfig}};a(143);function pe(e){if(e.realtime){var t=parseInt(e.progress);return r.a.createElement("div",{className:"row container-fluid bg-light",style:{margin:0,position:"fixed",zIndex:100}},r.a.createElement("div",{className:"col-1"},r.a.createElement("span",{style:{marginBottom:"3px",marginRight:"3px"},className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),r.a.createElement("span",null,t,"%")),r.a.createElement("div",{className:"col-11 progress",style:{padding:0,marginTop:"7px",height:"10px"}},r.a.createElement("div",{className:"bg-primary",style:{width:e.progress+"%",transitionDuration:"50ms",margin:0}})))}return r.a.createElement("button",{className:"btn btn-dark ",type:"button",disabled:!0},r.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),r.a.createElement("span",{className:" "},"Loading..."))}var fe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={timer:130,intervalId:0},n.update=function(){n.state.timer<0&&clearInterval(n.state.intervalId),console.log("tick"),n.setState({timer:n.state.timer-1}),n.state.timer<0&&n.props.endMessage&&n.props.endMessage()},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){if(1==this.props.withTimer){var e=setInterval(this.update,1,null);this.setState({intervalId:e})}}},{key:"render",value:function(){var e="message message-"+this.props.type;return 1==this.props.realtime?r.a.createElement(pe,{progress:this.props.progress,realtime:this.props.realtime}):r.a.createElement("div",{className:e},r.a.createElement(pe,{progress:this.props.progress,realtime:this.props.realtime}))}}]),a}(n.Component);function he(e){return r.a.createElement("div",{className:"modal-backdrop",style:{backgroundColor:"rgba(100,100,100,0.7)"}})}function ve(e){return r.a.createElement("div",{className:"modal-footer "+e.className},r.a.createElement("button",{ref:e.yesButtonRef,type:"button",onClick:e.onYes,className:"btn btn-outline-primary"},"Yes"),e.yesOnly?null:r.a.createElement("button",{ref:e.noButtonRef,type:"button",onClick:e.onNo,className:"btn btn-outline-secondary"},"No"))}function ge(e){return r.a.createElement("div",{className:"modal-header "+e.className},r.a.createElement("h5",{className:"modal-title "+e.fontClassName,id:"exampleModalCenterTitle"},e.title),r.a.createElement("button",{onClick:e.onClose,type:"button",className:"close"},r.a.createElement("span",{"aria-hidden":"true",className:e.fontClassName},r.a.createElement("i",{className:"fas fa-times"}))))}var Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).yesButtonRef=r.a.createRef(),n.noButtonRef=r.a.createRef(),n.onYes=function(e){n.props.onYes&&n.props.onYes(e)},n.onNo=function(e){n.props.onNo&&n.props.onNo(e)},n.onClose=function(e){n.props.onClose&&n.props.onClose(e)},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=1==this.props.isError;!e&&this.yesButtonRef.current?this.yesButtonRef.current.focus():e&&this.noButtonRef.current?this.noButtonRef.current.focus():e&&this.yesButtonRef.current&&this.yesButtonRef.current.focus()}},{key:"render",value:function(){var e=this.props.title?this.props.title:"Info",t=1==this.props.yesOnly,a=1==this.props.isError?"bg-danger":"bg-info";return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,null),r.a.createElement("div",{className:"modal fade show",style:{display:"block"},id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(ge,{fontClassName:"text-light",className:a,title:e,onClose:this.onClose}),r.a.createElement("div",{className:"modal-body"}," ",this.props.children),r.a.createElement(ve,{noButtonRef:this.noButtonRef,yesButtonRef:this.yesButtonRef,yesOnly:t,onYes:this.onYes,onNo:this.onNo})))))}}]),a}(n.Component),be=function(e,t){var a=setTimeout((function(){e(),clearTimeout(a)}),t)},ye=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(d.a)(this,a),(n=t.call(this,e)).parentApp=void 0,n.authenticated=!0,n.state={updated:new Date},n.getInventoryData=function(){return n.props.inventoryData},n.getInventoryConfig=function(){return n.props.inventoryConfig},n.getMasterHealthCenter=function(){var e;return null!==(e=n.props.masterHealthCenter)&&void 0!==e?e:new E},n.setPageTitle=function(e){document.title=e},n.validateLoginStatus=function(e){0!=n.authenticated&&0==n.isUserLoggedIn()?n.backToLogin():e&&e()},n.getApplicationProfile=function(){return null==n.props.applicationProfile?new b:n.props.applicationProfile},n.handleInputChange=function(e){var t=e.target,a="checkbox"==t.type?t.checked:t.value;n.setState(Object(O.a)({},t.name,a)),console.debug("input changed: ",t.name,a)},n.doAjax=function(e,t,a,r){n.startLoading(t);for(var o=arguments.length,i=new Array(o>4?o-4:0),l=4;l<o;l++)i[l-4]=arguments[l];e.apply(void 0,i).then((function(e){a&&a(e)})).catch((function(e){r?r(e):("string"==typeof e&&alert("Operation Failed: "+e),alert("resource not found"))})).finally((function(e){n.endLoading()}))},n.scrollTop=function(){var e={top:0,behavior:"smooth"};be((function(){window.scrollTo(e)}),100)},n.commonAjax=function(e,t,a){for(var r,o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];(r=n).doAjax.apply(r,[e,!1,t,a].concat(i))},n.commonAjaxWithProgress=function(e,t,a){for(var r,o=arguments.length,i=new Array(o>3?o-3:0),l=3;l<o;l++)i[l-3]=arguments[l];(r=n).doAjax.apply(r,[e,!0,t,a].concat(i))},n.getLoggedUser=function(){var e=n.props.loggedUser;if(e)return e.password="^_^",e},n.isUserLoggedIn=function(){return 1==n.props.loginStatus&&null!=n.props.loggedUser},n.showConfirmation=function(e){var t=Object(s.a)(n);return new Promise((function(a,n){t.parentApp.showAlert("Konfirmasi",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},n.showConfirmationDanger=function(e){var t=Object(s.a)(n);return new Promise((function(a,n){t.parentApp.showAlertError("Konfirmasi",e,!1,(function(e){a(!0)}),(function(e){a(!1)}))}))},n.showCommonErrorAlert=function(e){var t;console.error(e),e.response&&e.response.data?(console.error("e.response: ",e.response),t=e.response.data.message):t=e,n.showError("Operation Failed: "+t)},n.getServices=function(){return n.props.services},n.authenticated=r,n.state=Object(p.a)({},n.state),n.parentApp=n.props.mainApp,n}return Object(l.a)(a,[{key:"startLoading",value:function(e){this.parentApp.startLoading(e)}},{key:"endLoading",value:function(){this.parentApp.endLoading()}},{key:"showInfo",value:function(e){this.parentApp.showAlert("Info",e,!0,(function(){}))}},{key:"showError",value:function(e){this.parentApp.showAlertError("Error",e,!0,(function(){}))}},{key:"backToLogin",value:function(){this.authenticated&&null!=this.props.history&&this.props.history.push("/login")}},{key:"refresh",value:function(){this.setState({updated:new Date})}},{key:"componentDidUpdate",value:function(){1==this.authenticated&&0==this.isUserLoggedIn()&&(console.debug(typeof this,"BACK TO LOGIN"),this.validateLoginStatus())}}]),a}(n.Component),Ne=a(6),Ce=[],Se=[{code:"home",name:"Beranda",url:"/home",menuClass:"fa fa-home",active:!1,authenticated:!1,showSidebar:!1},{code:"dashboard",name:"Dasbor",url:"/dashboard",menuClass:"fas fa-tachometer-alt",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"dashboard_info",name:"Info Persediaan",url:"info",menuClass:"fas fa-info-circle"},{code:"productstat",name:"Statistik Produk",url:"productstat",menuClass:"fas fa-chart-line"},{code:"productstatdetail",name:"Statistik Produk Detail",url:"productstatdetail",menuClass:"fas fa-chart-line"}]},{code:"inventory",name:"Persediaan",url:"/inventory",menuClass:"fas fa-warehouse",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"inventory_stocks",name:"Stok",url:"stock",menuClass:"fas fa-archive"},{code:"inventory_status",name:"Status",url:"status",menuClass:"fa fa-exclamation-circle"},{code:"stockfilter",name:"Filter Stok",url:"stockfilter",menuClass:"fas fa-layer-group"},{code:"report",name:"Laporan",url:"report",menuClass:"fas fa-file-alt"}]},{code:"transaction",name:"Transaksi",url:"/transaction",menuClass:"fas fa-book",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"transaction_in",name:"Pasokan",url:"productin",menuClass:"fas fa-arrow-down"},{code:"transaction_out",name:"Distribusi",url:"productout",menuClass:"fas fa-arrow-up"},{code:"transaction_detail",name:"Detail",url:"detail",menuClass:"fas fa-file-alt"},{code:"transaction_related_record",name:"Related Record",url:"relatedrecord",menuClass:"fas fa-code-branch"}]},{code:"management",name:"Master Data",url:"/management",menuClass:"fa fa-database",active:!1,authenticated:!0,showSidebar:!0},{code:"settings",name:"Setting",url:"/settings",menuClass:"fas fa-cogs",active:!1,authenticated:!0,showSidebar:!0,subMenus:[{code:"user_profile",name:"Profil Pengguna",menuClass:"fas fa-user-cog",url:"user-profile"},{code:"app_profile",name:"Setting Aplikasi",menuClass:"fas fa-cog",url:"app-profile"},{code:"inventory_config",name:"Konfigurasi Persediaan",menuClass:"fas fa-cog",url:"inventory-config"}]}],De=(a(144),function e(){Object(d.a)(this,e),this.showNavLinks=!1}),ke=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).state=new De,n.buttonToggleNavRef=r.a.createRef(),n.toggleNavLinks=function(){n.setState({showNavLinks:!n.state.showNavLinks})},n.onLogout=function(e){var t=Object(s.a)(n);t.showConfirmation("Logout?").then((function(e){e&&t.props.performLogout(t.parentApp)}))},n.setMenu=function(e){n.state.showNavLinks&&n.buttonToggleNavRef.current&&n.buttonToggleNavRef.current.click(),n.props.setMenu(e)},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showNavLinks,a=function(){if(Ce.length>0)return Ce;Ce=[];for(var e=0;e<Se.length;e++){var t=Se[e];Ce.push(t)}return Ce}(),n=this.getLoggedUser();return r.a.createElement("div",{className:"bg-dark container-fluid",style:{position:"fixed",zIndex:55,padding:0,margin:0}},r.a.createElement(we,{label:this.getApplicationProfile().name}),r.a.createElement("nav",{id:"navbar",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{width:"100%"}},r.a.createElement("a",{id:"navbar-brand",className:"navbar-brand",href:"#"},this.getApplicationProfile().name),r.a.createElement("button",{ref:this.buttonToggleNavRef,onClick:this.toggleNavLinks,className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarToggler","aria-controls":"navbarToggler","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("i",{className:t?"fas fa-times":"fas fa-bars"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarToggler"},r.a.createElement("ul",{id:"navbar-top",className:"navbar-nav mr-auto mt-2 mt-lg-0"},a.map((function(t){if(null==t||t.authenticated&&!n)return null;var a=e.props.activeMenuCode==t.code;return r.a.createElement("li",{key:"header-menu-"+new String(t.code),className:"nav-item "+(a?"active nav-active":"nav-inactive")},r.a.createElement(Ne.b,{onClick:function(){return e.setMenu(t)},className:"nav-link  ",to:t.url},r.a.createElement("span",null,t.name)))}))),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement(Oe,{setMenuNull:this.props.setMenuNull,onLogout:this.onLogout,user:n})))))}}]),a}(ye),we=function(e){return r.a.createElement("div",{id:"navbar-brand-top",style:{paddingLeft:"0.5rem"},className:"container-fluid"},r.a.createElement("a",{style:{fontSize:"15px"},className:"text-white navbar-brand",href:"#"},r.a.createElement("strong",null,e.label)))},Oe=function(e){return e.user?r.a.createElement(n.Fragment,null,r.a.createElement(Ne.b,{onClick:e.setMenuNull,style:{marginRight:"5px"},className:"btn btn-light btn-sm my-2 my-sm-0",to:"/settings/user-profile"},r.a.createElement("img",{width:"20",src:re()+e.user.profileImage,className:"rounded rounded-circle"}),"\xa0",e.user.displayName),r.a.createElement("a",{style:{marginRight:"5px"},className:"btn btn-danger btn-sm  my-2 my-sm-0",onClick:e.onLogout},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),"\xa0Logout")):r.a.createElement(Ne.b,{style:{marginRight:"5px"},onClick:e.setMenuNull,className:"btn btn-sm btn-info my-2 my-sm-0",to:"/login"}," ",r.a.createElement("i",{className:"fas fa-sign-in-alt"}),"\xa0Login")},Pe=Object(m.f)(Object(ce.b)(me,(function(e){return{performLogout:function(t){return e(le(t))}}}))(ke)),je=(a(146),a(147),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){for(var e=new Array,t=0;t<=11;t++)e.push(r.a.createElement("div",{key:"spinner-item-"+t}));return r.a.createElement("div",{style:{width:"85px",height:"85px",display:"block"},className:"container-fluid text-center"},r.a.createElement("div",{style:{visibility:0==this.props.show?"hidden":"visible"},className:"lds-spinner"},e))}}]),a}(n.Component)),Ie=function e(){Object(d.a)(this,e),this.loading=!1,this.username="",this.password=""},Te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).state=new Ie,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.updateCredentialProperty=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(O.a)({},a,t.value))},n}return Object(l.a)(a,[{key:"login",value:function(e){e.preventDefault(),this.props.performLogin(this.state.username,this.state.password,this)}},{key:"componentDidMount",value:function(){document.title="Login",this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"componentDidUpdate",value:function(){this.isUserLoggedIn()&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"Login",className:"text-center"},r.a.createElement("svg",{style:{marginTop:"20px"},width:"200",height:"201"},r.a.createElement("g",{fill:"transparent",stroke:"black",strokeWidth:3},r.a.createElement("path",{className:"animated-svg house",d:"M 100 0 L 0 100 L 15 100 L 15 200 L 185 200  L 185 100 L 200 100  Z"}),r.a.createElement("circle",{className:"animated-svg circle",cx:100,cy:122,r:68}),r.a.createElement("path",{className:"animated-svg plus",d:"M 41 111 L 88 111 L 88 64 L 113 64 \r L 113 111 L 158 111 L 158 135 L 113 135 \r L 113 181 L 88 181 L 88 135 L 41 135 Z"}))),r.a.createElement("form",{name:"login",onSubmit:function(t){e.login(t)},method:"POST",className:"form-signin"},r.a.createElement(Fe,{value:this.state.username,onChange:this.updateCredentialProperty}),r.a.createElement(Le,{value:this.state.password,onChange:this.updateCredentialProperty}),this.state.loading?r.a.createElement(je,null):r.a.createElement("button",{className:"btn btn-lg btn-dark btn-block",type:"submit"},"Masuk"),r.a.createElement("input",{name:"transport_type",type:"hidden",value:"rest"})))}}]),a}(ye),Le=function(e){var t=e.value,a=e.onChange;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Kata Sandi"),r.a.createElement("input",{name:"password",value:t,onChange:a,type:"password",id:"inputPassword",className:"form-control border border-dark",placeholder:"Password",required:!0}))},Fe=function(e){var t=e.value,a=e.onChange;return r.a.createElement(n.Fragment,null,r.a.createElement("label",{className:"sr-only"},"Nama Pengguna"),r.a.createElement("input",{name:"username",value:t,onChange:a,type:"text",id:"username",className:"form-control border border-dark",placeholder:"Username",required:!0,autoFocus:!0}))},Ae=Object(m.f)(Object(ce.b)(me,(function(e){return{performLogin:function(t,a,n){return e(function(e,t,a){return a.startLoading(),{type:"do_login",payload:{},meta:{type:"do_login",url:ne().concat("login?username="+e+"&password="+t+"&transport_type=rest"),app:a}}}(t,a,n))}}}))(Te)),xe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e,n,r){var o;return Object(d.a)(this,a),(o=t.call(this,e,r)).title=void 0,o.title=n,o.title&&(document.title=o.title),o}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop()}))}}]),a}(ye),Re=1,Me=function(){var e=new String((new Date).getUTCMilliseconds()).toString();return++Re+"-"+e},_e=function(){var e=(new Date).getHours();return"Selamat "+(e>=3&&e<11?"Pagi":e>=11&&e<15?"Siang":e>=15&&e<18?"Sore":"Malam")};function Ue(e){return new String(e).toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}var He,Ye=function(e){return e>=10?e.toString():"0"+e},Be=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Dasbor",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Dasbor"),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null)))}}]),a}(xe),We=Object(m.f)(Object(ce.b)(me)(Be)),qe=a(28),Ke=a(19),Ve=a(36),ze=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return r.a.createElement("a",Object.assign({style:this.props.style},this.props.attributes,{onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:this.props.children?{marginRight:"5px"}:{}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(n.Component),Xe=function e(){Object(d.a)(this,e),this.show=!0},Ge=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=new Xe,n.hideModal=function(){n.setState({show:!1})},n.showModal=function(){n.setState({show:!0})},n}return Object(l.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.title)&&void 0!==e?e:"Title";if(1==this.props.toggleable&&0==this.state.show)return r.a.createElement(ze,{style:{marginBottom:"10px"},onClick:this.showModal,iconClassName:"fas fa-angle-down"},"Show ",t);var a=function(e){e.style,e.show,e.footerContent,e.toggleable;return Object(Ve.a)(e,["style","show","footerContent","toggleable"])}(this.props);return r.a.createElement("div",Object.assign({},a,{className:"modal-content ",style:Object(p.a)(Object(p.a)({},a.style),{},{marginBottom:"10px"})}),r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},t),this.props.toggleable?r.a.createElement("button",{type:"button",className:"btn btn-sm",onClick:this.hideModal,"aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},r.a.createElement("i",{className:"fas fa-times"}))):null),r.a.createElement("div",{className:"modal-body"},this.props.children),this.props.footerContent||1==this.props.showFooter?r.a.createElement("div",{className:"modal-footer"},this.props.footerContent):null)}}]),a}(n.Component),Qe=function e(){Object(d.a)(this,e),this.limit=5,this.page=0,this.orderType=void 0,this.orderBy=void 0,this.contains=void 0,this.beginsWith=void 0,this.exacts=void 0,this.day=void 0,this.year=void 0,this.month=void 0,this.module=void 0,this.fieldsFilter={},this.dayTo=void 0,this.monthTo=void 0,this.yearTo=void 0,this.maxValue=void 0,this.ignoreEmptyValue=!1,this.filterExpDate=!1,this.flag=e.FLAG_DEFAULT,this.useExistingFilterPage=!1};Qe.FLAG_ALL="ALL",Qe.FLAG_DEFAULT="DEFAULT",Qe.validateFieldsFilter=function(e){var t=e.fieldsFilter;for(var a in t){var n=t[a];void 0!=n&&null!=n&&0!=new String(n).length||void 0!=e.fieldsFilter&&delete e.fieldsFilter[a]}},Qe.setOrderPropertyFromDataSet=function(e,t){e.orderBy=t.orderby,e.orderType=t.ordertype},Qe.setFieldsFilterValue=function(e,t,a){void 0==e.fieldsFilter&&(e.fieldsFilter={}),e.fieldsFilter[t]=a},Qe.setFieldsFilterValueFromInput=function(e,t){var a=t.name,n=t.value;Qe.setFieldsFilterValue(e,a,n)},function(e){e.FIELD_TYPE_TEXT="FIELD_TYPE_TEXT",e.FIELD_TYPE_IMAGE="FIELD_TYPE_IMAGE",e.FIELD_TYPE_CURRENCY="FIELD_TYPE_CURRENCY",e.FIELD_TYPE_NUMBER="FIELD_TYPE_NUMBER",e.FIELD_TYPE_HIDDEN="FIELD_TYPE_HIDDEN",e.FIELD_TYPE_COLOR="FIELD_TYPE_COLOR",e.FIELD_TYPE_CHECKBOX="FIELD_TYPE_CHECKBOX",e.FIELD_TYPE_FIXED_LIST="FIELD_TYPE_FIXED_LIST",e.FIELD_TYPE_DYNAMIC_LIST="FIELD_TYPE_DYNAMIC_LIST",e.FIELD_TYPE_TEXTAREA="FIELD_TYPE_TEXTAREA",e.FIELD_TYPE_PLAIN_LIST="FIELD_TYPE_PLAIN_LIST",e.FIELD_TYPE_DATE="FIELD_TYPE_DATE",e.FIELD_TYPE_DATETIME="FIELD_TYPE_DATETIME",e.FIELD_TYPE_TEXTEDITOR="FIELD_TYPE_TEXTEDITOR"}(He||(He={}));var Je=function(){function e(){var t=this;Object(d.a)(this,e),this.groupNames=void 0,this.entityName=void 0,this.alias=void 0,this.fieldNames=void 0,this.idField=void 0,this.detailFieldName=void 0,this.formInputColumn=void 0,this.editable=!0,this.deletable=!0,this.creatable=!0,this.elements=new Array,this.fieldNameList=void 0,this.withProgressWhenUpdated=!1,this.addElement=function(e){t.elements.push(e)},this.setOrder=function(){for(var e=[],a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];for(var o=0;o<t.elements.length;o++){var i=n.indexOf(t.elements[o].id);i>=0&&(e[i]=t.elements[o])}t.elements=e.filter((function(e){return null!=e}))},this.keepProperties=function(){var e=[];e:for(var a=0;a<t.elements.length;a++)for(var n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];if(t.elements[a].id==r){e.push(t.elements[a]);continue e}}t.elements=e,console.debug("new elements: {}",t.elements)}}return Object(l.a)(e,null,[{key:"getRecordId",value:function(e,t){for(var a=t.elements,n=0;n<a.length;n++){var r=a[n];if(r.identity)return e[r.id]}return null}}]),e}();Je.getEntityElement=function(e,t){for(var a=0;a<e.elements.length;a++){var n=e.elements[a];if(n.id==t)return n}},Je.getHeaderLabels=function(e){var t=new Array;if(void 0==e.elements)return t;for(var a=e.elements,n=0;n<a.length;n++){var r,o=a[n],i={label:null!==(r=o.labelName)&&void 0!==r?r:o.id,value:o.id,isDate:"date"==o.type,filterable:o.filterable,orderable:o.orderable};t.push(i)}return t},Je.hasTextEditorField=function(e){for(var t=0;t<e.length;t++)if(e[t].fieldType==He.FIELD_TYPE_TEXTEDITOR)return!0;return!1};a(148);var Ze=function(){function e(){Object(d.a)(this,e)}return Object(l.a)(e,null,[{key:"parseValues",value:function(e,t){for(var a=new Array,n=t.elements,o=0;o<n.length;o++){var i=n[o],l=i.id,s=e[l];if(null!=s){switch(i.fieldType){case He.FIELD_TYPE_DATE:s=new Date(s).toLocaleDateString("ID");break;case He.FIELD_TYPE_DATETIME:s=new Date(s).toLocaleDateString("ID")+" "+new Date(s).toLocaleTimeString();break;case He.FIELD_TYPE_IMAGE:var c=new String(s).split("~")[0];s=r.a.createElement("img",{src:re()+c,width:"50",height:"50"});break;case He.FIELD_TYPE_COLOR:s=r.a.createElement("strong",{style:{color:s}},s);break;case He.FIELD_TYPE_NUMBER:s=Ue(s);break;case He.FIELD_TYPE_TEXTEDITOR:s=r.a.createElement("div",{dangerouslySetInnerHTML:{__html:new String(s).length>100?new String(s).substring(0,100)+"...":s}});break;case He.FIELD_TYPE_CHECKBOX:s=1==s?r.a.createElement("i",null,"true"):r.a.createElement("i",null,"false");break;case He.FIELD_TYPE_FIXED_LIST:case He.FIELD_TYPE_DYNAMIC_LIST:default:var u;if(i.optionItemName&&""!=i.optionItemName)s=e[l][null!==(u=i.optionItemName)&&void 0!==u?u:"id"];else s=e[l]}a.push(s)}else a.push(s)}return a}}]),e}(),$e=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=et(this.props.limit,this.props.totalData,this.props.activePage);if(0==t.length)return null;var a=t[t.length-1],n=this.props.activePage+1>=a?0:this.props.activePage+1,o=this.props.activePage-1<0?a-1:this.props.activePage-1;return r.a.createElement("div",null,r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(o)}},"Previous")),t.map((function(t,a){return r.a.createElement("li",{key:"NAV-"+Me(),className:"page-item "+(t-1==e.props.activePage?"active":"")},r.a.createElement("a",{className:"page-link ",onClick:function(a){return e.props.onClick(t-1)}},t))})),r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",onClick:function(t){return e.props.onClick(n)}},"Next")))))}}]),a}(n.Component),et=function(e,t,a){var n=[],r=Math.ceil(t/e),o=a-1,i=a+3;r>1&&n.push(1);for(var l=o;l<=i;l++)l>1&&l<=r&&n.push(l);return i<r&&n.push(r),n};function tt(e){return new Promise((function(t,a){try{var n=new FileReader;n.readAsDataURL(e.files[0]),console.debug("fileInput.files[0]: ",e.files[0]),n.onload=function(){t(new String(n.result).toString())},n.onerror=function(e){a(e)}}catch(r){a(r)}}))}var at=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).prepopulateForm=function(){},n.getEntityElement=function(){return n.props.entityElement},n.getRequiredAttr=function(){return{required:1==n.getEntityElement().required}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.prepopulateForm()}}]),a}(ye),nt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={singlePreviewData:void 0,showInputFile:!1},n.ref=r.a.createRef(),n.changeSingleImageData=function(e){var t=Object(s.a)(n);tt(e.target).then((function(e){t.setState({singlePreviewData:e})}))},n.removeImage=function(e){var t=Object(s.a)(n);n.showConfirmationDanger("Remove image?").then((function(e){e&&t.doRemoveImage()}))},n.doRemoveImage=function(){n.ref.current&&(n.ref.current.value=null),n.setState({singlePreviewData:void 0,showInputFile:!1})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e){var t=re()+e;n.setState({singlePreviewData:t,showInputFile:!0})}}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement(r.a.Fragment,null,this.state.showInputFile?r.a.createElement("input",{ref:this.ref,onChange:this.changeSingleImageData,type:"file",accept:"image/*",name:t.id,className:"form-control"}):r.a.createElement(n.Fragment,null,r.a.createElement("p",null),r.a.createElement(ze,{onClick:function(t){return e.setState({showInputFile:!0})},iconClassName:"fas fa-plus",className:"btn btn-info btn-sm"},"Add Image"),r.a.createElement("input",{type:"hidden",name:t.id,value:"NULLED"})),r.a.createElement(rt,{imageData:this.state.singlePreviewData}),r.a.createElement(ze,{show:void 0!=this.state.singlePreviewData,onClick:this.removeImage,iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove"))}}]),a}(at),rt=function(e){return 0!=e.show&&e.imageData?r.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},ot=Object(m.f)(Object(ce.b)(me)(nt)),it=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={previewData:new Map,inputElements:[1]},n.ref=r.a.createRef(),n.setImageData=function(e,t){var a=Object(s.a)(n);tt(e.target).then((function(e){var n=a.state.previewData;n.set(t,e),a.setState({previewData:n})}))},n.addInputElement=function(e){var t=n.state.inputElements;0==t.length?t.push(1):t.push(t[t.length-1]+1),n.setState({inputElements:t})},n.removeInputElement=function(e){var t=Object(s.a)(n);n.showConfirmationDanger("Delete image?").then((function(a){a&&t.doRemoveInputElement(e)}))},n.doRemoveInputElement=function(e){for(var t=n.state.previewData,a=n.state.inputElements,r=0;r<a.length;r++){a[r]==e&&(a.splice(r,1),t.delete(e))}n.setState({inputElements:a,previewData:t})},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.props.recordToEdit[n.getEntityElement().id];if(e&&""!=new String(e).trim()){for(var t=n.state.previewData,a=new String(e).split("~"),r=new Array,o=0;o<a.length;o++){var i=a[o];t.set(o,i),r.push(o)}n.setState({previewData:t,inputElements:r})}}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement(r.a.Fragment,null,this.state.inputElements.map((function(a){var o=e.state.previewData.get(a),i=void 0==o||""==new String(o).trim(),l=!i&&lt(o);return r.a.createElement(n.Fragment,{key:"IMG"+a+t.id},i?r.a.createElement("input",{onChange:function(t){return e.setImageData(t,a)},type:"file",accept:"image/*",name:t.id,className:"form-control"}):null,l?r.a.createElement("div",null,r.a.createElement("input",{value:o,type:"hidden",name:t.id}),r.a.createElement(st,{imageData:o})):i?null:r.a.createElement("div",null,r.a.createElement("input",{value:o,type:"hidden",name:t.id,className:"form-control"}),r.a.createElement(st,{imageData:re()+o}),r.a.createElement("p",{className:"badge badge-warning"},o)),r.a.createElement(ze,{show:void 0!=e.state.previewData,onClick:function(t){return e.removeInputElement(a)},iconClassName:"fas fa-times",className:"btn btn-danger btn-sm"},"remove ",a))})),r.a.createElement("p",null),r.a.createElement(ze,{iconClassName:"fas fa-plus",onClick:this.addInputElement},"Add"))}}]),a}(at),lt=function(e){return e&&e.startsWith("data:image")},st=function(e){return 0!=e.show&&e.imageData?r.a.createElement("img",{className:"image",style:{margin:"3px"},src:e.imageData,width:"50",height:"50"}):null},ct=Object(m.f)(Object(ce.b)(me)(it)),ut=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={inputList:[],singlePreviewData:void 0},n.ref=r.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Not found");n.setState({inputList:e.entities}),n.prepopulateForm()},n.loadInputList=function(){var e=n.getEntityElement().entityReferenceClass;n.commonAjax(n.masterDataService.loadAllEntities,n.inputListLoaded,n.showCommonErrorAlert,e)},n.isNotReady=function(){return 0==n.state.inputList.length},n.validateInputType=function(){console.debug("validateInputType"),n.isNotReady()&&n.loadInputList()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];if(t){var a;if(0!=n.state.inputList.length){var r=n.getEntityElement().optionValueName;r&&(a=t[r])&&(n.ref.current.value=a)}}}},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.validateInputType()}},{key:"componentDidMount",value:function(){this.validateInputType(),this.prepopulateForm()}},{key:"render",value:function(){var e=this.getEntityElement();if(this.isNotReady())return r.a.createElement("div",{className:"form-group"},"Loading...");var t=this.state.inputList;return r.a.createElement("select",{ref:this.ref,className:"form-control",name:e.id},t.map((function(t){var a=e.optionValueName,n=e.optionItemName;return n&&a?r.a.createElement("option",{key:"fid-"+Me()+"-",value:t[a]},t[n]):null})))}}]),a}(at),dt=Object(m.f)(Object(ce.b)(me)(ut)),mt=(a(149),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e;if(0==this.props.show)return null;var t=null!==(e=this.props.className)&&void 0!==e?e:"btn btn-outline-secondary";return this.props.to?r.a.createElement(Ne.b,Object.assign({},this.props.attributes,{to:this.props.to,style:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:{marginRight:this.props.children?"5px":0}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children):r.a.createElement("a",Object.assign({},this.props.attributes,{tyle:this.props.style,onClick:this.props.onClick,className:t}),this.props.iconClassName?r.a.createElement("span",{style:{marginRight:"5px"}},r.a.createElement("i",{className:this.props.iconClassName})):null,this.props.children)}}]),a}(n.Component)),pt=function e(){Object(d.a)(this,e),this.editMode=!1,this.fieldValue="",this.updated=!1},ft=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new pt,n.contentRef=r.a.createRef(),n.formatDoc=function(e,t){var a=n.contentRef.current;if(a){if(console.debug("commmand: ",e),n.validateMode()){var r=document.execCommand(e,!1,t);console.debug("EXECUTED: ",r," editable: ",a.contentEditable),a.focus()}}else console.debug("oDOc is missing")},n.validateMode=function(){return!n.state.editMode||(alert('Uncheck "Show HTML".'),n.contentRef.current&&n.contentRef.current.focus(),!1)},n.setValue=function(e){n.contentRef.current&&n.setState({fieldValue:n.contentRef.current.innerHTML,updated:!0})},n.setDocMode=function(e){var t=n.contentRef.current;if(t){var a;if(e){a=document.createTextNode(t.innerHTML),t.innerHTML="";var r=document.createElement("pre");t.contentEditable="false",r.id="sourceText",r.contentEditable="true",r.appendChild(a),t.appendChild(r)}else document.all?t.innerHTML=t.innerText:((a=document.createRange()).selectNodeContents(t.firstChild),t.innerHTML=a.toString()),t.contentEditable="true";t.focus()}},n.printDoc=function(){n.validateMode()},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.contentRef.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&(n.contentRef.current.innerHTML=t,n.setState({fieldValue:t,updated:!0}))}},n.setEditMode=function(e){n.setDocMode(e),n.setState({editMode:e})},n.paleteCommand=function(e){var t=e.target,a=t.dataset.command,r=t.dataset.value;"clean"==a?n.clean():n.formatDoc(a,r)},n.clean=function(){var e=Object(s.a)(n);n.showConfirmationDanger("Clean content?").then((function(t){t&&e.contentRef.current&&(e.contentRef.current.innerHTML="")}))},n.contentOnChange=function(e){n.setState({updated:!1})},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){console.debug("component updated")}},{key:"render",value:function(){var e=this,t=this.getEntityElement();return r.a.createElement("div",null,r.a.createElement("input",{type:"hidden",value:this.state.fieldValue,name:t.id}),r.a.createElement("div",{id:"toolBar1",className:"input-group"},r.a.createElement(Et,{onChange:this.formatDoc}),r.a.createElement(bt,{onChange:this.formatDoc}),r.a.createElement(ht,{onChange:this.formatDoc}),r.a.createElement(gt,{onChange:this.formatDoc}),r.a.createElement(vt,{onChange:this.formatDoc})),r.a.createElement("div",{id:"toolBar2"},r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"clean",className:"palete fas fa-broom"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-print "}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"undo",className:"palete fas fa-undo"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"redo",className:"palete fas fa-redo"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"removeFormat",className:"palete fas fa-times"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"bold",className:"palete fas fa-bold"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"italic",className:"palete fas fa-italic"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"underline",className:"palete fas fa-underline"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyleft",className:"palete fas fa-align-left"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifycenter",className:"palete fas fa-align-center"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"justifyright",className:"palete fas fa-align-right"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertorderedlist",className:"palete fas fa-list-ol"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"insertonorderedlist",className:"palete fas fa-list-ul"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"formatblock","data-value":"blockquote",className:"palete fas fa-quote-left"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"outdent",className:"palete"},"+ Indentation"),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"indent",className:"palete"},"- Indentation"),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},className:"palete fas fa-link",onClick:function(t){var a=prompt("Write the URL here","http://");a&&""!=a&&"http://"!=a&&e.formatDoc("createlink",a)}}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"cut",className:"palete fas fa-cut"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"copy",className:"palete fas fa-copy"}),r.a.createElement("i",{onMouseDown:function(e){return e.preventDefault()},onClick:this.paleteCommand,"data-command":"paste",className:"palete fas fa-paste"})),r.a.createElement("div",{onInput:this.contentOnChange,className:"container-fluid",ref:this.contentRef,id:"textBox",contentEditable:"true"},r.a.createElement("p",null,"Fill content")),r.a.createElement("p",null),r.a.createElement(mt,{show:0==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-exclamation-circle",className:"btn btn-warning btn-sm",onClick:this.setValue},"Update Content"),r.a.createElement(mt,{show:1==this.state.updated,style:{marginRight:"5px"},iconClassName:"fas fa-check",className:"btn btn-primary btn-sm"},"Content Updated"),r.a.createElement(mt,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!1)},show:1==this.state.editMode},"Hide Html"),r.a.createElement(mt,{className:"btn btn-secondary btn-sm",attributes:{onMouseDown:function(e){return e.preventDefault()}},onClick:function(t){return e.setEditMode(!0)},show:0==this.state.editMode},"Show Html"))}}]),a}(at),ht=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontsize",a.value),a.value="-"}},r.a.createElement("option",{value:"-",className:"heading",selected:!0},"- size -"),r.a.createElement("option",{value:"1"},"Very small"),r.a.createElement("option",{value:"2"},"A bit small"),r.a.createElement("option",{value:"3"},"Normal"),r.a.createElement("option",{value:"4"},"Medium-large"),r.a.createElement("option",{value:"5"},"Big"),r.a.createElement("option",{value:"6"},"Very big"),r.a.createElement("option",{value:"7"},"Maximum"))},vt=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("backcolor",a.value),a.value="-"}},r.a.createElement("option",{value:"-",className:"heading",selected:!0},"- background -"),r.a.createElement("option",{value:"red"},"Red"),r.a.createElement("option",{value:"green"},"Green"),r.a.createElement("option",{value:"black"},"Black"))},gt=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("forecolor",a.value),a.value="-"}},r.a.createElement("option",{className:"heading",value:"-",selected:!0},"- color -"),r.a.createElement("option",{value:"red"},"Red"),r.a.createElement("option",{value:"blue"},"Blue"),r.a.createElement("option",{value:"green"},"Green"),r.a.createElement("option",{value:"black"},"Black"))},Et=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("formatblock",a.value),a.value="-"}},r.a.createElement("option",{value:"-",selected:!0},"- formatting -"),r.a.createElement("option",{value:"h1"},"Title 1 <h1>"),r.a.createElement("option",{value:"h2"},"Title 2 <h2>"),r.a.createElement("option",{value:"h3"},"Title 3 <h3>"),r.a.createElement("option",{value:"h4"},"Title 4 <h4>"),r.a.createElement("option",{value:"h5"},"Title 5 <h5>"),r.a.createElement("option",{value:"h6"},"Subtitle <h6>"),r.a.createElement("option",{value:"p"},"Paragraph <p>"),r.a.createElement("option",{value:"pre"},"Preformatted <pre>"))},bt=function(e){return r.a.createElement("select",{className:"form-control",onChange:function(t){var a=t.target;e.onChange("fontname",a.value),a.value="-"}},r.a.createElement("option",{value:"-",className:"heading",selected:!0},"- font -"),r.a.createElement("option",{value:"Arial"},"Arial"),r.a.createElement("option",{value:"Arial Black"},"Arial Black"),r.a.createElement("option",{value:"Courier New"},"Courier New"),r.a.createElement("option",{value:"Times New Roman"},"Times New Roman"))},yt=Object(m.f)(Object(ce.b)(me)(ft)),Nt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={checked:!1},n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({checked:1==t})}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.getEntityElement(),a=this.state.checked;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"hidden",name:t.id,value:a?"true":"false"}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("a",{className:a?"btn btn-dark":"btn btn-light",onClick:function(t){return e.setState({checked:!0})}},"Yes"),r.a.createElement("a",{className:a?"btn btn-light":"btn btn-dark",onClick:function(t){return e.setState({checked:!1})}},"No")))}}]),a}(at),Ct=["Januari","Februari","Maret","April","Mei","Juni","Juli","Ahustus","September","Oktober","November","Desember"],St=[31,29,31,30,31,30,31,31,30,31,30,31],Dt=[31,28,31,30,31,30,31,31,30,31,30,31],kt=function(e,t){return t%4==0?St[e]:Dt[e]},wt=function(e){return[e.getFullYear(),Ye(e.getMonth()+1),Ye(e.getDate())].join("-")};var Ot=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement(),t=e.id,a=n.props.recordToEdit[t];if(void 0!=a){var r=void 0;switch(e.fieldType){case He.FIELD_TYPE_DATE:var o=new Date(a);if(!o)break;r=wt(o);break;case He.FIELD_TYPE_NUMBER:r=new String(a);break;default:r=a}if(r)if(e.optionItemName&&""!=e.optionItemName){var i,l=r;n.ref.current.value=l[null!==(i=e.optionItemName)&&void 0!==i?i:"id"]}else n.ref.current.value=r}else console.debug(t," is undefined",n.props.recordToEdit,n.props.recordToEdit[t])}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=this.getRequiredAttr();if(1==e.identity||0==e.editable)return r.a.createElement("input",Object.assign({},t,{value:"Generated",ref:this.ref,className:"form-control",name:e.id,disabled:!0}));var a=r.a.createElement("p",null,e.fieldType);switch(e.fieldType){case He.FIELD_TYPE_PLAIN_LIST:a=r.a.createElement("select",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}),e.plainListValues.map((function(t,a){return r.a.createElement("option",{key:"s-"+e.id+"-o-"+a,value:t},t)})));break;case He.FIELD_TYPE_TEXTAREA:a=r.a.createElement("textarea",Object.assign({},t,{ref:this.ref,className:"form-control",name:e.id}));break;case He.FIELD_TYPE_NUMBER:a=r.a.createElement("input",Object.assign({type:e.type,step:.001},t,{ref:this.ref,className:"form-control",name:e.id}));break;default:a=r.a.createElement("input",Object.assign({type:e.type},t,{ref:this.ref,className:"form-control",name:e.id}))}return a}}]),a}(at),Pt=function e(){Object(d.a)(this,e),this.inputList=[],this.searchValue=""},jt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state=new Pt,n.ref=r.a.createRef(),n.inputRef=r.a.createRef(),n.inputListLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error(n.getEntityElement().labelName+" Not found");n.setState({inputList:e.entities},(function(){n.inputRef.current&&n.inputRef.current.focus()}))},n.loadInputList=function(){var e,t=n.getEntityElement(),a=t.entityReferenceClass,r=t.optionItemName;if(r){var o={entity:a,filter:{limit:0,page:0,fieldsFilter:Object(O.a)({},r,null===(e=n.inputRef.current)||void 0===e?void 0:e.innerHTML)}};n.commonAjax(n.masterDataService.loadItems,n.inputListLoaded,n.showCommonErrorAlert,o)}},n.prepopulateForm=function(){if(n.props.recordToEdit&&n.ref.current){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({inputList:[t],searchValue:""},(function(){var e,a=n.getEntityElement().optionValueName;a&&(e=t[a])&&(n.ref.current.value=e)}))}},n.search=function(e){if(13==e.keyCode){if(n.inputRef.current){var t=n.inputRef.current;t.innerHTML=new String(t.innerText).trim()}return e.preventDefault(),n.loadInputList(),!1}},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=e.optionValueName,a=e.optionItemName,n=this.state.inputList;console.debug("options: ",n);var o=e.entityReferenceClass+" "+a;return r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{className:"input-group-text"},o)),r.a.createElement("div",{onKeyDown:this.search,ref:this.inputRef,contentEditable:!0,className:"form-control"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(mt,{onClick:this.loadInputList,className:"btn btn-secondary",children:"Search"}),r.a.createElement(mt,{show:void 0!=this.props.recordToEdit,onClick:this.prepopulateForm,iconClassName:"fas fa-sync-alt",className:"btn btn-secondary"}))),r.a.createElement("select",Object.assign({},this.getRequiredAttr(),{ref:this.ref,className:"form-control",name:e.id}),n.map((function(e){return a&&t?r.a.createElement("option",{key:"fid-"+Me()+"-",value:e[t]},e[a]):null}))))}}]),a}(at),It=Object(m.f)(Object(ce.b)(me)(jt)),Tt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){if(0==this.props.show)return null;var e="vertical"==this.props.orientation?"vertical":"horizontal";return r.a.createElement("div",{style:this.props.style,className:"form-group "+this.props.className+" "+("vertical"==e?"":"row")},r.a.createElement("label",{className:"vertical"==e?"":"col-sm-3"},r.a.createElement("strong",null,this.props.label?this.props.label:null)),r.a.createElement("div",{className:"vertical"==e?"":"col-sm-9"},this.props.children))}}]),a}(n.Component),Lt=function e(){Object(d.a)(this,e),this.hour=(new Date).getHours(),this.minute=(new Date).getMinutes(),this.second=(new Date).getSeconds()},Ft=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],At=function(){for(var e=[],t=1;t<60;t++)e.push(t);return e},xt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=new Lt,n.minutes=void 0,n.seconds=void 0,n.setDefaultValue=function(){try{var e=n.props.value.split(":");n.setState({hour:parseInt(e[0]),minute:parseInt(e[1]),second:parseInt(e[2])})}catch(t){}},n.updateValue=function(e){var t=e.target;if(t){var a=t.name;n.setState(Object(O.a)({},a,t.value),n.onChange)}},n.setNow=function(){var e=new Date;n.setState({hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()},n.onChange)},n.onChange=function(){n.props.onChange(n.state.hour,n.state.minute,n.state.second)},n.minutes=At(),n.seconds=At(),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-control bg-light"},r.a.createElement("select",{name:"hour",style:{border:"none"},value:this.state.hour,onChange:this.updateValue},Ft.map((function(e){return r.a.createElement("option",{key:"HOUR-"+e,value:e},Ye(e))}))),r.a.createElement("select",{name:"minute",style:{border:"none"},value:this.state.minute,onChange:this.updateValue},this.minutes.map((function(e){return r.a.createElement("option",{key:"MIN-"+e,value:e},Ye(e))}))),r.a.createElement("select",{name:"second",style:{border:"none"},value:this.state.second,onChange:this.updateValue},this.seconds.map((function(e){return r.a.createElement("option",{key:"SEC-"+e,value:e},Ye(e))}))),r.a.createElement("a",{style:{marginLeft:5},onClick:this.setNow},r.a.createElement("i",{className:"fas fa-history"})))}}]),a}(n.Component),Rt=(new Date,function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).timeRef=r.a.createRef(),n.updateTime=function(e,t,a){[Ye(e),Ye[t],Ye(a)].join(":");var r=n.props.value;r.setHours(e),r.setMinutes(t),r.setSeconds(a),r.setMilliseconds(0),n.setState({date:r},(function(){n.props.onChange(n.props.value)}))},n.updateDate=function(e){var t=e.target,a=new Date(t.value),r=n.props.value;r.setDate(a.getDate()),r.setMonth(a.getMonth()),r.setFullYear(a.getFullYear()),n.setState({date:r},(function(){n.props.onChange(n.props.value)}))},n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.timeRef.current&&this.timeRef.current.setDefaultValue()}},{key:"render",value:function(){var e,t=this.props.value;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-1 text-center d-flex align-items-center"},r.a.createElement("i",{className:"far fa-calendar-alt"})),r.a.createElement("div",{className:"col-md-5"},r.a.createElement("input",{onChange:this.updateDate,className:"form-control",value:wt(t),type:"date"})),r.a.createElement("div",{className:"col-md-1 text-center d-flex align-items-center"},r.a.createElement("i",{className:"far fa-clock"})),r.a.createElement("div",{className:"col-md-5"},r.a.createElement(xt,{ref:this.timeRef,value:(e=t,[Ye(e.getHours()),Ye(e.getMinutes()),Ye(e.getSeconds())].join(":")),onChange:this.updateTime})))}}]),a}(n.Component)),Mt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={checked:!1,value:new Date},n.inputRef=r.a.createRef(),n.prepopulateForm=function(){if(n.props.recordToEdit){var e=n.getEntityElement().id,t=n.props.recordToEdit[e];t&&n.setState({value:new Date(t)},(function(){}))}},n.onChange=function(e){n.setState({value:e})},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.getEntityElement();return console.debug("Date time value: ",this.state.value),r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"hidden",name:e.id,value:this.state.value.getTime()}),r.a.createElement(Rt,{ref:this.inputRef,onChange:this.onChange,value:this.state.value}))}}]),a}(at),_t=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).getEntityElement=function(){return n.props.entityElement},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.getEntityElement(),t=r.a.createElement("p",null,e.fieldType);if(e.editable)switch(e.fieldType){case He.FIELD_TYPE_DYNAMIC_LIST:t=r.a.createElement(It,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case He.FIELD_TYPE_FIXED_LIST:t=r.a.createElement(dt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case He.FIELD_TYPE_TEXTEDITOR:t=r.a.createElement(yt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case He.FIELD_TYPE_IMAGE:t=e.multiple?r.a.createElement(ct,{recordToEdit:this.props.recordToEdit,entityElement:e}):r.a.createElement(ot,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case He.FIELD_TYPE_CHECKBOX:t=r.a.createElement(Nt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case He.FIELD_TYPE_DATETIME:t=r.a.createElement(Mt,{recordToEdit:this.props.recordToEdit,entityElement:e});break;case He.FIELD_TYPE_PLAIN_LIST:case He.FIELD_TYPE_TEXTAREA:default:t=r.a.createElement(Ot,{recordToEdit:this.props.recordToEdit,entityElement:e})}else t=r.a.createElement(Ot,{recordToEdit:this.props.recordToEdit,entityElement:e});var a=r.a.createElement("span",null,e.labelName,e.editable&&e.required?r.a.createElement("i",{className:"text-danger"},"*"):null);return r.a.createElement(Tt,{orientation:"vertical",label:a},"          ",t)}}]),a}(ye),Ut=Object(m.f)(Object(ce.b)(me)(_t)),Ht=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.editMode=!1,n.recordToEdit=void 0,n.onSubmit=function(e){e.preventDefault();var t=e.target,a=Object(s.a)(n);n.showConfirmation("Save data?").then((function(e){e&&a.submit(t)}))},n.submit=function(e){var t=new FormData(e),a={},r=new Array,o=[],i=!1;t.forEach((function(e,t){console.debug("Form data ",t),a[t]||(a[t]=new Array);var r=n.getEntityElement(t);if(!r)return!1;switch(r.fieldType){case He.FIELD_TYPE_CHECKBOX:a[t].push("true"==e);break;case He.FIELD_TYPE_DYNAMIC_LIST:case He.FIELD_TYPE_FIXED_LIST:var l=r.optionValueName;l&&a[t].push(Object(O.a)({},l,e));break;case He.FIELD_TYPE_IMAGE:console.debug(t," is image"),"NULLED"==e?(console.debug("NULLED VALUE ADDED: ",t),o.push(t)):(new String(e).startsWith("data:image")&&(i=!0),a[t].push(e));break;default:a[t].push(e)}return!0})),Promise.all(r).then((function(e){var t=n.generateRequestPayload(a,o);console.debug("Record object to save: ",t,"realtimeProgress: ",i),n.ajaxSubmit(t,i)}))},n.generateRequestPayload=function(e,t){var a=n.editMode&&n.recordToEdit?Object(p.a)(Object(p.a)({},n.recordToEdit),{},{nulledFields:t}):{nulledFields:new Array};for(var r in e){var o=e[r];1==o.length?a[r]=o[0]:o.length>1&&(a[r]=o.join("~"))}return a.nulledFields=t,a},n.ajaxSubmit=function(e,t){1==n.getEntityProperty().withProgressWhenUpdated||t?n.commonAjaxWithProgress(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode):n.commonAjax(n.masterDataService.save,n.recordSaved,n.showCommonErrorAlert,n.getEntityProperty().entityName,e,n.editMode)},n.recordSaved=function(e){n.showInfo("Record saved")},n.masterDataService=n.getServices().masterDataService,e.recordToEdit&&(n.editMode=!0,n.recordToEdit=e.recordToEdit),n}return Object(l.a)(a,[{key:"getEntityProperty",value:function(){return this.props.entityProperty}},{key:"componentDidUpdate",value:function(){0!=this.getEntityProperty().editable&&0!=this.getEntityProperty().creatable||this.props.onClose()}},{key:"getEntityElement",value:function(e){return Je.getEntityElement(this.getEntityProperty(),e)}},{key:"render",value:function(){var e=this.getEntityProperty(),t=this.editMode?r.a.createElement("span",{className:"badge badge-warning"},"Edit Mode"):"";return r.a.createElement("div",{id:"MasterDataForm"},r.a.createElement(ze,{style:{marginBottom:"5px"},onClick:this.props.onClose,iconClassName:"fas fa-angle-left"},"Back"),r.a.createElement("form",{onSubmit:this.onSubmit,id:"record-form"},r.a.createElement(Ge,{title:r.a.createElement("span",null,e.alias," Record Form ",t),footerContent:r.a.createElement(Yt,null)},r.a.createElement(Bt,{app:this.parentApp,recordToEdit:this.recordToEdit,entityProperty:e}))))}}]),a}(ye),Yt=function(e){return r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("input",{type:"reset",className:"btn btn-warning"}))},Bt=function(e){var t=e.entityProperty.elements,a=new Array,n=0,o=Je.hasTextEditorField(t);a.push(new Array);for(var i=0;i<t.length;i++){var l=t[i];!o&&i>0&&i%5==0&&(n++,a.push(new Array)),a[n].push(l)}return r.a.createElement("div",{className:"row"},a.map((function(t,a){return r.a.createElement("div",{key:"GROUPED_ELEMENT_"+a,className:o?"col-lg-12":"col-lg-6"},t.map((function(t){var a="form-input-for-"+e.entityProperty.entityName+t.id;return r.a.createElement(Ut,{key:a,recordToEdit:e.recordToEdit,entityElement:t})})))})))},Wt=Object(m.f)(Object(ce.b)(me)(Ht)),qt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.delete=function(e){var t=Object(s.a)(n);n.showConfirmationDanger("Delete record?").then((function(e){e&&t.doDelete()}))},n.doDelete=function(){var e=n.props.record,t=n.props.entityProperty,a=Je.getRecordId(e,t);t.withProgressWhenUpdated?n.commonAjaxWithProgress(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a):n.commonAjax(n.masterDataService.delete,n.recordDeleted,n.showCommonErrorAlert,t.entityName,a)},n.getRecordById=function(){var e=n.props.record,t=n.props.entityProperty,a=Je.getRecordId(e,t);n.commonAjax(n.masterDataService.getById,n.recordLoaded,n.showCommonErrorAlert,t.entityName,a)},n.recordLoaded=function(e){if(!e.entities||0==e.entities.length)throw new Error("Record not found");n.props.showEditForm&&n.props.showEditForm(e)},n.recordDeleted=function(e){n.showInfo("Record deleted"),n.props.reload()},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.entityProperty;return 0==e.editable?null:r.a.createElement(n.Fragment,null,r.a.createElement(ze,{onClick:this.getRecordById,iconClassName:"fas fa-edit",className:"btn btn-warning btn-sm"}),r.a.createElement(ze,{show:1==e.deletable,onClick:this.delete,className:"btn btn-danger btn-sm",iconClassName:"fas fa-times"}))}}]),a}(ye),Kt=Object(m.f)(Object(ce.b)(me,(function(e){return{}}))(qt)),Vt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headerProps,a=e.fieldsFilter;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),t.map((function(t,n){var o,i=t.filterable&&t.isDate,l=t.value,s="dth-"+n+"-"+l;if(!t.filterable&&!t.orderable)return r.a.createElement("th",{key:s},r.a.createElement("p",{children:t.label}));return r.a.createElement("th",{key:s},r.a.createElement("p",{children:t.label}),r.a.createElement("div",{style:{minWidth:"200px"},className:"input-group"},i?r.a.createElement(zt,{headerName:l,fieldsFilter:a,filterClass:"form-control input-filter",onChange:e.filterOnChange}):t.filterable?r.a.createElement("input",{key:"filter-common-"+l,autoComplete:"off",value:null!==(o=a[l])&&void 0!==o?o:"",onChange:e.filterOnChange,placeholder:t.label,className:"form-control input-filter",name:l}):null,r.a.createElement(Xt,{show:t.orderable,headerName:l,onClick:e.orderButtonOnClick})))})),r.a.createElement("th",null,"Action")))}}]),a}(n.Component),zt=function(e){var t,a,o,i=e.headerName,l=e.filterClass,s=e.fieldsFilter;return r.a.createElement(n.Fragment,null,r.a.createElement("input",{key:"filter-day-"+i,autoComplete:"off",value:null!==(t=s[i+"-day"])&&void 0!==t?t:"",onChange:e.onChange,name:i+"-day",className:l,placeholder:"day"}),r.a.createElement("input",{key:"filter-month-"+i,autoComplete:"off",value:null!==(a=s[i+"-month"])&&void 0!==a?a:"",onChange:e.onChange,name:i+"-month",className:l,placeholder:"month"}),r.a.createElement("input",{key:"filter-year-"+i,autoComplete:"off",value:null!==(o=s[i+"-year"])&&void 0!==o?o:"",onChange:e.onChange,name:i+"-year",className:l,placeholder:"year"}))},Xt=function(e){if(1!=e.show)return null;var t=e.headerName;return r.a.createElement("div",{className:"input-group-append btn-group"},r.a.createElement("button",{"data-ordertype":"asc",onClick:e.onClick,"data-orderby":t,className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{"data-ordertype":"asc",onClick:e.onClick,"data-orderby":t,className:"fas fa-angle-up"})),r.a.createElement("button",{"data-ordertype":"desc",onClick:e.onClick,"data-orderby":t,className:"btn btn-outline-secondary btn-sm"},r.a.createElement("i",{"data-ordertype":"desc",onClick:e.onClick,"data-orderby":t,className:"fas fa-angle-down"})))},Gt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:r.a.createElement("div",{className:"alert alert-danger"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(n.Component),Qt=function(e){var t="";if("transaction"==e.entityProperty.entityName)t="/transaction/detail/"+e.record.code;else{if("product"!=e.entityProperty.entityName)return null;t="/dashboard/statistic/product/"+e.record.code}return r.a.createElement(mt,{className:"btn btn-sm btn-dark",iconClassName:"fas fa-external-link-alt",to:t,attributes:{target:"_blank"}})},Jt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.props,o=this.props.active;return r.a.createElement("div",{className:"btn-group"},r.a.createElement(ze,{className:"btn  btn-sm "+(o?"btn-dark":"btn-light"),onClick:function(e){return a.props.onClick(!0)}},null!==(e=n.yesLabel)&&void 0!==e?e:"Yes"),r.a.createElement(ze,{className:"btn  btn-sm "+(0==o?"btn-dark":"btn-light"),onClick:function(e){return a.props.onClick(!1)}},null!==(t=n.noLabel)&&void 0!==t?t:"No"))}}]),a}(n.Component),Zt=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.state=void 0,n.recordToEdit=void 0,n.entityProperty=void 0,n.headerProps=void 0,n.loadItems=function(e){var t=Object.assign(new Qe,n.state.filter),a=n.entityProperty.entityName;t.page=null!==e&&void 0!==e?e:t.page,Qe.validateFieldsFilter(t);var r={entity:a,filter:t};n.commonAjax(n.masterDataService.loadItems,n.itemsLoaded,n.showCommonErrorAlert,r)},n.itemsLoaded=function(e){n.setState({recordData:e,filter:e.filter})},n.checkDefaultData=function(){n.state.loading||n.entityProperty.entityName==n.props.entityProperty.entityName&&void 0!=n.state.recordData||(n.entityProperty=n.props.entityProperty,n.headerProps=Je.getHeaderLabels(n.props.entityProperty),n.loadItems(0))},n.getRecordNumber=function(e){var t,a;return(null!==(t=n.state.filter.page)&&void 0!==t?t:0)*(null!==(a=n.state.filter.limit)&&void 0!==a?a:5)+e+1},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadItems(t)},n.filterOnChange=function(e){e.preventDefault();var t=n.state.filter;Qe.setFieldsFilterValueFromInput(t,e.target),n.setState({filter:t})},n.setExactSearch=function(e){var t=n.state.filter;t.exacts=e,n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=5,n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=n.state.filter;Qe.setOrderPropertyFromDataSet(t,e.target.dataset),n.setState({filter:t},(function(){n.loadItems(0)}))},n.showEditForm=function(e){e.entities&&(n.recordToEdit=e.entities[0],n.setState({showForm:!0}))},n.showCreateForm=function(e){n.recordToEdit=void 0,n.setState({showForm:!0})},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.printRecord=function(){n.props.printRecord(n.state.filter)},n.masterDataService=n.getServices().masterDataService,n.entityProperty=n.props.entityProperty,n.headerProps=Je.getHeaderLabels(n.props.entityProperty),n.state={showForm:!1,loading:!1,filter:{limit:5,page:0,fieldsFilter:{}}},n}return Object(l.a)(a,[{key:"startLoading",value:function(){this.setState({loading:!0})}},{key:"endLoading",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.checkDefaultData()}},{key:"componentDidMount",value:function(){this.checkDefaultData()}},{key:"render",value:function(){var e,t,a,n,o=this;if(void 0==this.state.recordData)return r.a.createElement(je,null);var i=this.headerProps,l=1==this.state.filter.exacts,s=this.state.recordData.entities?this.state.recordData.entities:[];if(void 0==i||void 0==s)return r.a.createElement(Gt,null);if(1==this.state.showForm)return r.a.createElement(Wt,{recordToEdit:this.recordToEdit,entityProperty:this.entityProperty,onClose:function(e){o.setState({showForm:!1})}});var c=this.state.filter;return r.a.createElement("div",{id:"MasterDataList"},r.a.createElement("div",{className:"btn-group",style:{marginBottom:"5px"}},r.a.createElement(ze,{show:1==this.entityProperty.creatable&&1==this.entityProperty.editable,onClick:this.showCreateForm,iconClassName:"fas fa-plus"},"Add Record"),r.a.createElement(ze,{onClick:this.printRecord,iconClassName:"fas fa-file"},"Print Record")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement(Ge,{title:"Filter",toggleable:!0},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:(null!==(e=c.page)&&void 0!==e?e:0)+1,onChange:function(e){o.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:c.limit,onChange:function(e){return o.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"})),r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null)),r.a.createElement("div",{className:"col-3"},r.a.createElement(Jt,{yesLabel:"exact",noLabel:"not exact",active:l,onClick:function(e){return o.setExactSearch(e)}})),r.a.createElement("div",{className:"col-3"},r.a.createElement(ea,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))))),r.a.createElement($e,{limit:null!==(t=c.limit)&&void 0!==t?t:5,totalData:null!==(a=this.state.recordData.totalData)&&void 0!==a?a:0,activePage:null!==(n=c.page)&&void 0!==n?n:0,onClick:this.loadItems}),r.a.createElement(Ge,{title:"Data List"},this.state.loading?r.a.createElement($t,{loading:this.state.loading}):null,r.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(Vt,{fieldsFilter:c.fieldsFilter,orderButtonOnClick:this.orderButtonOnClick,filterOnChange:this.filterOnChange,headerProps:i}),r.a.createElement("tbody",null,s.map((function(e,t){var a=o.getRecordNumber(t),n=Ze.parseValues(e,o.props.entityProperty);return r.a.createElement("tr",{key:"tr-result-"+t},r.a.createElement("td",null,a),n.map((function(e){var t="td-u-"+Me();try{return r.a.createElement("td",{key:t,children:e})}catch(a){return r.a.createElement("td",{key:t,children:"-"})}})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement(Qt,{record:e,entityProperty:o.entityProperty}),r.a.createElement(Kt,{showEditForm:o.showEditForm,record:e,entityProperty:o.entityProperty,reload:function(){return o.loadItems(void 0)}}))))}))))))))}}]),a}(ye),$t=function(e){var t=e.loading;return r.a.createElement("div",{style:{width:"100%",height:"100%",paddingTop:"2rem",backgroundColor:"rgb(240,240,240,0.5)",marginLeft:"-1rem",marginTop:"-1rem",position:"absolute"}},r.a.createElement(je,{show:t}))},ea=function(e){return r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-dark btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-play-circle"})),"Apply Filter"),r.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-dark btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync-alt"})),"Reset"))},ta=Object(m.f)(Object(ce.b)(me)(Zt)),aa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).masterDataService=void 0,n.code="",n.loadingEntityProperty=!1,n.entityProperty=void 0,n.entityPropertyLoaded=function(e){n.loadingEntityProperty=!1,void 0!=e.entityProperty&&(n.masterDataService.setEntityProperty(n.props.code,e.entityProperty),n.setState({entityProperty:e.entityProperty}),n.setTitle(e.entityProperty))},n.setTitle=function(e){document.title=new String(null===e||void 0===e?void 0:e.alias).toString()},n.printRecord=function(e){var t=n.state.entityProperty;t&&n.showConfirmation("Print record? ").then((function(a){if(a){var r={entity:t.entityName,filter:e};n.commonAjaxWithProgress(n.masterDataService.generateReport,n.reportCreated,n.showCommonErrorAlert,r)}}))},n.reportCreated=function(e){n.showConfirmation("Save File "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty(),this.scrollTop()),console.debug("updated this.props.code: ",this.props.code)}},{key:"componentDidMount",value:function(){void 0!=this.props.code&&this.code!=this.props.code&&(this.code=this.props.code,this.loadEntityProperty())}},{key:"startLoading",value:function(e){1==e&&Object(qe.a)(Object(Ke.a)(a.prototype),"startLoading",this).call(this,e)}},{key:"loadEntityProperty",value:function(){var e=this;if(void 0!=this.code||1!=this.loadingEntityProperty){var t=this.masterDataService.getEntityProperty(this.code);if(void 0!=t)return this.loadingEntityProperty=!1,this.setState({entityProperty:t}),void this.setTitle(t);this.loadingEntityProperty=!0,this.setState({entityProperty:void 0}),this.commonAjax(this.masterDataService.loadEntityProperty,this.entityPropertyLoaded,(function(t){e.loadingEntityProperty=!1,e.showCommonErrorAlert(t)}),this.code)}}},{key:"render",value:function(){return void 0==this.state.entityProperty?r.a.createElement("div",{className:" container-fluid section-body",style:{paddingTop:"20px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4 text-right"},r.a.createElement("div",{className:"spinner-border",role:"status"})),r.a.createElement("div",{className:"col-8"},r.a.createElement("h4",null,"Loading configuration")))):r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,this.state.entityProperty.alias),r.a.createElement(ta,{printRecord:this.printRecord,entityProperty:this.state.entityProperty}))}}]),a}(ye),na=Object(m.f)(Object(ce.b)(me)(aa)),ra=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Master Data",!0)).masterDataService=void 0,n.state={code:void 0},n.managementPropertiesLoaded=function(e){n.masterDataService.managementProperties=e.generalList?e.generalList:[],n.setSidebarMenus(),n.refresh()},n.setSidebarMenus=function(){for(var e=[],t=n.masterDataService.managementProperties,a=0;a<t.length;a++){var r=t[a];e.push({name:r.label,url:r.entityName,code:r.entityName,menuClass:r.iconClassName})}console.debug("this.props.setSidebarMenus: ",n.props.setSidebarMenus),n.props.setSidebarMenus&&n.props.setSidebarMenus(e)},n.loadManagamenetPages=function(){if(n.masterDataService.managementProperties.length>0)return n.setSidebarMenus(),void n.refresh();n.commonAjax(n.masterDataService.loadManagementProperties,n.managementPropertiesLoaded,n.showCommonErrorAlert)},n.getCode=function(){return n.props.match.params.code},n.masterDataService=n.getServices().masterDataService,console.debug("PROPS: ",n.props),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){Object(qe.a)(Object(Ke.a)(a.prototype),"componentDidMount",this).call(this),this.loadManagamenetPages(),this.scrollTop()}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus(),this.setSidebarMenus(),this.state.code!=this.getCode()&&this.setState({code:this.getCode()})}},{key:"render",value:function(){if(void 0!=this.getCode()&&null!=this.getCode()&&""!=this.getCode())return r.a.createElement(na,{code:this.getCode()});if(0==this.masterDataService.managementProperties.length)return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement(je,null));var e=this.masterDataService.managementProperties;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Master Data Page"),r.a.createElement("div",{className:"row"},e.map((function(e){return r.a.createElement("div",{key:"mngmnt-page-item-"+e.entityName,className:"col-md-2 text-center",style:{marginBottom:"10px"}},r.a.createElement("h2",null,r.a.createElement(Ne.b,{className:"btn btn-warning btn-lg",to:"/management/"+e.entityName},r.a.createElement("i",{className:e.iconClassName}))),r.a.createElement("p",null,e.label))}))))}}]),a}(xe),oa=Object(m.f)(Object(ce.b)(me)(ra)),ia=(a(150),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,!1)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){var e=this.getApplicationProfile(),t=re()+e.backgroundUrl;return r.a.createElement("div",{className:"landing-bg",style:{backgroundImage:'url("'+t+'")',color:e.fontColor}},r.a.createElement("h1",{className:"display-4"},e.name),r.a.createElement("p",{className:"lead"},e.shortDescription),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("p",null,e.welcomingMessage),r.a.createElement("div",{className:"btn-group"},r.a.createElement(Ne.b,{className:"btn btn-primary btn-lg",to:"/about",role:"button"},"About Us"),r.a.createElement(Ne.b,{className:"btn btn-primary btn-lg",to:"/login",role:"button"},"Login")))}}]),a}(ye)),la=Object(m.f)(Object(ce.b)(me)(ia)),sa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Settings",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"SettingsMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Settings"),r.a.createElement("div",{className:"alert alert-info"},"Welcome, ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null)))}}]),a}(xe),ca=Object(m.f)(Object(ce.b)(me,(function(e){return{}}))(sa)),ua=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).username=void 0,e.displayName=void 0,e.password=void 0,e.profileImage=void 0,e.authorities=void 0,e.requestId=void 0,e.processingDate=void 0,e}return a}(g),da=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",Object.assign({},this.props.attributes,{className:"card "+this.props.className}),this.props.title?r.a.createElement("div",{className:"card-header"},this.props.title):null,r.a.createElement("div",{className:"card-body"},this.props.children),void 0!=this.props.footerContent?r.a.createElement("div",{className:"card-footer"},this.props.footerContent):null)}}]),a}(n.Component),ma=function(e){var t=e.edit,a=e.name,n=e.toggleInput,o=e.value,i=e.updateProperty,l=Object(Ve.a)(e,["edit","name","toggleInput","value","updateProperty"]);return 1==t?r.a.createElement(pa,{updateProperty:i,name:a,toggleInput:n,value:o,type:l.type}):r.a.createElement(fa,{name:a,toggleInput:n,value:o,type:l.type})},pa=function(e){var t=e.name,a=e.toggleInput,n=e.value,o=e.updateProperty,i=e.type;return r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col-md-10"},r.a.createElement("input",{type:null!==i&&void 0!==i?i:"text",name:t,onChange:o,value:n,className:"form-control"})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(ze,{attributes:{"data-name":t,"data-enabled":"false"},onClick:a,className:"btn btn-secondary btn-sm"},"cancel")))},fa=function(e){var t=e.name,a=e.toggleInput,n=e.value,o=e.type;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-10"},r.a.createElement("p",{style:{backgroundColor:"color"==o?n:"#fff"}},"color"==o?"Sample Color":n),"color"==o?r.a.createElement("p",null,n):null),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(ze,{attributes:{"data-name":t,"data-enabled":"true"},onClick:a,className:" btn btn-info btn-sm"},"edit")))},ha=function(e){var t=e.name,a=e.edit,o=e.toggleInput,i=e.updateProperty;return a?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(ze,{attributes:{"data-name":t,"data-enabled":"false"},onClick:o,className:" btn btn-secondary btn-sm"},"cancel")),r.a.createElement("input",{onChange:i,className:"form control",accept:"image/*",type:"file",name:t})):r.a.createElement("div",null,r.a.createElement(ze,{attributes:{"data-name":t,"data-enabled":"true"},onClick:o,className:" btn btn-info btn-sm"},"edit image"))},va=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e,n){var r;return Object(d.a)(this,a),(r=t.call(this,e,n,!0)).masterDataService=void 0,r.saveRecord=function(e){e.preventDefault(),0!=r.state.fieldChanged()&&r.showConfirmation("Save Data?").then((function(e){e&&r.doSaveRecord()}))},r.doSaveRecord=function(){},r.postRecordSaved=function(e){},r.recordSaved=function(e){r.showInfo("Record Has Been Saved!");var t=r.state.editFields;for(var a in t)t[a]=!1;r.setState({editFields:t},(function(){r.postRecordSaved(e)}))},r.masterDataService=r.getServices().masterDataService,r}return a}(xe),ga=function e(){var t=this;Object(d.a)(this,e),this.user=void 0,this.editFields={username:!1,displayName:!1,password:!1,profileImage:!1},this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Ea=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"User Profile")).userService=void 0,n.state=new ga,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.user;a&&(a[t.name]=t.value,n.setState({user:a}))}},n.updateProfleImage=function(e){var t=e.target;if(null!=t){var a=Object(s.a)(n);(t.files?t.files[0].name:void 0)&&tt(t).then((function(e){a.setProfileImage(e)})).catch(console.error)}},n.setProfileImage=function(e){var t=n.state.user;t&&(t.profileImage=e,n.setState({user:t}))},n.toggleInput=function(e){var t=e.target,a=n.state.user,r=n.getLoggedUser();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({user:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getEditedRecord();e&&(e.profileImage?n.commonAjaxWithProgress(n.userService.updateProfile,n.recordSaved,n.showCommonErrorAlert,e):n.commonAjax(n.userService.updateProfile,n.recordSaved,n.showCommonErrorAlert,e))},n.getEditedRecord=function(){var e,t=n.state.user,a=n.state.editFields;if(t){var r=new ua;for(var o in a){a[o]&&"profileImage"!=o&&(r[o]=t[o])}return a.profileImage&&(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))&&(r.profileImage=t.profileImage),r}},n.postRecordSaved=function(e){n.props.setLoggedUser(e.user)},n.userService=n.getServices().userService,n.state.user=Object.assign(new ua,n.getLoggedUser()),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this.state.user;if(!t)return null;var a=this.state.editFields;return r.a.createElement("div",{id:"UserProfile",className:"container-fluid section-body"},r.a.createElement("h2",null,"User Profile"),r.a.createElement(da,{title:"Profile Data"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},r.a.createElement("img",{style:{marginBottom:"10px"},width:"100",height:"100",className:"rounded-circle border border-primary",src:(null===(e=t.profileImage)||void 0===e?void 0:e.startsWith("data:image"))?t.profileImage:re()+t.profileImage}),r.a.createElement(ha,{name:"profileImage",edit:a.profileImage,updateProperty:this.updateProfleImage,toggleInput:this.toggleInput})),r.a.createElement(Tt,{label:"User Name"},r.a.createElement(ma,{edit:a.username,updateProperty:this.updateProfileProperty,name:"username",toggleInput:this.toggleInput,value:t.username})),r.a.createElement(Tt,{label:"Name"},r.a.createElement(ma,{edit:a.displayName,updateProperty:this.updateProfileProperty,name:"displayName",toggleInput:this.toggleInput,value:t.displayName})),r.a.createElement(Tt,{label:"Password"},r.a.createElement(ma,{edit:a.password,updateProperty:this.updateProfileProperty,name:"password",toggleInput:this.toggleInput,value:t.password})),r.a.createElement(Tt,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(va),ba=Object(m.f)(Object(ce.b)(me,(function(e){return{setLoggedUser:function(t){return e(function(e){return{type:"set_logged_user",payload:{user:e},meta:{type:"set_logged_user"}}}(t))}}}))(Ea)),ya=function e(){Object(d.a)(this,e),this.name=!1,this.pageIcon=!1,this.welcomingMessage=!1,this.contact=!1,this.shortDescription=!1,this.backgroundUrl=!1,this.address=!1,this.about=!1,this.color=!1,this.fontColor=!1,this.iconUrl=!1},Na=function e(){var t=this;Object(d.a)(this,e),this.applicationProfile=void 0,this.editFields=new ya,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Ca=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"ApplicationProfile Profile")).state=new Na,n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.applicationProfile;a&&(a[t.name]=t.value,n.setState({applicationProfile:a}))}},n.updateImageField=function(e){var t=e.target;if(null!=t){var a=e.target.getAttribute("name");if(null!=a){var r=Object(s.a)(n);(t.files?t.files[0].name:void 0)&&tt(t).then((function(e){r.setAppProfileField(a,e)})).catch(console.error)}}},n.setAppProfileField=function(e,t){var a=n.state.applicationProfile;a&&(a[e]=t,n.setState({applicationProfile:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.applicationProfile,r=n.getApplicationProfile();if(null!=t&&a&&r){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({applicationProfile:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getApplicationEditedData();e&&(e.backgroundUrl||e.pageIcon||e.iconUrl?n.commonAjaxWithProgress(n.masterDataService.updateApplicationProfile,n.recordSaved,n.showCommonErrorAlert,e):n.commonAjax(n.masterDataService.updateApplicationProfile,n.recordSaved,n.showCommonErrorAlert,e))},n.getApplicationEditedData=function(){var e,t,a,r=n.state.applicationProfile,o=n.state.editFields;if(r){var i=new b;for(var l in o){o[l]&&"backgroundUrl"!=l&&"pageIcon"!=l&&"iconUrl"!=l&&(i[l]=r[l])}return o.backgroundUrl&&(null===(e=r.backgroundUrl)||void 0===e?void 0:e.startsWith("data:image"))&&(i.backgroundUrl=r.backgroundUrl),o.pageIcon&&(null===(t=r.pageIcon)||void 0===t?void 0:t.startsWith("data:image"))&&(i.pageIcon=r.pageIcon),o.iconUrl&&(null===(a=r.iconUrl)||void 0===a?void 0:a.startsWith("data:image"))&&(i.iconUrl=r.iconUrl),i}},n.postRecordSaved=function(e){n.props.setApplicationProfile(e.applicationProfile)},n.state.applicationProfile=Object.assign(new b,n.getApplicationProfile()),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,n=this.state.applicationProfile;if(!n)return null;var o=this.state.editFields,i=null!==(e=n.backgroundUrl)&&void 0!==e?e:"",l=null!==(t=n.pageIcon)&&void 0!==t?t:"",s=null!==(a=n.iconUrl)&&void 0!==a?a:"";return r.a.createElement("div",{id:"ApplicationProfile",className:"container-fluid section-body"},r.a.createElement("h2",null,"Application Profile"),r.a.createElement(da,{title:"Profile Data"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement("div",{className:"container-fluid text-center",style:{marginBottom:"10px"}},r.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:i.startsWith("data:image")?i:re()+i}),r.a.createElement(ha,{name:"backgroundUrl",edit:o.backgroundUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),r.a.createElement(Tt,{label:"Name"},r.a.createElement(ma,{edit:o.name,updateProperty:this.updateProfileProperty,name:"name",toggleInput:this.toggleInput,value:n.name})),r.a.createElement(Tt,{label:"Welcoming Message"},r.a.createElement(ma,{edit:o.welcomingMessage,updateProperty:this.updateProfileProperty,name:"welcomingMessage",toggleInput:this.toggleInput,value:n.welcomingMessage})),r.a.createElement(Tt,{label:"Short Description"},r.a.createElement(ma,{edit:o.shortDescription,updateProperty:this.updateProfileProperty,name:"shortDescription",toggleInput:this.toggleInput,value:n.shortDescription})),r.a.createElement(Tt,{label:"Address"},r.a.createElement(ma,{edit:o.address,updateProperty:this.updateProfileProperty,name:"address",toggleInput:this.toggleInput,value:n.address})),r.a.createElement(Tt,{label:"About"},r.a.createElement(ma,{edit:o.about,updateProperty:this.updateProfileProperty,name:"about",toggleInput:this.toggleInput,value:n.about})),r.a.createElement(Tt,{label:"Contact"},r.a.createElement(ma,{edit:o.contact,updateProperty:this.updateProfileProperty,name:"contact",toggleInput:this.toggleInput,value:n.contact})),r.a.createElement(Tt,{label:"Background Color"},r.a.createElement(ma,{type:"color",edit:o.color,updateProperty:this.updateProfileProperty,name:"color",toggleInput:this.toggleInput,value:n.color})),r.a.createElement(Tt,{label:"Font Color"},r.a.createElement(ma,{type:"color",edit:o.fontColor,updateProperty:this.updateProfileProperty,name:"fontColor",toggleInput:this.toggleInput,value:n.fontColor})),r.a.createElement(Tt,{label:"Application Icon"},r.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:l.startsWith("data:image")?l:re()+l}),r.a.createElement(ha,{name:"pageIcon",edit:o.pageIcon,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),r.a.createElement(Tt,{label:"Logo"},r.a.createElement("img",{style:{marginBottom:"10px"},height:"100",className:"border border-primary",src:s.startsWith("data:image")?s:re()+s}),r.a.createElement(ha,{name:"iconUrl",edit:o.iconUrl,updateProperty:this.updateImageField,toggleInput:this.toggleInput})),r.a.createElement(Tt,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(va),Sa=Object(m.f)(Object(ce.b)(me,(function(e){return{setApplicationProfile:function(t){return e(function(e){return{type:"SET_APPLICATION_PROFILE",payload:{applicationProfile:e},meta:{type:"SET_APPLICATION_PROFILE"}}}(t))}}}))(Ca)),Da=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,!1)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.title="About Us"}},{key:"render",value:function(){var e=this.getApplicationProfile();return r.a.createElement("div",{style:{marginTop:20},className:"section-body container-fluid"},r.a.createElement("h2",null,"About Us"),r.a.createElement(da,{title:"Application"},r.a.createElement(Tt,{label:"Name"},e.name),r.a.createElement(Tt,null,r.a.createElement("i",null,e.shortDescription)),r.a.createElement(Tt,{label:"Contact"},e.contact),r.a.createElement(Tt,{label:"Address"},e.address)),r.a.createElement("p",null))}}]),a}(ye),ka=Object(m.f)(Object(ce.b)(me)(Da)),wa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Transaction",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Transaksi"),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null)))}}]),a}(xe),Oa=Object(m.f)(Object(ce.b)(me)(wa)),Pa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.name=void 0,e.description=void 0,e.unit=void 0,e.utilityTool=void 0,e.imageNames=void 0,e.count=void 0,e.getDefaultImageUrl=function(){return void 0==e.imageNames?re()+"default.bmp":re()+e.imageNames.split("~")[0]},e}return a}(g),ja=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).transaction=void 0,e.product=new Pa,e.expiredDate=new Date,e.count=0,e.usedCount=0,e.stock=0,e.suitable=!0,e.price=0,e.generic=!1,e.referenceProductFlow=void 0,e.stockLocation=void 0,e.referencingItems=void 0,e}return Object(l.a)(a,null,[{key:"fromReference",value:function(e){var t=new a;return t.referenceProductFlow=Object.assign(new a,e),t.product=t.referenceProductFlow.product,t}}]),a}(g),Ia=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=void 0,e.transactionDate=new Date,e.user=void 0,e.type=void 0,e.supplier=void 0,e.customer=void 0,e.healthCenterDestination=void 0,e.healthCenterLocation=void 0,e.productFlows=[],e.description=void 0,e.destination="CUSTOMER",e.productFlowCount=function(){return e.productFlows.length},e.addProductToFlow=function(t){var a=new ja;a.product=t,e.productFlows.push(a)},e.addProductFlow=function(t){e.productFlows.push(t)},e.hasProductFlowReferenceid=function(t){for(var a=0;a<e.productFlows.length;a++){var n=e.productFlows[a];if(n.referenceProductFlow&&n.referenceProductFlow.id==t)return!0}return!1},e.setProductFlowValue=function(t,a,n){try{e.productFlows[t][a]=n}catch(r){console.error(r)}},e.removeProductFlow=function(t){for(var a=0;a<e.productFlows.length;a++){e.productFlows[a];if(a==t){e.productFlows.splice(a,1);break}}},e}return a}(g),Ta=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e){return null==e?null:r.a.createElement("th",{key:Me()},e)}))))},La=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e,o){var i;return Object(d.a)(this,a),(i=t.call(this,e,!0)).inventoryService=void 0,i.masterDataService=void 0,i.setTransaction=function(e){i.setState({transaction:e})},i.validateTransactionFromProps=function(){if(i.props.location.state){var e=i.props.location.state.transaction;e&&i.setState({transaction:Object.assign(new Ia,e)})}},i.removeProductFlow=function(e){i.showConfirmationDanger("Delete Product?").then((function(t){if(t){var a=i.state.transaction;a.removeProductFlow(e),i.setTransaction(a)}}))},i.removeAll=function(){i.showConfirmationDanger("Remove All?").then((function(e){if(e){var t=i.state.transaction;t.productFlows=[],i.setTransaction(t)}}))},i.didMountCallback=function(){},i.updateTransactionGeneralField=function(e){var t,a=e.target.name;t="date"==e.target.type?new Date(e.target.value):e.target.value;var n=i.state.transaction;n[a]=t,i.setTransaction(n)},i.updateProductFlow=function(e){var t=e.target,a=t.dataset.index,n=t.value;if(a){var r=i.state.transaction;"date"==t.type?n=new Date(n):"checkbox"==t.type&&(n=1==t.checked),r.setProductFlowValue(parseInt(a),t.name,n),i.setTransaction(r)}},i.updateTransactionDate=function(e){var t=i.state.transaction;t.transactionDate=e,i.setTransaction(t)},i.buttonSubmitTransaction=function(e){var t,a=null!==(t=e.transactionDate)&&void 0!==t?t:new Date;return r.a.createElement(n.Fragment,null,r.a.createElement(Tt,{label:"Tanggal"},a.toLocaleDateString("ID")," - ",a.toLocaleTimeString(),r.a.createElement(Rt,{onChange:i.updateTransactionDate,value:null!==a&&void 0!==a?a:new Date})),r.a.createElement(Tt,{label:"Catatan"},r.a.createElement("textarea",{value:e.description,name:"description",onChange:i.updateTransactionGeneralField,className:"form-control"})),r.a.createElement("input",{type:"submit",className:"btn btn-success"}))},i.inventoryService=i.getServices().inventoryService,i.masterDataService=i.getServices().masterDataService,document.title=o,i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.validateTransactionFromProps(),e.didMountCallback(),e.scrollTop()}))}}]),a}(ye),Fa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={recordNotFound:!1,loading:!1,productName:""},n.updateField=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(O.a)({},a,t.value),n.loadRecords)},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.reset=function(e){n.setState({productName:""})},n.searchRecord=function(e){e.preventDefault(),""!=n.state.productName.trim()&&n.loadRecords()},n.recordsLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Produk tidak ditemukan");n.setState({recordList:e.entities,recordNotFound:!1})},n.setProduct=function(e){n.setState({productName:e.name,product:e,recordList:void 0,recordNotFound:!1}),n.props.setProduct&&n.props.setProduct(e)},n.recordsNotFound=function(e){n.setState({recordNotFound:!0,product:void 0,recordList:void 0})},n.loadRecords=function(){!n.state.loading&&n.state.productName&&n.commonAjaxWithProgress(n.masterDataService.getProductsByName,n.recordsLoaded,n.recordsNotFound,n.state.productName)},n.state=Object(p.a)({},n.state),n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,o=null!==(e=this.state.recordList)&&void 0!==e?e:[];return r.a.createElement("form",{onSubmit:this.searchRecord},r.a.createElement(Ge,{toggleable:!0,title:"Pilih Produk",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(mt,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/product",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Cari"}),r.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(Tt,{label:"Nama"},r.a.createElement("input",{onChange:this.updateField,value:null!==(t=this.state.productName)&&void 0!==t?t:"",placeholder:"Nama",required:!0,type:"text",className:"form-control",name:"productName"}),o.length>0?r.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},o.map((function(e){return r.a.createElement("div",{className:"option-item",onClick:function(){a.setProduct(e)},style:{cursor:"pointer"},key:"p-"+e.code+e.id},e.name)})),r.a.createElement("a",{onClick:this.recordsNotFound},r.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),r.a.createElement(Aa,{loading:this.state.loading,product:this.state.product,notFound:this.state.recordNotFound})))}}]),a}(ye),Aa=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(je,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Produk tidak ditemukan"));if(!e.product)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih produk"));var a=e.product;return r.a.createElement("div",{style:t},r.a.createElement("h4",null,a.name),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Kode"),r.a.createElement("th",null,"Unit"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a.code),r.a.createElement("td",null,a.unit?a.unit.name:"-")))))},xa=Object(m.f)(Object(ce.b)(me)(Fa)),Ra=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={recordNotFound:!1,loading:!1,supplierName:""},n.updateField=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(O.a)({},a,t.value),n.loadRecords)},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.searchRecord=function(e){e.preventDefault(),""!=n.state.supplierName.trim()&&n.loadRecords()},n.recordsLoaded=function(e){if(console.debug("response: ",e),!e.entities||!e.entities[0])throw new Error("Pemasok tidak ditemukan");n.setState({recordList:e.entities,recordNotFound:!1})},n.setSupplier=function(e){n.setState({supplierName:e.name,supplier:e,recordList:void 0,recordNotFound:!1}),n.props.setSupplier&&n.props.setSupplier(e)},n.recordsNotFound=function(e){n.setState({recordNotFound:!0,supplier:void 0,recordList:void 0})},n.loadRecords=function(){!n.state.loading&&n.state.supplierName&&n.commonAjax(n.masterDataService.getRecordsByKeyLike,n.recordsLoaded,n.recordsNotFound,"supplier","name",n.state.supplierName)},n.reset=function(e){n.setState({supplierName:""})},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a=this,o=null!==(e=this.state.recordList)&&void 0!==e?e:[];return r.a.createElement("form",{onSubmit:this.searchRecord},r.a.createElement(Ge,{toggleable:!0,title:"Pilih Pemasok",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(mt,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/supplier",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Search"}),r.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(Tt,{label:"Nama"},r.a.createElement("input",{placeholder:"Nama Pemasok",required:!0,className:"form-control",onChange:this.updateField,value:null!==(t=this.state.supplierName)&&void 0!==t?t:"",name:"supplierName"}),o.length>0?r.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},o.map((function(e){return r.a.createElement("div",{className:"option-item",onClick:function(){a.setSupplier(e)},style:{cursor:"pointer"},key:"p-"+e.code+e.id},e.name)})),r.a.createElement("a",{onClick:this.recordsNotFound},r.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),r.a.createElement(Ma,{loading:this.state.loading,supplier:this.state.supplier,notFound:this.state.recordNotFound})))}}]),a}(ye),Ma=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(je,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Pemasok tidak ditemukan"));if(!e.supplier)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih pemasok"));var a=e.supplier;return r.a.createElement("div",{style:t},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,"Kode: ",a.code),r.a.createElement("address",null,a.address,r.a.createElement("br",null),r.a.createElement("abbr",{title:"Contact"},"Kontak: "),a.contact))},_a=Object(m.f)(Object(ce.b)(me,(function(e){return{}}))(Ra)),Ua=function e(){Object(d.a)(this,e),this.transaction=new Ia,this.selectedProduct=void 0},Ha=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Supply")).state=new Ua,n.setSupplier=function(e){var t=n.state.transaction;t.supplier=e,n.setTransaction(t)},n.setTransaction=function(e){n.setState({transaction:e})},n.setProduct=function(e){n.setState({selectedProduct:e})},n.addToCart=function(e){var t=n.state.transaction;t.addProductToFlow(e),n.setState({transaction:t,selectedProduct:void 0})},n.submit=function(e){e.preventDefault(),n.state.transaction.supplier&&0!=n.state.transaction.productFlowCount()&&n.showConfirmation("Lanjutkan Transaksi?").then((function(e){e&&n.props.history.push({pathname:"/transaction/productin/confirm",state:{transaction:n.state.transaction}})}))},n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state.selectedProduct,n=this.state.transaction;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Transaksi :: Pemasokan "),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null),r.a.createElement("p",null),r.a.createElement(Tt,{label:"Lokasi"},r.a.createElement("span",{className:"form-control"},this.getMasterHealthCenter().name," "))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(xa,{setProduct:this.setProduct})),r.a.createElement("div",{className:"col-6"},r.a.createElement(_a,{setSupplier:this.setSupplier}))),r.a.createElement(da,{title:"Rincian Produk"},a?r.a.createElement(Ba,{addToCart:this.addToCart,product:a}):r.a.createElement("i",null,"Tidak ada data")),r.a.createElement("p",null),r.a.createElement(da,{title:"Daftar Produk"},r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("table",{className:"table table-striped"},Ta("No","Nama","Qty","Unit","Harga @Unit","Generik","Kadaluarsa","Opsi"),r.a.createElement("tbody",null,n.productFlows.map((function(e,a){return r.a.createElement(Ya,{updateProductFlow:t.updateProductFlow,productFlow:e,key:"PF_ITEM_"+a,index:a,remove:t.removeProductFlow})})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7},r.a.createElement(ze,{show:n.productFlowCount()>0,onClick:this.removeAll,className:"btn btn-danger",iconClassName:"fas fa-times"},"Remove All"))))),n.supplier&&n.productFlowCount()>0?this.buttonSubmitTransaction(n):null)),r.a.createElement("p",null))}}]),a}(La),Ya=function(e){var t,a,n=e.productFlow.product;return r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,n.name),r.a.createElement("td",null,r.a.createElement("input",{required:!0,min:1,type:"number",className:"form-control",name:"count","data-index":e.index,onChange:e.updateProductFlow,value:e.productFlow.count})),r.a.createElement("td",null,null===(t=n.unit)||void 0===t?void 0:t.name),r.a.createElement("td",null,r.a.createElement("input",{required:!0,type:"number",step:.001,className:"form-control",name:"price","data-index":e.index,onChange:e.updateProductFlow,value:e.productFlow.price})),r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",className:"form-control",name:"generic","data-index":e.index,onChange:e.updateProductFlow,checked:1==e.productFlow.generic})),r.a.createElement("td",null,r.a.createElement("input",{required:!0,type:"date",className:"form-control",name:"expiredDate","data-index":e.index,onChange:e.updateProductFlow,value:wt(null!==(a=e.productFlow.expiredDate)&&void 0!==a?a:new Date)})),r.a.createElement("td",null,r.a.createElement(ze,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){e.remove(e.index)}})))},Ba=function(e){var t;return r.a.createElement("div",null,r.a.createElement(Tt,{label:"Nama"},e.product.name),r.a.createElement(Tt,{label:"Unit"},null===(t=e.product.unit)||void 0===t?void 0:t.name),r.a.createElement(Tt,{label:"Alat Kesehatan"},1==e.product.utilityTool?"Yes":"No"),r.a.createElement(Tt,{label:"Deskripsi"},e.product.description),r.a.createElement(ze,{className:"btn btn-dark",iconClassName:"fas fa-plus",onClick:function(t){return e.addToCart(e.product)}},"Add To Cart"))},Wa=Object(m.f)(Object(ce.b)(me)(Ha)),qa=function(e){var t;return r.a.createElement("form",null,r.a.createElement(Ge,{toggleable:!0,title:"Health Center Destination"},r.a.createElement(Tt,{label:"Health Center List"},r.a.createElement("select",{value:null===(t=e.value)||void 0===t?void 0:t.id,className:"form-control",onChange:e.setHealthCenter},e.healthCenters.map((function(e,t){return r.a.createElement("option",{value:e.id,key:"hc-frm-"+t},e.name)}))))))},Ka=function(e){var t,a,n=e.transaction.destination,o=e.transaction.healthCenterDestination,i=e.transaction.customer;return r.a.createElement(Tt,null,"HEALTH_CENTER"==n?null!==(t=null===o||void 0===o?void 0:o.name)&&void 0!==t?t:r.a.createElement("i",{className:"text-danger"},"Tidak ada puskesmas tujuan"):null,"CUSTOMER"==n?null!==(a=null===i||void 0===i?void 0:i.name)&&void 0!==a?a:r.a.createElement("span",{className:"text-danger"},r.a.createElement("i",{className:"fas fa-exclamation-circle"})," Tidak ada pelanggan"):null)},Va=function(e){var t,a,n,o,i,l,s,c=e.productFlow.product,u=e.productFlow;return r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,null===(t=u.referenceProductFlow)||void 0===t?void 0:t.id),r.a.createElement("td",null,c.name),r.a.createElement("td",null,null===(a=u.referenceProductFlow)||void 0===a?void 0:a.stock," "),r.a.createElement("td",null,r.a.createElement("input",{required:!0,min:1,max:null===(n=u.referenceProductFlow)||void 0===n?void 0:n.stock,type:"number",className:"form-control",name:"count","data-index":e.index,onChange:e.updateProductFlow,value:u.count})),r.a.createElement("td",null,null===(o=c.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,(null===(i=u.referenceProductFlow)||void 0===i?void 0:i.generic)?"Yes":"No"," "),r.a.createElement("td",null,new Date(null!==(l=null===(s=u.referenceProductFlow)||void 0===s?void 0:s.expiredDate)&&void 0!==l?l:new Date).toLocaleDateString("ID")),r.a.createElement("td",null,r.a.createElement(ze,{iconClassName:"fas fa-times",className:"btn btn-danger",onClick:function(t){e.remove(e.index)}})))},za=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e;return 0==this.props.show?null:r.a.createElement("div",{style:this.props.style,className:"alert alert-warning"},null!==(e=this.props.children)&&void 0!==e?e:"Error Occured")}}]),a}(n.Component),Xa=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).masterDataService=void 0,n.state={recordNotFound:!1,loading:!1,customerName:""},n.updateField=function(e){var t=e.target,a=t.getAttribute("name");null!=a&&n.setState(Object(O.a)({},a,t.value),n.loadRecords)},n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.searchRecord=function(e){e.preventDefault(),e.preventDefault(),""!=n.state.customerName.trim()&&n.loadRecords()},n.recordsLoaded=function(e){if(!e.entities||!e.entities[0])throw new Error("Pelanggan tidak ditemukan");n.setState({recordList:e.entities,recordNotFound:!1})},n.setCustomer=function(e){n.setState({customer:e,customerName:e.name,recordList:void 0}),n.props.setCustomer&&n.props.setCustomer(e)},n.recordsNotFound=function(e){n.setState({recordNotFound:!0})},n.loadRecords=function(){n.state.loading||n.commonAjax(n.masterDataService.getRecordsByKeyLike,n.recordsLoaded,n.recordsNotFound,"customer","name",n.state.customerName)},n.reset=function(e){n.setState({customerName:""})},n.masterDataService=n.getServices().masterDataService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this,a=null!==(e=this.state.recordList)&&void 0!==e?e:[];return r.a.createElement("form",{onSubmit:this.searchRecord},r.a.createElement(Ge,{toggleable:!0,title:"Pilih Pelanggan",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(mt,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/customer",className:"btn btn-outline-secondary"}),r.a.createElement("input",{type:"submit",className:"btn btn-secondary",value:"Cari"}),r.a.createElement("input",{type:"reset",onClick:this.reset,className:"btn btn-outline-secondary"}))},r.a.createElement("div",{className:"form-group"},r.a.createElement(Tt,{label:"Nama"},r.a.createElement("input",{placeholder:"Nama",value:this.state.customerName,onChange:this.updateField,required:!0,className:"form-control",name:"customerName"}),a.length>0?r.a.createElement("div",{style:{position:"absolute",zIndex:200},className:"container-fluid bg-light rounded-sm border border-dark"},a.map((function(e){return r.a.createElement("div",{className:"option-item",onClick:function(){t.setCustomer(e)},style:{cursor:"pointer"},key:"CUST-"+e.id},e.name)})),r.a.createElement("a",{onClick:this.recordsNotFound},r.a.createElement("i",{className:"fas fa-times"}),"\xa0close")):null)),r.a.createElement(Ga,{loading:this.state.loading,customer:this.state.customer,notFound:this.state.recordNotFound})))}}]),a}(ye),Ga=function(e){var t={height:"120px"};if(e.loading)return r.a.createElement("div",{style:t},r.a.createElement(je,null));if(1==e.notFound)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-warning"},"Pelanggan tidak ditemukan"));if(!e.customer)return r.a.createElement("div",{style:t},r.a.createElement("div",{className:"alert alert-secondary"},"Silakan pilih pelanggan"));var a=e.customer;return r.a.createElement("div",{style:t},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,a.age," tahun"),r.a.createElement("address",null,a.address,r.a.createElement("br",null)))},Qa=Object(m.f)(Object(ce.b)(me)(Xa)),Ja=function e(){Object(d.a)(this,e),this.selectedProduct=void 0,this.transaction=new Ia,this.availableProducts=void 0,this.healthCenters=[],this.loadingProducts=!1},Za=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Distribusi")).state=new Ja,n.updateDestination=function(e){var t=e.target.value,a=n.state.transaction;"CUSTOMER"==t?a.healthCenterDestination=void 0:"HEALTH_CENTER"==t&&(a.customer=void 0,a.healthCenterLocation=n.getMasterHealthCenter(),a.healthCenterDestination=n.state.healthCenters[0]),a.destination=t,n.setState({selectedProduct:void 0,availableProducts:[],transaction:a})},n.healthCentersLoaded=function(e){if(e.entities&&0!=e.entities.length){var t=n.state.transaction;t.healthCenterLocation||(t.healthCenterLocation=n.getMasterHealthCenter()),n.masterDataService.setHealthCenters(e.entities),n.setState({healthCenters:e.entities,transaction:t})}else n.setState({healthCenters:[{id:-1,name:"NO DATA, Please Check Master Data"}]})},n.loadHealthCenters=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.state.transaction;t.healthCenterLocation=void 0,!e&&n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.setState({healthCenters:[],transaction:t,availableProduct:[]},(function(){n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)}))},n.setProduct=function(e){n.setState({selectedProduct:e},n.loadAvailableProducts)},n.availableProductsLoaded=function(e){n.setState({availableProducts:e.entities,loadingProducts:!1})},n.availableProductsNotLoaded=function(e){console.error(e),n.setState({loadingProducts:!1})},n.loadAvailableProducts=function(){n.state.selectedProduct&&n.state.transaction.healthCenterLocation?n.state.loadingProducts||(n.commonAjax(n.inventoryService.getAvailableProducts,n.availableProductsLoaded,n.availableProductsNotLoaded,n.state.selectedProduct.code,n.state.transaction.healthCenterLocation),n.setState({loadingProducts:!0})):console.warn("(!this.state.selectedProduct || !this.state.selectedHealthCenter)")},n.didMountCallback=function(){n.loadHealthCenters()},n.addToCart=function(e){var t=ja.fromReference(e),a=n.state.transaction;a.addProductFlow(t),n.setTransaction(a)},n.updateSelectedHealthCenter=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));"HEALTH_CENTER"!=n.state.transaction.destination&&n.showConfirmation("Ubah Lokasi").then((function(e){if(e){var t=new Ia;t.healthCenterLocation=a[0],a.length>0&&n.setState({selectedProduct:void 0,availableProducts:[],transaction:t})}}))},n.setCustomer=function(e){var t=n.state.transaction;t.customer=e,n.setTransaction(t)},n.submit=function(e){e.preventDefault(),n.state.transaction.healthCenterLocation&&(n.state.transaction.customer||n.state.transaction.healthCenterDestination)?n.showConfirmation("Lanjutkan Transaksi?").then((function(e){e&&n.props.history.push({pathname:"/transaction/productout/confirm",state:{transaction:n.state.transaction}})})):n.showError("Silakan lengkapi kolom")},n.setHealthCenterDestination=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return e.id==parseInt(null!==(a=t.value)&&void 0!==a?a:"0")}));if(0!=a.length){var r=n.state.transaction;r.healthCenterDestination=a[0],n.setTransaction(r)}},n.state.transaction.healthCenterLocation=n.getMasterHealthCenter(),n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,n,o,i,l=this,s=null!==(e=this.state.availableProducts)&&void 0!==e?e:[],c=this.state.transaction,u=this.state.healthCenters;return c.healthCenterLocation&&0!=u.length?r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Transaksi :: Distribusi ",null===(t=c.healthCenterLocation)||void 0===t?void 0:t.name),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()},className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(a=this.getLoggedUser())||void 0===a?void 0:a.displayName),r.a.createElement("hr",null),r.a.createElement("p",null),r.a.createElement(Tt,{label:"Lokasi"},r.a.createElement("select",{autoComplete:"off",value:null===(n=c.healthCenterLocation)||void 0===n?void 0:n.id,onChange:this.updateSelectedHealthCenter,className:"form-control"},u.map((function(e,t){return r.a.createElement("option",{key:"opt-location-"+t,value:e.id},e.name)})))),r.a.createElement(Tt,{label:"Tujian"},r.a.createElement("select",{autoComplete:"off",value:c.destination,onChange:this.updateDestination,className:"form-control"},r.a.createElement("option",{value:"CUSTOMER"},"Pelanggan"),(null===(o=c.healthCenterLocation)||void 0===o?void 0:o.id)==this.getMasterHealthCenter().id?r.a.createElement("option",{value:"HEALTH_CENTER"},"Puskesmas"):null)),r.a.createElement(Ka,{transaction:c}),r.a.createElement(ze,{iconClassName:"fas fa-sync-alt",className:"btn btn-secondary btn-sm",onClick:function(e){return l.loadHealthCenters(!0)}},"Reload Location")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(xa,{setProduct:this.setProduct})),r.a.createElement("div",{className:"col-6"},"CUSTOMER"==c.destination?r.a.createElement(Qa,{setCustomer:this.setCustomer}):r.a.createElement(qa,{value:c.healthCenterDestination,setHealthCenter:this.setHealthCenterDestination,healthCenters:this.state.healthCenters}))),r.a.createElement(Ge,{toggleable:!0,title:"Produk tersedia di "+(null===(i=c.healthCenterLocation)||void 0===i?void 0:i.name)},r.a.createElement("table",{className:"table table-striped"},Ta("No","Id Stok","Nama","Jumlah Masuk","Digunakan","Stok","Unit","Generik","Kadaluarsa","Opsi"),r.a.createElement("tbody",null,this.state.loadingProducts?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:9},r.a.createElement(je,null))):0==s.length?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:9},r.a.createElement(za,{children:"Tidak ada data"}))):s.map((function(e,t){var a,n,o,i=null!==(a=e.product)&&void 0!==a?a:new Pa,s=c.hasProductFlowReferenceid(null!==(n=e.id)&&void 0!==n?n:0);return r.a.createElement("tr",{key:"pf-tr-"+t},r.a.createElement("td",null,t+1)," ",r.a.createElement("td",null,e.id),r.a.createElement("td",null,i.name," (",i.code,")"),r.a.createElement("td",null,e.count," "),r.a.createElement("td",null,e.usedCount," "),r.a.createElement("td",null,Ue(e.stock)),r.a.createElement("td",null,null===(o=i.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,e.generic?"Yes":"No"),r.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toLocaleDateString("ID"):"-"),r.a.createElement("td",null,s?r.a.createElement("i",{className:"fas fa-check text-success"}):null,r.a.createElement(ze,{show:0==s,onClick:function(t){return l.addToCart(e)},iconClassName:"fas fa-plus",className:"btn btn-dark btn-sm"})))}))))),r.a.createElement("p",null),r.a.createElement(da,{title:"Daftar Produk"},r.a.createElement("form",{onSubmit:this.submit},r.a.createElement("table",{className:"table table-striped"},Ta("No","Id Stok","Nama","Stok","Qty","Unit","Generk","Kadaluarsa","Opsi"),r.a.createElement("tbody",null,c.productFlows.map((function(e,t){return r.a.createElement(Va,{updateProductFlow:l.updateProductFlow,productFlow:e,key:"PF_ITEM_"+t,index:t,remove:l.removeProductFlow})})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:8},r.a.createElement(ze,{show:c.productFlowCount()>0,onClick:this.removeAll,className:"btn btn-danger",iconClassName:"fas fa-times"},"Remove All"))))),(c.customer||c.healthCenterDestination)&&c.productFlowCount()>0?this.buttonSubmitTransaction(c):null)),r.a.createElement("p",null)):r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Transaksi :: Distribusi"),r.a.createElement(je,null))}}]),a}(La),$a=Object(m.f)(Object(ce.b)(me)(Za)),en=function e(){Object(d.a)(this,e),this.transaction=void 0},tn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Konfirmasi Transaksi",!0)).transactionService=void 0,n.state=new en,n.validateTransactionFromProps=function(){if(n.props.location.state){var e=n.props.location.state.transaction;e&&n.setState({transaction:Object.assign(new Ia,e)})}else n.props.history.push("/transaction/productin")},n.back=function(e){var t;n.props.history.push({pathname:"/transaction/productin",state:{transaction:(null===(t=n.state.transaction)||void 0===t?void 0:t.code)?new Ia:n.state.transaction}})},n.onSuccess=function(e){n.showInfo("Transaksi Berhasil"),n.props.history.push({pathname:"/transaction/detail",state:{transaction:e.transaction}})},n.confirm=function(e){n.commonAjaxWithProgress(n.transactionService.submitTransactionIN,n.onSuccess,n.showCommonErrorAlert,n.state.transaction)},n.transactionService=n.getServices().transactionService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.validateTransactionFromProps(),e.scrollTop()}))}},{key:"render",value:function(){var e,t=this.state.transaction;return t?r.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Konfirmasi Transaksi"),r.a.createElement("div",{className:"alert alert-info"},"Pastikan bahwa data transaksi telah sesuai"),r.a.createElement(da,{title:"Information"},t.code?r.a.createElement(Tt,{label:"Kode"},t.code):null,r.a.createElement(Tt,{label:"Tanggal"},new Date(t.transactionDate).toString()),r.a.createElement(Tt,{label:"Pemasok"},null===(e=t.supplier)||void 0===e?void 0:e.name),r.a.createElement(Tt,{label:"Catatan"}," ",t.description,"  "),r.a.createElement(ze,{style:{marginRight:"5px"},onClick:this.back,iconClassName:"fas fa-angle-left",children:"Kembali"}),r.a.createElement(ze,{show:void 0==t.code,onClick:this.confirm,iconClassName:"fas fa-check",className:"btn btn-primary",children:"Konfirmasi"})),r.a.createElement("p",null),r.a.createElement(da,{title:"Product List"},r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No"),r.a.createElement("th",null,"Nama"),r.a.createElement("th",null,"Qty"),r.a.createElement("th",null,"Unit"),r.a.createElement("th",null,"Generik"),r.a.createElement("th",null,"Harga @Unit"),r.a.createElement("th",null,"Kadaluarsa"))),r.a.createElement("tbody",null,t.productFlows.map((function(e,t){return r.a.createElement(an,{productFlow:e,index:t,key:"pf-tr-cnfm-"+t})}))))),r.a.createElement("p",null)):null}}]),a}(xe),an=function(e){var t,a=e.index,n=e.productFlow;return r.a.createElement("tr",null,r.a.createElement("td",null,a+1),r.a.createElement("td",null,n.product.name),r.a.createElement("td",null,Ue(n.count)),r.a.createElement("td",null,null===(t=n.product.unit)||void 0===t?void 0:t.name),r.a.createElement("td",null,n.generic?"Yes":"No"),r.a.createElement("td",null,Ue(n.price)),r.a.createElement("td",null,n.expiredDate?new Date(n.expiredDate).toLocaleDateString("ID"):"-"))},nn=Object(m.f)(Object(ce.b)(me)(tn)),rn=function e(){Object(d.a)(this,e),this.loading=!1},on=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).state=new rn,n.reportService=void 0,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.receiptCreated=function(e){n.showConfirmation("Save "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.printReceipt=function(){n.commonAjaxWithProgress(n.reportService.printTransactionReceipt,n.receiptCreated,n.showCommonErrorAlert,n.props.transactionCode)},n.reportService=n.getServices().reportService,n}return Object(l.a)(a,[{key:"render",value:function(){return this.state.loading?r.a.createElement(mt,{className:"btn btn-dark"},r.a.createElement("span",{className:"spinner-border spinner-border-sm"}),"Loading..."):r.a.createElement(mt,{onClick:this.printReceipt,show:void 0!=this.props.transactionCode,iconClassName:"fas fa-file",className:"btn btn-dark"},"Cetak Struk")}}]),a}(ye),ln=Object(m.f)(Object(ce.b)(me)(on)),sn=function e(){Object(d.a)(this,e),this.transaction=void 0,this.transactionCode=void 0,this.dataNotFound=!1,this.loading=!1},cn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Transaction Detail",!0)).transactionService=void 0,n.reportService=void 0,n.state=new sn,n.startLoading=function(){return n.setState({loading:!0})},n.endLoading=function(){return n.setState({loading:!1})},n.recordLoaded=function(e){if(!e.transaction)throw new Error("Not found");n.setState({transaction:e.transaction,dataNotFound:!1})},n.recordNotLoaded=function(e){console.error(e),n.setState({dataNotFound:!0,transaction:void 0})},n.onSubmit=function(e){e.preventDefault(),n.loadData()},n.loadData=function(){console.debug(" this.state.transactionCode: ",n.state.transactionCode),n.commonAjax(n.transactionService.getTransactionByCode,n.recordLoaded,n.recordNotLoaded,n.state.transactionCode)},n.recordDeleted=function(e){n.showInfo("Record has been successfully deleted"),n.loadData()},n.recordNotDeleted=function(e){var t;console.error(e),n.showError("Cannot delete transaction "+(null===(t=n.state.transaction)||void 0===t?void 0:t.code)+", please delete all related stock/ product flow data")},n.deleteRecord=function(e){var t;n.state.transaction&&n.showConfirmationDanger("Delete Record with code: "+(null===(t=n.state.transaction)||void 0===t?void 0:t.code)+"?").then((function(e){var t;e&&n.commonAjax(n.transactionService.deleteTransactionByCode,n.recordDeleted,n.recordNotDeleted,null===(t=n.state.transaction)||void 0===t?void 0:t.code)}))},n.validateTransactionFromProps=function(){if(n.props.match.params&&n.props.match.params.code){var e=n.props.match.params.code;n.commonAjax(n.transactionService.getTransactionByCode,n.recordLoaded,n.recordNotLoaded,e)}else if(n.props.location.state){var t=n.props.location.state.transaction;t&&n.setState({transaction:Object.assign(new Ia,t)})}},n.transactionService=n.getServices().transactionService,n.reportService=n.getServices().reportService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.validateTransactionFromProps(),document.title="Transaction Detail",e.scrollTop()}))}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"render",value:function(){var e,t;return r.a.createElement("div",{id:"TransactionDetail",className:"container-fluid section-body"},r.a.createElement("h2",null,"Rincian Transaksi"),r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col-md-6",onSubmit:this.onSubmit},r.a.createElement(Ge,{title:"Cari dengan kode",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(mt,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/transaction",className:"btn btn-secondary"},"Daftar Record Transaksi"),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Cari"}))},r.a.createElement(Tt,{label:"Kode"},r.a.createElement("input",{required:!0,onChange:this.handleInputChange,value:null!==(e=this.state.transactionCode)&&void 0!==e?e:"",name:"transactionCode",type:"text",placeholder:"Kode Transaksi",className:"form-control"})))),r.a.createElement("div",{className:"col-md-6"}),r.a.createElement("div",{className:"col-md-12"},this.state.loading?r.a.createElement(je,null):r.a.createElement(n.Fragment,null,r.a.createElement(Gt,{show:1==this.state.dataNotFound},"Transaksi tidak ditemukan"),r.a.createElement(un,{show:void 0!=this.state.transaction,transaction:this.state.transaction}),r.a.createElement("div",{className:"btn-group"},r.a.createElement(mt,{show:void 0!=this.state.transaction,onClick:this.deleteRecord,iconClassName:"fas fa-times",className:"btn btn-danger"},"Hapus Transaksi"),r.a.createElement(ln,{transactionCode:null===(t=this.state.transaction)||void 0===t?void 0:t.code}))))))}}]),a}(xe),un=function(e){var t,a,o,i,l;if(0==e.show)return null;var s=e.transaction,c=s.productFlows?s.productFlows:[],u="TRANS_OUT"==s.type,d=new Date(null!==(t=s.transactionDate)&&void 0!==t?t:new Date).toLocaleString("ID");return r.a.createElement(Ge,{title:"Transaction Data"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Tt,{label:"Id Record",orientation:"horizontal",children:s.id}),r.a.createElement(Tt,{label:"Kode",orientation:"horizontal",children:s.code}),r.a.createElement(Tt,{label:"Tipe",orientation:"horizontal",children:s.type}),r.a.createElement(Tt,{label:"Tanggal",orientation:"horizontal",children:d})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(n.Fragment,null,r.a.createElement(Tt,{show:"TRANS_OUT"==s.type,label:"Pelanggan",orientation:"horizontal",children:null===(a=s.customer)||void 0===a?void 0:a.name}),r.a.createElement(Tt,{show:"TRANS_OUT_TO_WAREHOUSE"==s.type,label:"Puskesmas",orientation:"horizontal",children:null===(o=s.healthCenterDestination)||void 0===o?void 0:o.name}),r.a.createElement(Tt,{show:"TRANS_IN"==s.type,label:"Pemasok",orientation:"horizontal",children:null===(i=s.supplier)||void 0===i?void 0:i.name})),r.a.createElement(Tt,{label:"User",orientation:"horizontal",children:null===(l=s.user)||void 0===l?void 0:l.displayName})),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h5",null,"Note:"),s.description)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",null,"Products"),r.a.createElement("table",{className:"table table-striped"},Ta("No","Id Record","Nama","Qty","Unit","Generic","Kadaluarsa","Harga @Unit","Total Harga",u?"Id Stok":"Used Qty"),r.a.createElement("tbody",null,c.map((function(e,t){var a,n,o,i=null!==(a=e.product)&&void 0!==a?a:new Pa,l=e.price;return r.a.createElement("tr",{key:"pf-tr-"+t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.id),r.a.createElement("td",null,i.name," (",i.code,")"),r.a.createElement("td",null,Ue(e.count)),r.a.createElement("td",null,null===(n=i.unit)||void 0===n?void 0:n.name),r.a.createElement("td",null,e.generic?"Yes":"No"),r.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toLocaleDateString("ID"):"-"),r.a.createElement("td",null,Ue(l)),r.a.createElement("td",null,Ue((null!==l&&void 0!==l?l:0)*(null!==(o=e.count)&&void 0!==o?o:0))),r.a.createElement("td",null,u?e.referenceProductFlow?e.referenceProductFlow.id:"-":Ue(e.usedCount)))})))))))},dn=Object(m.f)(Object(ce.b)(me,(function(e){return{}}))(cn)),mn=function e(){Object(d.a)(this,e),this.transaction=void 0,this.transactionCode=void 0,this.dataNotFound=!1,this.loading=!1},pn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Transaction Related Record",!0)).transactionService=void 0,n.reportService=void 0,n.state=new mn,n.recordLoaded=function(e){if(!e.transaction)throw new Error("Not found");n.setState({transaction:e.transaction,dataNotFound:!1})},n.recordNotLoaded=function(e){console.error(e),n.setState({dataNotFound:!0,transaction:void 0})},n.onSubmit=function(e){e.preventDefault(),n.loadData()},n.loadData=function(){n.commonAjaxWithProgress(n.transactionService.getTransactionRelatedRecord,n.recordLoaded,n.recordNotLoaded,n.state.transactionCode)},n.validateTransactionFromProps=function(){if(n.props.match.params&&n.props.match.params.code){var e=n.props.match.params.code;n.commonAjaxWithProgress(n.transactionService.getTransactionRelatedRecord,n.recordLoaded,n.recordNotLoaded,e)}else if(n.props.location.state){var t=n.props.location.state.transaction;t&&n.setState({transaction:Object.assign(new Ia,t)})}},n.transactionService=n.getServices().transactionService,n.reportService=n.getServices().reportService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.validateTransactionFromProps(),e.scrollTop()}))}},{key:"componentDidUpdate",value:function(){this.validateLoginStatus()}},{key:"render",value:function(){var e;return r.a.createElement("div",{id:"TransactionRelatedRecord",className:"container-fluid section-body"},r.a.createElement("h2",null,"Rincian Pemetaan Stok Transaksi"),r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col-md-6",onSubmit:this.onSubmit},r.a.createElement(Ge,{title:"Cari dengan kode",footerContent:r.a.createElement(n.Fragment,null,r.a.createElement(mt,{iconClassName:"fas fa-list",attributes:{target:"_blank"},to:"/management/transaction",className:"btn btn-secondary"},"Daftar Record Transaksi"),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Cari"}))},r.a.createElement(Tt,{label:"Kode"},r.a.createElement("input",{value:null!==(e=this.state.transactionCode)&&void 0!==e?e:"",required:!0,onChange:this.handleInputChange,type:"text",name:"transactionCode",placeholder:"Kode Transaksi",className:"form-control"})))),r.a.createElement("div",{className:"col-md-6"}),r.a.createElement("div",{className:"col-md-12"},this.state.loading?r.a.createElement(je,null):r.a.createElement(n.Fragment,null,r.a.createElement(Gt,{show:1==this.state.dataNotFound},"Transaksi tidak ditemukan"),r.a.createElement(fn,{show:void 0!=this.state.transaction,transaction:this.state.transaction})))))}}]),a}(xe),fn=function(e){var t,a,o,i,l;if(0==e.show)return null;var s=e.transaction,c=s.productFlows?s.productFlows:[],u=new Date(null!==(t=s.transactionDate)&&void 0!==t?t:new Date).toLocaleString("ID");return r.a.createElement(Ge,{title:"Transaction Data"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Tt,{label:"Id Record",orientation:"horizontal",children:s.id}),r.a.createElement(Tt,{label:"Kode",orientation:"horizontal",children:s.code}),r.a.createElement(Tt,{label:"Tipe",orientation:"horizontal",children:s.type}),r.a.createElement(Tt,{label:"Tanggal",orientation:"horizontal",children:u})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(n.Fragment,null,r.a.createElement(Tt,{show:"TRANS_OUT"==s.type,label:"Pelanggan",orientation:"horizontal",children:null===(a=s.customer)||void 0===a?void 0:a.name}),r.a.createElement(Tt,{show:"TRANS_OUT_TO_WAREHOUSE"==s.type,label:"Puskesmas",orientation:"horizontal",children:null===(o=s.healthCenterDestination)||void 0===o?void 0:o.name}),r.a.createElement(Tt,{show:"TRANS_IN"==s.type,label:"Pemasok",orientation:"horizontal",children:null===(i=s.supplier)||void 0===i?void 0:i.name})),r.a.createElement(Tt,{label:"User",orientation:"horizontal",children:null===(l=s.user)||void 0===l?void 0:l.displayName})),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h5",null,"Note:"),s.description)),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h3",null,"Products"),r.a.createElement("table",{className:"table xtable-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"No")," ",r.a.createElement("th",{colSpan:4},"Name")," ",r.a.createElement("th",null,"Qty")," ",r.a.createElement("th",null,"Trans. Code"),r.a.createElement("th",null,"Date"))),r.a.createElement("tbody",null,c.map((function(e,t){var a,o,i,l,s,c,u=null!==(a=e.referencingItems)&&void 0!==a?a:[];return r.a.createElement(n.Fragment,{key:"main-pf-"+t},r.a.createElement("tr",null,r.a.createElement("td",{children:t+1}),r.a.createElement("td",{colSpan:4},"Item Id: ",e.id,r.a.createElement("br",null),null===(o=e.product)||void 0===o?void 0:o.name," | ",null===(i=e.product)||void 0===i||null===(l=i.unit)||void 0===l?void 0:l.name),r.a.createElement("td",null,e.count),r.a.createElement("td",null,null===(s=e.transaction)||void 0===s?void 0:s.code,r.a.createElement("br",null),"(",null===(c=e.transaction)||void 0===c?void 0:c.type,")"),r.a.createElement("td",null,hn(e.transaction))),u?r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{style:{fontSize:"0.7em"},colSpan:7},"Usage List")):null,u.map((function(e,a){var o,i,l,s=null!==(o=e.referencingItems)&&void 0!==o?o:[];return r.a.createElement(n.Fragment,{key:"ref-pf-"+a+"-"+t},r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{children:a+1}),r.a.createElement("td",{colSpan:3},"Item Id: ",e.id),r.a.createElement("td",null,e.count),r.a.createElement("td",null,null===(i=e.transaction)||void 0===i?void 0:i.code,r.a.createElement("br",null),"(",null===(l=e.transaction)||void 0===l?void 0:l.type,")"),r.a.createElement("td",null,hn(e.transaction))),s.length>0?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2}),r.a.createElement("td",{style:{fontSize:"0.7em"},colSpan:6},"Usage List")):null,s.map((function(e,o){var i,l;return r.a.createElement(n.Fragment,{key:"ref-pf2-"+a+"-"+t+"-"+o},r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2}),r.a.createElement("td",{children:o+1}),r.a.createElement("td",{colSpan:2},"Item Id: ",e.id),r.a.createElement("td",null,e.count),r.a.createElement("td",null,null===(i=e.transaction)||void 0===i?void 0:i.code,r.a.createElement("br",null),"(",null===(l=e.transaction)||void 0===l?void 0:l.type,")"),r.a.createElement("td",null,hn(e.transaction))))})))})))})))))))},hn=function(e){if(!e||!e.transactionDate)return null;var t=new Date(e.transactionDate);return t.toLocaleDateString("ID")+" "+t.toLocaleTimeString()},vn=Object(m.f)(Object(ce.b)(me)(pn)),gn=function e(){Object(d.a)(this,e),this.transaction=void 0},En=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Konfirmasi Transaksi",!0)).transactionService=void 0,n.state=new gn,n.validateTransactionFromProps=function(){if(n.props.location.state){var e=n.props.location.state.transaction;e&&n.setState({transaction:Object.assign(new Ia,e)})}else n.props.history.push("/transaction/productin")},n.back=function(e){var t;n.props.history.push({pathname:"/transaction/productout",state:{transaction:(null===(t=n.state.transaction)||void 0===t?void 0:t.code)?new Ia:n.state.transaction}})},n.onSuccess=function(e){n.showInfo("Transaction Success"),n.props.history.push({pathname:"/transaction/detail",state:{transaction:e.transaction}})},n.confirm=function(e){n.commonAjaxWithProgress(n.transactionService.submitTransactionOUT,n.onSuccess,n.showCommonErrorAlert,n.state.transaction)},n.transactionService=n.getServices().transactionService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.validateTransactionFromProps(),e.scrollTop()}))}},{key:"render",value:function(){var e,t,a,o,i,l=this.state.transaction;return l?r.a.createElement("div",{id:"TransactionMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Konfirmasi Transaksi"),r.a.createElement("div",{className:"alert alert-info"},"Pastikan bahwa data transaksi telah sesuai"),r.a.createElement(da,{title:"Information"},l.code?r.a.createElement(Tt,{label:"Kode"},l.code):null,r.a.createElement(Tt,{label:"Tanggal"},new Date(l.transactionDate).toLocaleString()),r.a.createElement(Tt,{label:"Lokasi"},null===(e=l.healthCenterLocation)||void 0===e?void 0:e.name),r.a.createElement(Tt,{label:"Pelanggan"},null!==(t=null===(a=l.customer)||void 0===a?void 0:a.name)&&void 0!==t?t:"-"),r.a.createElement(Tt,{label:"Puskesmas"},null!==(o=null===(i=l.healthCenterDestination)||void 0===i?void 0:i.name)&&void 0!==o?o:"-"),r.a.createElement(Tt,{label:"Catatan"}," ",l.description,"  "),r.a.createElement(n.Fragment,null,r.a.createElement(ze,{style:{marginRight:"5px"},onClick:this.back,iconClassName:"fas fa-angle-left",children:"Back"}),r.a.createElement(ze,{show:void 0==l.code,onClick:this.confirm,iconClassName:"fas fa-check",className:"btn btn-primary",children:"Konfirmasi"}))),r.a.createElement("p",null),r.a.createElement(da,{title:"Product List"},r.a.createElement("table",{className:"table table-striped"},Ta("No","Id Stok","Nama","Stok","Qty","Unit","Generik","Kadaluarsa"),r.a.createElement("tbody",null,l.productFlows.map((function(e,t){return r.a.createElement(bn,{productFlow:e,index:t,key:"pf-tr-cnfm-"+t})}))))),r.a.createElement("p",null)):null}}]),a}(xe),bn=function(e){e.index;var t,a,n,o,i=e.productFlow,l=e.productFlow.product;return r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,null===(t=i.referenceProductFlow)||void 0===t?void 0:t.id),r.a.createElement("td",null,l.name),r.a.createElement("td",null,null===(a=e.productFlow.referenceProductFlow)||void 0===a?void 0:a.stock," "),r.a.createElement("td",null,Ue(i.count)),r.a.createElement("td",null,null===(n=l.unit)||void 0===n?void 0:n.name),r.a.createElement("td",null,(null===(o=i.referenceProductFlow)||void 0===o?void 0:o.generic)?"Yes":"No"),r.a.createElement("td",null,new Date(e.productFlow.expiredDate).toLocaleDateString("ID")))},yn=Object(m.f)(Object(ce.b)(me)(En)),Nn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e,"Inventory",!0)}return Object(l.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",{id:"InventoryMain",className:"container-fluid section-body"},r.a.createElement("h2",null,"Persediaan"),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null)))}}]),a}(xe),Cn=Object(m.f)(Object(ce.b)(me)(Nn)),Sn=a(76),Dn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(d.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=Object.assign(new Pa,this.props.product),a=0;return r.a.createElement("div",{className:"row alert alert-light"},r.a.createElement(kn,{number:e.number,product:t}),r.a.createElement("div",{className:"col-9"},r.a.createElement(Ge,{title:t.name+"("+t.code+")",toggleable:!0},r.a.createElement("div",{style:{width:"100%",overflow:"scroll"}},0==e.productFlows.length?r.a.createElement(za,null,"No Data"):r.a.createElement("table",{className:"table table-striped"},Ta("No","Id","Qty","Digunakan","Stok","Unit","Kadaluarsa","Lokasi"),r.a.createElement("tbody",null,e.productFlows.map((function(t,n){var o;return a+=t.stock,r.a.createElement("tr",{key:"PF_DETAIL_STOCK"+t.id+"-"+n},r.a.createElement("td",null,n+1),r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.count),r.a.createElement("td",null,t.usedCount),r.a.createElement("td",null,t.stock),r.a.createElement("td",null,null===(o=e.product.unit)||void 0===o?void 0:o.name),r.a.createElement("td",null,new Date(t.expiredDate).toLocaleDateString("ID")),r.a.createElement("td",null,t.stockLocation))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4},"Total Stok"),r.a.createElement("td",null,a))))))))}}]),a}(n.Component),kn=function(e){var t=e.product;return r.a.createElement("div",{className:"col-3"},r.a.createElement("div",{className:"card bg-light"},r.a.createElement("img",{className:"card-img-top ",src:t.getDefaultImageUrl()}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text"},e.number," - ",t.name))))},wn=Object(ce.b)(me)(Dn),On=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.productStocks,a=this.props.startingNumber;return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("strong",null,"Nama")),r.a.createElement("div",{className:"col-9"},r.a.createElement("strong",null,"Rincian"))),0==t.length?r.a.createElement(za,{style:{marginTop:"10px"}},"Tidak ada data"):t.map((function(t,o){var i=t.product,l=t.productFlows;return r.a.createElement(n.Fragment,{key:"ps-"+o},r.a.createElement(wn,{number:a+o,location:e.props.location,product:i,productFlows:l}))})))}}]),a}(n.Component),Pn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).expiredWarningDays=10,e.leadTime=void 0,e.cycleTime=void 0,e}return a}(g),jn=function e(){Object(d.a)(this,e),this.productStocks=new Array,this.loading=!1,this.filter=new Qe,this.totalData=0,this.totalItems=0,this.healthCenters=[],this.selectedHealthCenter=new E,this.configuration=new Pn,this.productName=""},In=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Stok Produk",!0)).masterDataService=void 0,n.inventoryService=void 0,n.state=new jn,n.updateFilterExpDate=function(e){var t,a=function(e){return e.target}(e);if("date"==a.type){var r=new Date(a.value),o=function(e,t){console.debug("DIFF DATE ",e," vs ",t);var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-a)/864e5)}(new Date,r);t=o,console.debug("diffDay: ",o)}else t=a.value;var i=n.state.configuration;i.expiredWarningDays=parseInt(t),n.setState({configuration:i})},n.healthCentersLoaded=function(e){var t;e.entities&&(n.masterDataService.setHealthCenters(null!==(t=e.entities)&&void 0!==t?t:[]),n.setState({healthCenters:e.entities,selectedHealthCenter:n.getMasterHealthCenter()},n.loadProducts))},n.productLoaded=function(e){var t,a=null!==(t=e.configuration)&&void 0!==t?t:new Pn;n.state.filter.filterExpDate&&(a.expiredWarningDays=n.state.configuration.expiredWarningDays),n.setState({totalItems:e.totalItems,configuration:a,loading:!1,totalData:e.totalData,productStocks:e.generalList})},n.loadProductsAt=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadProducts)},n.productLoadingError=function(e){n.showCommonErrorAlert(e),n.setState({loading:!1})},n.loadProducts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;n.setState({loading:!0},(function(){if(e>=0){var t=n.state.filter;t.page=e,n.setState({filter:t},n.doLoadProduct)}else n.doLoadProduct()}))},n.doLoadProduct=function(){var e=n.state.filter;e.filterExpDate&&1==e.ignoreEmptyValue&&(e.day=n.state.configuration.expiredWarningDays),e.fieldsFilter={name:n.state.productName},n.commonAjaxWithProgress(n.inventoryService.getProductsInHealthCenter,n.productLoaded,n.productLoadingError,e,n.state.selectedHealthCenter)},n.getLocations=function(){var e=new E;e.id=0,e.name="ALL";var t=[e],a=n.state.healthCenters;return t.push.apply(t,Object(Sn.a)(a)),t},n.updateLocation=function(e){var t=e.target,a=n.state.filter;"0"==t.value.toString()?a.flag=Qe.FLAG_ALL:a.flag=Qe.FLAG_DEFAULT;var r=n.getLocations().filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));n.showConfirmation("Ubah Lokasi? *muat ulang untuk melihat perubahan").then((function(e){e&&r.length>0&&n.setState({filter:a,selectedHealthCenter:r[0]})}))},n.loadHealthCenter=function(){n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)},n.getDisplayedRecordOptions=function(){if(n.state.totalData<=10)return[10];for(var e=n.state.totalData/10,t=[],a=10,r=0;r<e;r++)t.push(a),a+=10;return a<n.state.totalData&&t.push(n.state.totalData),t},n.setIgnoreEmpty=function(e){var t=n.state.filter;t.ignoreEmptyValue=e,n.setState({filter:t})},n.setFilterExpDate=function(e){var t=n.state.filter;t.filterExpDate=e,n.setState({filter:t})},n.updateLimit=function(e){var t=e.target.value;n.showConfirmation("Ubah jumlah tampilan?").then((function(e){if(e){var a=n.state.filter;a.limit=t,a.page=0,n.setState({filter:a},n.loadProducts)}}))},n.state.filter.limit=10,n.masterDataService=n.getServices().masterDataService,n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.loadHealthCenter(),e.scrollTop()}))}},{key:"render",value:function(){var e,t,a,n,o,i=this;if(0==this.getLocations().length)return r.a.createElement("div",{id:"ProductStocks",className:"container-fluid section-body"},r.a.createElement("h2",null,"Stok Produk"),r.a.createElement(je,null));var l=this.state.filter.ignoreEmptyValue,s=this.state.filter.filterExpDate;return r.a.createElement("div",{id:"ProductStocks",className:"container-fluid section-body"},r.a.createElement("h2",null,"Stok Produk"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.loadProducts(0)},className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null),r.a.createElement(An,{updateLocation:this.updateLocation,selectedLocation:this.state.selectedHealthCenter,locations:this.getLocations()}),r.a.createElement(Tt,{label:"Jumlah Tampilan"},r.a.createElement("select",{key:"select-displayed-record",onChange:this.updateLimit,value:this.state.filter.limit,className:"form-control"},this.getDisplayedRecordOptions().map((function(e,t){return r.a.createElement("option",{key:"select-displayed-record-"+t+"-"+e,value:e},e)})))),r.a.createElement(Tt,{label:"Total Stok"},r.a.createElement("strong",null,Ue(this.state.totalItems))),r.a.createElement(Tt,{label:"Filter"},r.a.createElement("input",{className:"form-control",placeholder:"Name",name:"productName",value:this.state.productName,onChange:this.handleInputChange})),r.a.createElement(Tt,{label:"Abaikan Stok Kosong"},r.a.createElement(Jt,{active:1==l,onClick:this.setIgnoreEmpty})),0==l?null:r.a.createElement(Tn,{active:1==s,update:this.updateFilterExpDate,toggle:this.setFilterExpDate,expiredWarningDays:this.state.configuration.expiredWarningDays}),r.a.createElement(Fn,null)),r.a.createElement("p",null),r.a.createElement(da,{title:"Daftar Produk"},r.a.createElement($e,{activePage:null!==(t=this.state.filter.page)&&void 0!==t?t:0,onClick:this.loadProductsAt,limit:null!==(a=this.state.filter.limit)&&void 0!==a?a:10,totalData:this.state.totalData}),this.state.loading?r.a.createElement(je,null):r.a.createElement(On,{location:this.state.selectedHealthCenter,startingNumber:(null!==(n=this.state.filter.page)&&void 0!==n?n:0)*(null!==(o=this.state.filter.limit)&&void 0!==o?o:0)+1,productStocks:this.state.productStocks})))}}]),a}(xe),Tn=function(e){var t=function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a}(new Date,e.expiredWarningDays);return r.a.createElement(Tt,{label:"Kadaluarsa"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement(Jt,{active:1==e.active,onClick:e.toggle})),e.active?r.a.createElement("div",{className:"col-10 input-group"},r.a.createElement("span",{className:"form-control-sm"},"Dalam (",Ln(e.expiredWarningDays),")"),r.a.createElement("input",{required:!0,type:"number",className:"form-control-sm",value:e.expiredWarningDays,onChange:e.update}),r.a.createElement("span",{className:"form-control-sm"},"Max Tanggal"),r.a.createElement("input",{onChange:e.update,required:!0,type:"date",className:"form-control-sm",value:wt(t)})):null))},Ln=function(e){return e<0?Math.abs(e)+" Hari yang lalu":e+" Hari"},Fn=function(e){return r.a.createElement(Tt,null,r.a.createElement("button",{type:"submit",className:"btn btn-success"},r.a.createElement("i",{style:{marginRight:"5px"},className:"fas fa-sync-alt"}),"Muat Ulang"))},An=function(e){return r.a.createElement(Tt,{label:"Lokasi"},r.a.createElement("select",{key:"select-health-center",onChange:e.updateLocation,value:e.selectedLocation.id,className:"form-control"},e.locations.map((function(e,t){return r.a.createElement("option",{key:"select-location-stock-"+t,value:e.id},e.name)}))))},xn=Object(m.f)(Object(ce.b)(me)(In)),Rn=function e(){Object(d.a)(this,e),this.label="",this.value="",this.isDate=!1,this.filterable=!0,this.orderable=!0};Rn.fromEntityProperty=function(e){return Je.getHeaderLabels(e)};var Mn=function e(){Object(d.a)(this,e),this.ignoreBaseField=void 0,this.id="0",this.type="text",this.className=void 0,this.labelName="Label",this.optionItemName=void 0,this.optionValueName=void 0,this.entityReferenceName=void 0,this.entityReferenceClass=void 0,this.detailFields=void 0,this.multiple=void 0,this.defaultValues=void 0,this.plainListValues=[],this.options=void 0,this.identity=void 0,this.required=void 0,this.editable=!0,this.filterable=!0,this.orderable=!0,this.entityProperty=void 0,this.additionalMap=void 0,this.fieldType=He.FIELD_TYPE_TEXT};Mn.isList=function(e){return e.fieldType==He.FIELD_TYPE_FIXED_LIST||e.fieldType==He.FIELD_TYPE_DYNAMIC_LIST};var _n=function e(){Object(d.a)(this,e),this.entityProperty=void 0,this.entityPropertyNotLoaded=!1,this.filter=new Qe,this.items=[],this.inventoryConfig=new Pn,this.totalData=0},Un=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Inventory",!0)).state=new _n,n.masterDataService=void 0,n.inventoryService=void 0,n.headerProps=[],n.entityPropertyLoaded=function(e){if(!e.entityProperty)throw new Error("Invalid property!");var t=n.adjustProperty(e.entityProperty);n.setState({entityProperty:t,entityPropertyNotLoaded:!1},(function(){n.loadItems(0)}))},n.adjustProperty=function(e){var t=Object.assign(new Je,e);t.keepProperties("id","product","stock","expiredDate");var a=new Mn;return a.id="location",a.labelName="Location",a.orderable=!1,t.addElement(a),t.setOrder("product","stock","expiredDate","location","id"),t},n.entityPropertyNotLoaded=function(e){n.setState({entityProperty:void 0,entityPropertyNotLoaded:!0})},n.loadEntityProperty=function(){n.commonAjax(n.masterDataService.loadEntityProperty,n.entityPropertyLoaded,n.entityPropertyNotLoaded,"productflow")},n.loadItems=function(e){var t=Object.assign(new Qe,n.state.filter);t.page=null!==e&&void 0!==e?e:t.page,Qe.validateFieldsFilter(t),n.commonAjax(n.inventoryService.filterStocks,n.itemsLoaded,n.showCommonErrorAlert,t)},n.itemsLoaded=function(e){n.setState({items:e.entities,totalData:e.totalData,filter:e.filter,config:e.configuration})},n.filterOnChange=function(e){e.preventDefault();var t=n.state.filter;Qe.setFieldsFilterValueFromInput(t,e.target),n.setState({filter:t})},n.orderButtonOnClick=function(e){var t=n.state.filter;Qe.setOrderPropertyFromDataSet(t,e.target.dataset),n.setState({filter:t},(function(){n.loadItems(0)}))},n.getHeaderProps=function(){return n.state.entityProperty?(n.headerProps.length>0||(n.headerProps=Rn.fromEntityProperty(n.state.entityProperty)),n.headerProps):(n.showCommonErrorAlert("Invalid Entity Property"),[])},n.updateFilterPage=function(e){var t=n.state.filter;t.useExistingFilterPage=!0,t.page=parseInt(e)-1,n.setState({filter:t})},n.updateFilterLimit=function(e){var t=n.state.filter;t.limit=parseInt(e),n.setState({filter:t})},n.filterReset=function(e){var t=n.state.filter;t.fieldsFilter={},t.limit=20,n.setState({filter:t})},n.filterFormSubmit=function(e){var t=n.state.filter.useExistingFilterPage?n.state.filter.page:0;n.loadItems(t)},n.bgClass=function(e){if(!e.expiredDate)return"";var t=new Date(e.expiredDate),a=new Date;if(t<=a)return"bg-danger";var r=n.state.inventoryConfig;return(t.getTime()-a.getTime())/864e5<=r.expiredWarningDays?"bg-warning":""},n.masterDataService=n.getServices().masterDataService,n.inventoryService=n.getServices().inventoryService,n.state.filter.limit=20,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.scrollTop(),e.loadEntityProperty()}))}},{key:"render",value:function(){var e,t,a,n,o,i=this;if(this.state.entityPropertyNotLoaded)return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement(Gt,null,r.a.createElement("h3",null,"Config Not Loaded"),r.a.createElement(ze,{onClick:this.loadEntityProperty},"Reload Config")));if(!this.state.entityProperty)return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement(je,null));var l=this.state.filter,s=this.state.items;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Filter Persediaan"),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null)),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement(Ge,{title:"Filter",toggleable:!0},r.a.createElement("div",null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:(null!==(t=l.page)&&void 0!==t?t:0)+1,onChange:function(e){i.updateFilterPage(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"go to page"})),r.a.createElement("div",{className:"col-6"},r.a.createElement("input",{value:l.limit,onChange:function(e){return i.updateFilterLimit(e.target.value)},min:"1",className:"form-control",type:"number",placeholder:"record per page"})),r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null)),r.a.createElement("div",{className:"col-3"},r.a.createElement(Hn,{onSubmit:this.filterFormSubmit,onReset:this.filterReset}))))),r.a.createElement($e,{limit:null!==(a=l.limit)&&void 0!==a?a:20,totalData:null!==(n=this.state.totalData)&&void 0!==n?n:0,activePage:null!==(o=l.page)&&void 0!==o?o:0,onClick:this.loadItems}),r.a.createElement("div",{className:"container-fluid",style:{overflow:"scroll"}},r.a.createElement("table",{className:"table"},r.a.createElement(Vt,{headerProps:this.getHeaderProps(),fieldsFilter:l.fieldsFilter,filterOnChange:this.filterOnChange,orderButtonOnClick:this.orderButtonOnClick}),r.a.createElement("tbody",null,s.map((function(e,t){var a,n,o,s,c,u,d,m,p="TRANS_IN"==(null===(a=e.transaction)||void 0===a?void 0:a.type)?null===(n=e.transaction)||void 0===n||null===(o=n.healthCenterLocation)||void 0===o?void 0:o.name:null===(s=e.transaction)||void 0===s||null===(c=s.healthCenterDestination)||void 0===c?void 0:c.name;return r.a.createElement("tr",{key:"stock-item-"+e.id,className:i.bgClass(e)},r.a.createElement("td",null,t+1+(null!==(u=l.page)&&void 0!==u?u:0)*(null!==(d=l.limit)&&void 0!==d?d:20)),r.a.createElement("td",{children:null===(m=e.product)||void 0===m?void 0:m.name}),r.a.createElement("td",{children:e.stock}),r.a.createElement("td",null,e.expiredDate?new Date(e.expiredDate).toLocaleDateString("ID"):"-"),r.a.createElement("td",{children:p}),r.a.createElement("td",{children:e.id}))})))))))}}]),a}(xe),Hn=function(e){return r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{onClick:e.onSubmit,className:"btn btn-dark btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-play-circle"})),"Apply Filter"),r.a.createElement("button",{onClick:e.onReset,type:"reset",className:"btn btn-dark btn-sm"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-sync-alt"})),"Reset"))},Yn=Object(m.f)(Object(ce.b)(me)(Un)),Bn=function e(){Object(d.a)(this,e),this.filter=new Qe,this.healthCenters=[],this.selectedHealthCenter=new E,this.period=new Date},Wn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e,"Laporan",!0)).state=new Bn,n.masterDataService=void 0,n.reportService=void 0,n.inventoryService=void 0,n.healthCentersLoaded=function(e){var t;e.entities&&(n.masterDataService.setHealthCenters(null!==(t=e.entities)&&void 0!==t?t:[]),n.setState({healthCenters:e.entities,selectedHealthCenter:n.getMasterHealthCenter()}))},n.loadHealthCenter=function(){n.masterDataService.getHealthCenters().length>0?n.healthCentersLoaded({entities:n.masterDataService.getHealthCenters()}):n.commonAjax(n.masterDataService.loadHealthCenters,n.healthCentersLoaded,n.showCommonErrorAlert)},n.updateLocation=function(e){var t=e.target,a=n.state.healthCenters.filter((function(e){var a;return(null===(a=e.id)||void 0===a?void 0:a.toString())==t.value}));a.length>0&&n.setState({selectedHealthCenter:a[0]})},n.reportCreated=function(e){n.showConfirmation("Simpan "+e.name+" ?").then((function(t){t&&Object.assign(document.createElement("a"),{target:"_blank",download:e.name,style:{display:"none"},href:e.dataUrl}).click()}))},n.updatePeriod=function(e){var t=new Date(e.target.value),a=n.state.filter;a.day=t.getDate(),a.month=t.getMonth()+1,a.year=t.getFullYear(),n.setState({period:t,filter:a})},n.loadStockOpname=function(){var e=n.state.selectedHealthCenter.name,t=n.state.period.toLocaleDateString("ID");n.showConfirmation("Muat Stok Opname "+t+" : "+e+"?").then((function(e){e&&n.commonAjaxWithProgress(n.reportService.loadStockOpnameReport,n.reportCreated,n.showCommonErrorAlert,n.state.filter,n.state.selectedHealthCenter)}))},n.loadMontlyReport=function(){var e=n.state.period.getMonth()+1+" - "+n.state.period.getFullYear();n.showConfirmation("Muat Laporan Bulanan "+e+"?").then((function(e){e&&n.commonAjaxWithProgress(n.reportService.loadMontlyReport,n.reportCreated,n.showCommonErrorAlert,n.state.filter)}))},n.printReceiveRequestSheet=function(){var e=n.state.period.getMonth()+1+" - "+n.state.period.getFullYear();n.showConfirmation("Muat LPLPO "+e+"?").then((function(e){e&&n.commonAjaxWithProgress(n.reportService.printReceiveRequestSheet,n.reportCreated,n.showCommonErrorAlert,n.state.filter,n.state.selectedHealthCenter)}))},n.adjustStocks=function(){n.showConfirmation("Kalkulasi Ulang Stok?").then((function(e){e&&n.commonAjaxWithProgress(n.inventoryService.adjustStocks,(function(){return n.showInfo("Success")}),n.showCommonErrorAlert)}))};var r=n.state.period;return n.state.filter.day=r.getDate(),n.state.filter.month=r.getMonth()+1,n.state.filter.year=r.getFullYear(),n.reportService=n.getServices().reportService,n.masterDataService=n.getServices().masterDataService,n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.loadHealthCenter(),e.scrollTop()}))}},{key:"render",value:function(){var e,t=this.state.period,a=this.state.filter,n=Ct[t.getMonth()];return r.a.createElement("div",{id:"Report",className:"container-fluid section-body"},r.a.createElement("h2",null,"Cetak Laporan"),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement(Tt,{label:"Lokasi"},r.a.createElement("select",{autoComplete:"off",key:"select-health-center",onChange:this.updateLocation,value:this.state.selectedHealthCenter.id,className:"form-control"},this.state.healthCenters.map((function(e,t){return r.a.createElement("option",{key:"select-location-stock-"+t,value:e.id},e.name)})))),r.a.createElement(Tt,{label:"Periode"},r.a.createElement("input",{autoComplete:"off",onChange:this.updatePeriod,type:"date",className:"form-control",value:wt(t)})))),r.a.createElement("div",{className:"row"},r.a.createElement(qn,{onClick:this.loadStockOpname,description:["Tanggal",t.getDate(),n,a.year].join(" ")},"Stok Opname"),r.a.createElement(qn,{onClick:this.loadMontlyReport,description:["Bulan",n,a.year].join(" ")},"Laporan Bulanan"),r.a.createElement(qn,{onClick:this.printReceiveRequestSheet,description:["Bulan",n,a.year].join(" ")},"LPLPO"),r.a.createElement(qn,{onClick:this.adjustStocks,description:""},"Kalkulasi Ulang Stok")))}}]),a}(xe),qn=function(e){return r.a.createElement("div",{className:"col-md-3 text-center"},r.a.createElement(da,{title:e.children},r.a.createElement("p",null,e.description),r.a.createElement(ze,{iconClassName:"far fa-file",onClick:e.onClick},"Submit")))},Kn=Object(m.f)(Object(ce.b)(me)(Wn)),Vn=function e(){Object(d.a)(this,e),this.cycleTime=!1,this.leadTime=!1,this.expiredWarningDays=!1},zn=function e(){var t=this;Object(d.a)(this,e),this.config=void 0,this.editFields=new Vn,this.fieldChanged=function(){for(var e in t.editFields)if(1==t.editFields[e])return!0;return!1}},Xn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Configuration Profile")).actualConfig=new Pn,n.state=new zn,n.loadConfiguration=function(){n.commonAjax(n.masterDataService.getByKey,n.configLoaded,n.showCommonErrorAlert,"configuration","code","APP_CONFIG")},n.configLoaded=function(e){if(e.entities&&e.entities.length>0){var t=Object.assign(new Pn,e.entities[0]);n.actualConfig=Object.assign(new Pn,e.entities[0]),n.setState({config:t})}},n.updateProfileProperty=function(e){var t=e.target;if(null!=t){var a=n.state.config;a&&(a[t.name]=t.value,n.setState({config:a}))}},n.setProperty=function(e,t){var a=n.state.config;a&&(a[e]=t,n.setState({config:a}))},n.toggleInput=function(e){var t=e.target,a=n.state.config,r=n.actualConfig;if(null!=t&&a){var o=t.getAttribute("data-name");if(null!=o){var i="true"==t.getAttribute("data-enabled"),l=n.state.editFields;l[o]=i,i||(a[o]=r[o]),n.setState({config:a,editFields:l})}}},n.doSaveRecord=function(){var e=n.getEditedRecord();e&&n.commonAjax(n.masterDataService.updateConfiguration,n.recordSaved,n.showCommonErrorAlert,e)},n.getEditedRecord=function(){var e=n.state.config,t=n.state.editFields;if(e){var a=new Pn;for(var r in t)a[r]=e[r];return a}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.validateLoginStatus((function(){e.loadConfiguration(),e.scrollTop()}))}},{key:"render",value:function(){var e=this.state.config;if(!e)return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement(je,null));var t=this.state.editFields;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Inventory Configuration"),r.a.createElement(da,{title:"Inventory Configuration"},r.a.createElement("form",{onSubmit:this.saveRecord},r.a.createElement(Tt,{label:"Cycle Time"},r.a.createElement(ma,{type:"number",edit:t.cycleTime,updateProperty:this.updateProfileProperty,name:"cycleTime",toggleInput:this.toggleInput,value:e.cycleTime})),r.a.createElement(Tt,{label:"Lead Time"},r.a.createElement(ma,{type:"number",edit:t.leadTime,updateProperty:this.updateProfileProperty,name:"leadTime",toggleInput:this.toggleInput,value:e.leadTime})),r.a.createElement(Tt,{label:"Exp Date Warning"},r.a.createElement(ma,{type:"number",edit:t.expiredWarningDays,updateProperty:this.updateProfileProperty,name:"expiredWarningDays",toggleInput:this.toggleInput,value:e.expiredWarningDays})),r.a.createElement(Tt,null,this.state.fieldChanged()?r.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Save"}):null))))}}]),a}(va),Gn=Object(m.f)(Object(ce.b)(me)(Xn)),Qn=function e(){var t=this;Object(d.a)(this,e),this.inventories=[],this.totalItemsSum=0,this.totalExpiredSum=0,this.totalWillExpiredSum=0,this.periodicReviewResult=void 0,this.month=void 0,this.year=void 0,this.getLabel=function(){var e;return Ct[(null!==(e=t.month)&&void 0!==e?e:1)-1]+" "+t.year},this.getAmount=function(){return t.totalItemsSum}};Qn.toDataSets=function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(Object.assign(new Qn,n))}return t};var Jn=function e(){Object(d.a)(this,e),this.inventoryData=new Qn,this.configuration=new Pn},Zn=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!0)).state=new Jn,n.inventoryService=void 0,n.inventoriesDataLoaded=function(e){n.setState({inventoryData:e.inventoryData,configuration:e.configuration},(function(){n.props.setInventoryData(e)}))},n.loadInventoriesData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||!n.getInventoryData()?n.commonAjaxWithProgress(n.inventoryService.getInventoriesData,n.inventoriesDataLoaded,n.showCommonErrorAlert):n.setState({inventoryData:n.getInventoryData(),configuration:n.getInventoryConfig()})},n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(this.loadInventoriesData),this.setPageTitle("Info Persediaan"),this.scrollTop()}},{key:"render",value:function(){var e,t=this,a=this.state.inventoryData.totalItemsSum,n=this.state.inventoryData.totalWillExpiredSum,o=this.state.inventoryData.totalExpiredSum,i=a-o-n;return r.a.createElement("div",{id:"DashboardInfo",className:"section-body container-fluid"},r.a.createElement("h2",null,"Info"),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement(da,{className:"bg-success text-light",title:"Stok Aman"},r.a.createElement("h3",{className:"text-center"}," ",Ue(i)))),r.a.createElement("div",{className:"col-4"},r.a.createElement(da,{className:"bg-warning",title:"Stok Akan Kadaluarsa"},r.a.createElement("h3",{className:"text-center"},Ue(n)))),r.a.createElement("div",{className:"col-4"},r.a.createElement(da,{className:"bg-danger text-warning",title:"Stok Kadaluarsa"},r.a.createElement("h3",{className:"text-center"},Ue(o)))),r.a.createElement("div",{className:"col-10"},r.a.createElement("p",null),r.a.createElement(za,null,r.a.createElement("p",null,"Total Stok: ",r.a.createElement("strong",null,Ue(a))),r.a.createElement("p",null,"Peraingatan Kadaluarsa: ",this.state.configuration.expiredWarningDays," hari")),r.a.createElement("div",{className:"btn-group"},r.a.createElement(mt,{iconClassName:"fas fa-sync-alt",onClick:function(){return t.loadInventoriesData(!0)}},"Muat Ulang"),r.a.createElement(mt,{iconClassName:"fas fa-list",to:"/inventory/status"},"Rincian")))))}}]),a}(ye),$n=Object(m.f)(Object(ce.b)(me,(function(e){return{setInventoryData:function(t){return e(se(t))}}}))(Zn)),er=function e(){Object(d.a)(this,e),this.inventoryData=new Qn,this.configuration=new Pn},tr=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,"Status Persediaan",!0)).state=new er,n.inventoryService=void 0,n.inventoriesDataLoaded=function(e){n.setState({inventoryData:e.inventoryData,configuration:e.configuration},(function(){n.props.setInventoryData(e)}))},n.loadInventoriesData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||!n.getInventoryData()?n.commonAjaxWithProgress(n.inventoryService.getInventoriesData,n.inventoriesDataLoaded,n.showCommonErrorAlert):n.setState({inventoryData:n.getInventoryData(),configuration:n.getInventoryConfig()})},n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.validateLoginStatus(this.loadInventoriesData),Object(qe.a)(Object(Ke.a)(a.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){var e,t=this,a=this.state.configuration,n=this.state.inventoryData,o=this.state.inventoryData.inventories,i=0;return r.a.createElement("div",{className:"container-fluid section-body"},r.a.createElement("h2",null,"Status Persediaan"),r.a.createElement("div",{className:"alert alert-info"},_e(),", ",r.a.createElement("strong",null,null===(e=this.getLoggedUser())||void 0===e?void 0:e.displayName),r.a.createElement("hr",null)),r.a.createElement("div",null,r.a.createElement(mt,{iconClassName:"fas fa-sync-alt",onClick:function(){return t.loadInventoriesData(!0)}},"Muat Ulang"),r.a.createElement("p",null)),r.a.createElement("table",{className:"table table-striped"},Ta("No","Lokasi","Total","Stok Aman","Kadaluarsa dalam "+a.expiredWarningDays+" hari","Kadaluarsa"),r.a.createElement("tbody",null,o.map((function(e,t){var a=e.totalItems-e.expiredItems-e.willExpiredItems;return i+=a,r.a.createElement("tr",{key:"p-inv-"+t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.location.name),r.a.createElement("td",null,Ue(e.totalItems)),r.a.createElement("td",null,Ue(a)),r.a.createElement("td",{className:e.willExpiredItems>0?"bg-warning":""},Ue(e.willExpiredItems)," "),r.a.createElement("td",{className:e.expiredItems>0?"bg-danger text-warning":""},Ue(e.expiredItems)," "))})),r.a.createElement("tr",{className:"font-weight-bold"},r.a.createElement("td",{colSpan:2},"Total"),r.a.createElement("td",null,Ue(n.totalItemsSum)),r.a.createElement("td",null,Ue(i)),r.a.createElement("td",null,Ue(n.totalWillExpiredSum)),r.a.createElement("td",null,Ue(n.totalExpiredSum))))))}}]),a}(xe),ar=Object(m.f)(Object(ce.b)(me,(function(e){return{setInventoryData:function(t){return e(se(t))}}}))(tr)),nr=(new Date).getFullYear(),rr=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).getDayToArray=function(){for(var t,a,n=e.props.filter,r=kt(null!==(t=n.monthTo)&&void 0!==t?t:1,null!==(a=n.yearTo)&&void 0!==a?a:nr),o=[],i=1;i<=r;i++)o.push(i);return o},e.getDayFromArray=function(){for(var t,a,n=e.props.filter,r=kt(null!==(t=n.month)&&void 0!==t?t:1,null!==(a=n.year)&&void 0!==a?a:nr),o=[],i=1;i<=r;i++)o.push(i);return o},e.render=function(){var t,a,o,i,l,s,c=e.props.filter,u=1==e.props.withDay;return r.a.createElement(n.Fragment,null,u?r.a.createElement(Tt,{label:"Day"},r.a.createElement("select",{onChange:e.props.onChange,name:"day",value:null!==(t=c.day)&&void 0!==t?t:1,className:"form-control"},e.getDayFromArray().map((function(e){return r.a.createElement("option",{key:"day-from-"+e,value:e},e)})))):null,r.a.createElement(Tt,{label:"Month"},r.a.createElement("select",{onChange:e.props.onChange,value:null!==(a=c.month)&&void 0!==a?a:1,name:"month",className:"form-control"},Ct.map((function(e,t){return r.a.createElement("option",{key:"filter-month-from-"+t,value:t+1},e)})))),r.a.createElement(Tt,{label:"Year"},r.a.createElement("input",{onChange:e.props.onChange,name:"year",type:"number",value:null!==(o=c.year)&&void 0!==o?o:nr,className:"form-control"})),e.props.fullPeriod?r.a.createElement(n.Fragment,null,u?r.a.createElement(Tt,{label:"Day"},r.a.createElement("select",{onChange:e.props.onChange,name:"dayTo",value:null!==(i=c.dayTo)&&void 0!==i?i:1,className:"form-control"},e.getDayToArray().map((function(e){return r.a.createElement("option",{key:"day-from-"+e,value:e},e)})))," "):null,r.a.createElement(Tt,{label:"Month To"},r.a.createElement("select",{onChange:e.props.onChange,value:null!==(l=c.monthTo)&&void 0!==l?l:1,name:"monthTo",className:"form-control"},Ct.map((function(e,t){return r.a.createElement("option",{key:"filter-month-from-"+t,value:t+1},e)})))),r.a.createElement(Tt,{label:"Year To"},r.a.createElement("input",{onChange:e.props.onChange,name:"yearTo",type:"number",value:null!==(s=c.yearTo)&&void 0!==s?s:nr,className:"form-control"}))):null)},e}return a}(n.Component),or=(a(151),function e(){Object(d.a)(this,e),this.hoveredIndex=-1,this.updated=new Date}),ir=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).middleYAxisValue=0,n.bottomYAxisValue=0,n.offsetX=100,n.offsetY=50,n.baseYIndex=200,n.baseHeight=150,n.lineWidth=0,n.maxValue=0,n.state=new or,n.maxAmount=function(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];n.getAmount()>t&&(t=n.getAmount())}return t},n.updateSizes=function(){n.maxValue=n.maxAmount(n.props.dataSet),n.middleYAxisValue=Math.round(2*n.maxValue/3),n.bottomYAxisValue=Math.round(1*n.maxValue/3),n.lineWidth=23*n.props.dataSet.length+100},n.hover=function(e){n.setState({hoveredIndex:e})},n.onClick=function(e){n.props.onClick&&n.props.onClick(e)},n.unHover=function(){n.setState({hoveredIndex:-1})},n.updateSizes(),n}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){this.updateSizes(),this.props.updated!=this.state.updated&&this.setState({updated:this.props.updated})}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"text-center border border-secondary",style:{minHeight:"300px",overflowX:"scroll",paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement("svg",{onMouseOut:this.unHover,className:"bg-light border",version:"1.1",baseProfile:"full",width:2*this.offsetX+23*t.dataSet.length+100,height:300,xmlns:"http://www.w3.org/2000/svg"},t.dataSet.map((function(t,a){var n=t.getAmount()/e.maxValue*e.baseHeight,o=e.baseYIndex+15,i=e.offsetX+10+23*a,l="translate(0,0) rotate(-30,"+i+","+o+")",s=a==e.state.hoveredIndex;return r.a.createElement("g",{style:s?{cursor:"pointer"}:{},className:"chart-group",onMouseOver:function(t){return e.hover(a)},onClick:function(t){return e.onClick(a)},onMouseOut:e.unHover,key:"bar-item-chart-"+a},r.a.createElement("rect",{fill:s?"red":"green",x:e.offsetX+23*a,y:e.baseYIndex-n,height:n,width:20}),r.a.createElement("text",{fill:s?"red":"black",textAnchor:"end",fontSize:10,x:i,y:o,transform:l},t.getLabel()),r.a.createElement("circle",{cx:e.offsetX+23*(a+1),cy:e.baseYIndex,r:"3",fill:"red"}))})),r.a.createElement("rect",{name:"base_axis_x",x:this.offsetX,y:this.baseYIndex,height:2,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_top",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_middle",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+1*this.baseHeight/3,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"ruler_line_bottom",fill:"rgb(100,100,100)",x:this.offsetX,y:this.offsetY+2*this.baseHeight/3,height:1,width:this.lineWidth}),r.a.createElement("rect",{name:"base_axis_y",x:this.offsetX,y:this.offsetY,height:this.baseHeight,width:2}),r.a.createElement("text",{textAnchor:"end",name:"top_val",fontSize:10,x:this.offsetX,y:this.offsetY},Ue(this.maxValue)),r.a.createElement("text",{textAnchor:"end",name:"middle_val",fontSize:10,x:this.offsetX,y:this.offsetY+1*this.baseHeight/3},Ue(this.middleYAxisValue)),r.a.createElement("text",{textAnchor:"end",name:"bottom_val",fontSize:10,x:this.offsetX,y:this.offsetY+2*this.baseHeight/3},Ue(this.bottomYAxisValue)))),r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-history"})," ",new Date(this.state.updated).toString()))}}]),a}(n.Component),lr=function e(){Object(d.a)(this,e),this.product=void 0,this.filter=new Qe,this.inventoriesData=void 0,this.selectedItem=void 0,this.totalData=0,this.periodicReviewResult=void 0},sr=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e,"Penggunaan Produk",!0)).state=new lr,n.inventoryService=void 0,n.setProduct=function(e){return n.setState({product:e})},n.updateFilter=function(e){var t=e.target,a=t.getAttribute("name"),r=t.value;if(a&&r){var o=n.state.filter;o[a]=parseInt(r),n.setState({filter:o})}},n.setFilter=function(e){if(e.preventDefault(),n.state.product){var t={product:n.state.product,filter:n.state.filter};n.commonAjaxWithProgress(n.inventoryService.getProductUsage,n.usageDataLoaded,n.showCommonErrorAlert,t)}else n.showError("Please select product")},n.usageDataLoaded=function(e){var t;n.setState({selectedItem:void 0,periodicReviewResult:null===(t=e.inventoryData)||void 0===t?void 0:t.periodicReviewResult,inventoriesData:e.inventoriesData,totalData:e.totalData})},n.selectInventory=function(e){if(void 0!=n.state.inventoriesData)try{var t=n.state.inventoriesData[e];n.setState({selectedItem:t})}catch(a){}};var r=new Date;return n.state.filter.year=n.state.filter.yearTo=r.getFullYear(),n.state.filter.month=n.state.filter.monthTo=r.getMonth()+1,n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.inventoriesData,t=this.state.periodicReviewResult;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Penggunaan Produk"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Ge,{title:"Periode"},r.a.createElement("form",{onSubmit:this.setFilter},r.a.createElement(rr,{fullPeriod:!0,filter:this.state.filter,onChange:this.updateFilter}),this.state.product?r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Apply"):r.a.createElement("i",null,"Silakan pilih produk")))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(xa,{setProduct:this.setProduct}))),r.a.createElement("div",null,e?r.a.createElement(ur,{periodicReviewResult:t,totalData:this.state.totalData,onClick:this.selectInventory,inventoriesData:e}):r.a.createElement(Gt,null,"No data")),this.state.selectedItem?r.a.createElement(cr,{item:this.state.selectedItem}):null)}}]),a}(xe),cr=function(e){var t=Object.assign(new Qn,e.item);return r.a.createElement(da,{attributes:{style:{marginTop:"10px"}},title:"Detail Usage"},r.a.createElement(Tt,{label:"Period"},t.getLabel()),r.a.createElement(Tt,{label:"Amount"},Ue(t.getAmount())))},ur=function(e){return r.a.createElement(da,null,r.a.createElement(ir,{onClick:e.onClick,updated:new Date,dataSet:Qn.toDataSets(e.inventoriesData)}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Tt,{label:"Total"},Ue(e.totalData))),r.a.createElement("div",{className:"col-md-6"},e.periodicReviewResult?r.a.createElement(dr,{periodicReviewResult:e.periodicReviewResult}):null)))},dr=function(e){var t=e.periodicReviewResult;return r.a.createElement(n.Fragment,null,r.a.createElement(Tt,{label:"Safety stock"},t.safetyStock),r.a.createElement(Tt,{label:"Target Stock Level"},t.targetStockLevel),r.a.createElement(Tt,{label:"Order Size"},t.orderSize),r.a.createElement(Tt,{label:"Description"},t.description))},mr=Object(m.f)(Object(ce.b)(me)(sr)),pr=function e(){Object(d.a)(this,e),this.filter=new Qe,this.recordList=void 0,this.totalData=0},fr=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e,"Penggunaan Produk",!0)).state=new pr,n.inventoryService=void 0,n.updateFilter=function(e){var t=e.target,a=t.getAttribute("name"),r=t.value;if(a&&r){var o=n.state.filter;o[a]=parseInt(r),n.setState({filter:o})}},n.setFilter=function(e){e.preventDefault(),n.loadRecords()},n.loadRecordsAtPage=function(e){var t=n.state.filter;t.page=e,n.setState({filter:t},n.loadRecords)},n.loadRecords=function(){n.commonAjaxWithProgress(n.inventoryService.getProductListWithUsage,n.usageDataLoaded,n.showCommonErrorAlert,n.state.filter)},n.usageDataLoaded=function(e){n.setState({recordList:e.entities,totalData:e.totalData})},n.updateFieldsFilter=function(e){var t=e.target,a=n.state.filter;a.fieldsFilter[t.name]=t.value,n.setState({filter:a})};var r=new Date;return n.state.filter.year=n.state.filter.yearTo=r.getFullYear(),n.state.filter.month=n.state.filter.monthTo=r.getMonth()+1,n.state.filter.day=n.state.filter.dayTo=1,n.state.filter.limit=10,n.state.filter.fieldsFilter.name="",n.inventoryService=n.getServices().inventoryService,n}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,n,o,i,l=this.state.recordList;return r.a.createElement("div",{className:"section-body container-fluid"},r.a.createElement("h2",null,"Penggunaan Produk"),r.a.createElement(Ge,{title:"Periode"},r.a.createElement("form",{onSubmit:this.setFilter},r.a.createElement(rr,{withDay:!0,fullPeriod:!0,filter:this.state.filter,onChange:this.updateFilter}),r.a.createElement(Tt,{label:"Limit"},r.a.createElement("input",{value:null!==(e=this.state.filter.limit)&&void 0!==e?e:5,type:"number",min:1,name:"limit",className:"form-control",onChange:this.updateFilter})),r.a.createElement(Tt,{label:"Search by name"},r.a.createElement("input",{value:null!==(t=this.state.filter.fieldsFilter.name)&&void 0!==t?t:"",onChange:this.updateFieldsFilter,name:"name",className:"form-control"})),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Apply"))),r.a.createElement($e,{activePage:null!==(a=this.state.filter.page)&&void 0!==a?a:0,limit:null!==(n=this.state.filter.limit)&&void 0!==n?n:10,totalData:this.state.totalData,onClick:this.loadRecordsAtPage}),l?r.a.createElement(hr,{products:l,startNumber:(null!==(o=this.state.filter.page)&&void 0!==o?o:0)*(null!==(i=this.state.filter.limit)&&void 0!==i?i:10)}):r.a.createElement(Gt,null,"No data"))}}]),a}(xe),hr=function(e){return r.a.createElement("table",{className:"table table-striped"},Ta("No","Name","Usage","Unit"),r.a.createElement("tbody",null,e.products.map((function(t,a){var n,o;return r.a.createElement("tr",{key:"product-stat-item-"+a},r.a.createElement("td",null,e.startNumber+a+1),r.a.createElement("td",null,t.name),r.a.createElement("td",null,Ue(null!==(n=t.count)&&void 0!==n?n:0)),r.a.createElement("td",null,null===(o=t.unit)||void 0===o?void 0:o.name))}))))},vr=Object(m.f)(Object(ce.b)(me)(fr)),gr=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).setSidebarMenus=function(e){n.props.setSidebarMenus(e)},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement(Ae,null)}}),r.a.createElement(m.a,{exact:!0,path:"/home",render:function(e){return r.a.createElement(la,null)}}),r.a.createElement(m.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(la,null)}}),r.a.createElement(m.a,{exact:!0,path:"/about",render:function(e){return r.a.createElement(ka,null)}}),r.a.createElement(m.a,{exact:!0,path:"/management",render:function(t){return r.a.createElement(oa,{setSidebarMenus:e.setSidebarMenus})}}),r.a.createElement(m.a,{exact:!0,path:"/management/:code",render:function(t){return r.a.createElement(oa,{setSidebarMenus:e.setSidebarMenus})}})),r.a.createElement(Er,null),r.a.createElement(br,null),r.a.createElement(yr,null),r.a.createElement(Nr,null))}},{key:"componentDidMount",value:function(){}}]),a}(ye),Er=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/dashboard",render:function(e){return r.a.createElement(We,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/info",render:function(e){return r.a.createElement($n,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/productstat",render:function(e){return r.a.createElement(vr,null)}}),r.a.createElement(m.a,{exact:!0,path:"/dashboard/productstatdetail",render:function(e){return r.a.createElement(mr,null)}}))},br=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/settings",render:function(e){return r.a.createElement(ca,null)}}),r.a.createElement(m.a,{exact:!0,path:"/settings/user-profile",render:function(e){return r.a.createElement(ba,null)}}),r.a.createElement(m.a,{exact:!0,path:"/settings/app-profile",render:function(e){return r.a.createElement(Sa,null)}}),r.a.createElement(m.a,{exact:!0,path:"/settings/inventory-config",render:function(e){return r.a.createElement(Gn,null)}}))},yr=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/transaction",render:function(e){return r.a.createElement(Oa,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productin",render:function(e){return r.a.createElement(Wa,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productin/confirm",render:function(e){return r.a.createElement(nn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productout",render:function(e){return r.a.createElement($a,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/productout/confirm",render:function(e){return r.a.createElement(yn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/detail",render:function(e){return r.a.createElement(dn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/detail/:code",render:function(e){return r.a.createElement(dn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/relatedrecord",render:function(e){return r.a.createElement(vn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/transaction/relatedrecord/:code",render:function(e){return r.a.createElement(vn,null)}}))},Nr=function(e){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/inventory",render:function(e){return r.a.createElement(Cn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/inventory/stock",render:function(e){return r.a.createElement(xn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/inventory/status",render:function(e){return r.a.createElement(ar,null)}}),r.a.createElement(m.a,{exact:!0,path:"/inventory/stockfilter",render:function(e){return r.a.createElement(Yn,null)}}),r.a.createElement(m.a,{exact:!0,path:"/inventory/report",render:function(e){return r.a.createElement(Kn,null)}}))},Cr=Object(m.f)(Object(ce.b)(me,(function(e){return{}}))(gr)),Sr=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).code=Me(),e.name=void 0,e.description=void 0,e.url=void 0,e.pathVariables=void 0,e.iconUrl=void 0,e.color=void 0,e.fontColor=void 0,e.active=!1,e.menuClass="fas fa-folder",e.authenticated=!1,e.showSidebar=!1,e.subMenus=void 0,e}return a}(g);Sr.defaultMenuIconClassName="fas fa-folder",Sr.getIconClassName=function(e){return void 0==e.menuClass?Sr.defaultMenuIconClassName:e.menuClass};a(152);var Dr=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).isSidebarActive=function(e){var t=n.props.parentMenu;if(null==t)return!1;var a=n.props.location.pathname;return t.url+"/"+e.url==a},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=e.srcElement.body.scrollTop;Math.min(0,t/3-60)}},{key:"render",value:function(){var e=this,t=this.props.parentMenu;if(null==t)return null;var a=null==this.props.sidebarMenus?[]:this.props.sidebarMenus;return r.a.createElement("ul",{id:"sidebar",className:"sidebar-nav bg-light"},r.a.createElement(kr,{show:null!=t,brand:t}),a.map((function(a){var n=e.isSidebarActive(a)?"menu-active":"regular-menu";return r.a.createElement("li",{className:"sidebar-item "+n,key:"SIDEBAR_"+a.code},r.a.createElement(Ne.b,{to:t.url+"/"+a.url},r.a.createElement("span",{className:"sidebar-icon"},r.a.createElement("i",{className:Sr.getIconClassName(a)})),r.a.createElement("span",{className:"menu-label"},a.name)))})))}}]),a}(ye),kr=function(e){return 0==e.show?null:r.a.createElement(n.Fragment,null," ",r.a.createElement("li",{id:"sidebar-brand",className:"sidebar-brand",style:{marginBottom:"20px"}},r.a.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},r.a.createElement("h3",{className:"text-dark"},r.a.createElement("i",{className:Sr.getIconClassName(e.brand)})),r.a.createElement(Ne.b,{to:e.brand.url,style:{textDecoration:"none"}},r.a.createElement("h4",{className:"text-dark"},e.brand.name)))),r.a.createElement("li",{className:"sidebar-item-brand "},r.a.createElement(Ne.b,{to:e.brand.url},r.a.createElement("span",{className:"sidebar-icon"},r.a.createElement("i",{className:Sr.getIconClassName(e.brand)})))))},wr=Object(m.f)(Object(ce.b)(me,(function(e){return{performLogout:function(t){return e(le(t))}}}))(Dr)),Or=(a(153),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e,!1)).state={showSidebar:!1,activeMenuCode:null,menu:void 0,sidebarMenus:[]},n.currentPathName="",n.setMenuNull=function(){console.warn("SET MENU NULL"),n.setState({menu:void 0,showSidebar:!1,activeMenuCode:null,sidebarMenus:null})},n.setMenu=function(e){null!=e&&(console.debug("SET MENU: ",e.code),n.setState({menu:e,sidebarMenus:null,showSidebar:e.showSidebar,activeMenuCode:e.code}))},n.setSidebarMenus=function(e){n.setState({sidebarMenus:e})},n.setCurrentMenu=function(){var e=function(e){var t=e.split("/");console.debug("pathName: ",e);var a=t[0];return""==a.trim()&&(a=t[1]),a}(n.props.location.pathname);if(e!=n.currentPathName){n.currentPathName=e;var t=function(e){try{for(var t=0;t<Se.length;t++){var a=Se[t];if(a.url=="/"+e)return a}return null}catch(n){return null}}(e);null==t?n.setMenuNull():n.setMenu(t)}},n.getSubMenus=function(){var e,t;return n.state.menu&&null!=n.state.menu.subMenus&&(null===(e=n.state.menu.subMenus)||void 0===e?void 0:e.length)>0?null===(t=n.state.menu)||void 0===t?void 0:t.subMenus:n.state.sidebarMenus?n.state.sidebarMenus:null},n.state=Object(p.a)({},n.state),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentMenu()}},{key:"componentDidUpdate",value:function(){this.setCurrentMenu()}},{key:"render",value:function(){var e=1==this.state.showSidebar;return r.a.createElement("div",{id:"main-layout"},r.a.createElement(Pe,{setMenuNull:this.setMenuNull,activeMenuCode:this.state.activeMenuCode,setMenu:this.setMenu}),r.a.createElement("div",{id:"page-content",className:"container-fluid",style:{margin:0,padding:0,minHeight:"95vh"}},r.a.createElement("div",{className:"container-fluid",style:{zIndex:1,position:"absolute",paddingTop:"55px"},id:e?"app-content":"content"},r.a.createElement(Cr,{setSidebarMenus:this.setSidebarMenus})),1==e?r.a.createElement(wr,{sidebarMenus:this.getSubMenus(),parentMenu:this.state.menu}):null))}}]),a}(ye)),Pr=Object(m.f)(Object(ce.b)(me,(function(e){return{performLogout:function(t){return e(le(t))}}}))(Or)),jr=function e(){Object(d.a)(this,e),this.loading=!1,this.loadingPercentage=0,this.requestId=void 0,this.mainAppUpdated=new Date,this.showAlert=!1,this.realtime=!1,this.appIdStatus="Loading App Id",this.errorRequestAppId=!1},Ir=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state=new jr,n.loadings=0,n.alertTitle="Info",n.alertBody=null,n.alertIsYesOnly=!0,n.alertIsError=!1,n.alertOnYesCallback=function(e){},n.alertOnCancelCallback=function(e){},n.clientRef=r.a.createRef(),n.userService=void 0,n.alertCallback={title:"Info",message:"Info",yesOnly:!1,onOk:function(){},onNo:function(){}},n.requestAppId=function(){n.setState({errorRequestAppId:!1,appIdStatus:"Authenticating application"}),n.userService.requestApplicationId((function(e){n.props.setRequestId(e,Object(s.a)(n)),n.refresh()}),n.retryRequestAppId)},n.retryRequestAppId=function(){n.setState({errorRequestAppId:!1,appIdStatus:"Authenticating application (Retrying)"}),n.userService.requestApplicationIdNoAuth((function(e){n.props.setRequestId(e,Object(s.a)(n))}),n.errorRequestingAppId)},n.errorRequestingAppId=function(){n.setState({errorRequestAppId:!0})},n.smoothEndLoading=function(){be((function(){n.setState({loading:!1,loadingPercentage:0})}),100)},n.props.setMainApp(Object(s.a)(n)),n.userService=n.props.services.userService,n}return Object(l.a)(a,[{key:"refresh",value:function(){this.setState({mainAppUpdated:new Date})}},{key:"incrementLoadings",value:function(){this.loadings++}},{key:"decrementLoadings",value:function(){this.loadings--,this.loadings<0&&(this.loadings=0)}},{key:"startLoading",value:function(e){this.incrementLoadings(),this.setState({loading:!0,realtime:e})}},{key:"endLoading",value:function(){try{this.decrementLoadings(),0==this.loadings&&(this.state.realtime?this.setState({loadingPercentage:100},this.smoothEndLoading):this.setState({loading:!1,loadingPercentage:0}))}catch(e){console.error(e)}}},{key:"handleMessage",value:function(e){var t,a=null!==(t=e.percentage)&&void 0!==t?t:0,n=Math.floor(a);(a<0||a>100)&&this.endLoading(),this.setState({loadingPercentage:n})}},{key:"showAlert",value:function(e,t,a,n,r){this.alertTitle=e,this.alertBody=t,this.alertIsYesOnly=a;var o=this;this.alertOnYesCallback=function(e){o.dismissAlert(),n(e)},a||(this.alertOnCancelCallback=function(e){o.dismissAlert(),null!=r&&r(e)}),this.setState({showAlert:!0})}},{key:"dismissAlert",value:function(){this.alertIsError=!1,this.setState({showAlert:!1})}},{key:"showAlertError",value:function(e,t,a,n,r){this.alertIsError=!0,this.showAlert(e,t,a,n,r)}},{key:"componentDidUpdate",value:function(){this.props.applicationProfile&&function(e){if(e.pageIcon){var t=document.querySelector('link[rel="shortcut icon"]')||document.querySelector('link[rel="icon"]');t||((t=document.createElement("link")).id="favicon",t.setAttribute("rel","shortcut icon"),document.head.appendChild(t)),t.setAttribute("href",re()+e.pageIcon)}}(this.props.applicationProfile)}},{key:"componentDidMount",value:function(){this.requestAppId(),this.setState({loadingPercentage:0})}},{key:"render",value:function(){var e=this;if(!this.props.requestId)return r.a.createElement("div",{className:"text-center",style:{paddingTop:"10%"}},r.a.createElement("h2",null,this.state.appIdStatus),this.state.errorRequestAppId?r.a.createElement("a",{className:"btn btn-outline-dark",onClick:this.retryRequestAppId},r.a.createElement("i",{className:"fas fa-redo"})):r.a.createElement(je,null));var t=ne();return r.a.createElement(n.Fragment,null,r.a.createElement(Tr,{realtime:this.state.realtime,loading:this.state.loading,loadingPercentage:this.state.loadingPercentage}),this.state.showAlert?r.a.createElement(Ee,{title:this.alertTitle,isError:this.alertIsError,onClose:function(t){return e.setState({showAlert:!1})},yesOnly:this.alertIsYesOnly,onYes:this.alertOnYesCallback,onNo:this.alertOnCancelCallback},this.alertBody):null,r.a.createElement(Pr,null),r.a.createElement(de.a,{url:t+"realtime-app",topics:["/wsResp/progress/"+this.props.requestId],onMessage:function(t){e.handleMessage(t)},ref:function(t){e.clientRef=t}}))}}]),a}(n.Component);function Tr(e){return 1==e.loading?r.a.createElement(fe,{realtime:e.realtime,progress:e.loadingPercentage,text:"Please wait...",type:"loading"}):null}var Lr=Object(m.f)(Object(ce.b)(me,(function(e){return{setMainApp:function(t){return e({type:"SET_MAIN_APP",payload:t,meta:{type:"SET_MAIN_APP"}})},setRequestId:function(t,a){return e(function(e,t){var a={type:"SET_REQUEST_ID",payload:Object(p.a)({loginStatus:e.loggedIn,referer:t},e),meta:{type:"SET_REQUEST_ID"}};return console.debug("setRequestId: ",a),a}(t,a))}}}))(Ir)),Fr=function(e){var t=K();return r.a.createElement(ce.a,{store:t},r.a.createElement(Ne.a,null,r.a.createElement(Lr,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Fr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,a){e.exports=a(154)},82:function(e,t,a){},83:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.4b1eca7b.chunk.js.map